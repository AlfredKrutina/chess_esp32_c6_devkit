\doxysection{freertos\+\_\+chess.\+c}
\hypertarget{freertos__chess_8c_source}{}\label{freertos__chess_8c_source}\index{freertos\_chess.c@{freertos\_chess.c}}
\mbox{\hyperlink{freertos__chess_8c}{Zobrazit dokumentaci tohoto souboru.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00043}00043\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{freertos__chess_8h}{freertos\_chess.h}}"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00044}00044\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{button__task_8h}{button\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00045}00045\ \textcolor{preprocessor}{\#include\ "{}driver/gpio.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00046}00046\ \textcolor{preprocessor}{\#include\ "{}esp\_err.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00047}00047\ \textcolor{preprocessor}{\#include\ "{}esp\_log.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00048}00048\ \textcolor{preprocessor}{\#include\ "{}esp\_system.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00049}00049\ \textcolor{preprocessor}{\#include\ "{}esp\_task\_wdt.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00050}00050\ \textcolor{preprocessor}{\#include\ "{}esp\_timer.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00051}00051\ \textcolor{preprocessor}{\#include\ "{}freertos/queue.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00052}00052\ \textcolor{preprocessor}{\#include\ "{}freertos/semphr.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00053}00053\ \textcolor{preprocessor}{\#include\ "{}freertos/task.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00054}00054\ \textcolor{preprocessor}{\#include\ "{}freertos/timers.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00055}00055\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{led__task_8h}{led\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00056}00056\ \textcolor{preprocessor}{\#include\ "{}nvs\_flash.h"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00057}00057\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{shared__buffer__pool_8h}{shared\_buffer\_pool.h}}"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00058}00058\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{streaming__output_8h}{streaming\_output.h}}"{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00059}00059\ \textcolor{preprocessor}{\#include\ <stdarg.h>}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00060}00060\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00061}00061\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00062}00062\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00063}00063\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00065}\mbox{\hyperlink{freertos__chess_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{00065}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}}\ =\ \textcolor{stringliteral}{"{}FREERTOS\_CHESS"{}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00067}00067\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00068}00068\ \textcolor{comment}{//\ GLOBAL\ QUEUE\ AND\ MUTEX\ HANDLES}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00069}00069\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00071}00071\ \textcolor{comment}{//\ LED\ control\ queues\ -\/\ REMOVED:\ Using\ direct\ LED\ calls\ instead}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00072}00072\ \textcolor{comment}{//\ QueueHandle\_t\ led\_command\_queue\ =\ NULL;\ \ //\ \ REMOVED:\ Queue\ hell\ eliminated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00073}00073\ \textcolor{comment}{//\ QueueHandle\_t\ led\_status\_queue\ =\ NULL;\ \ \ //\ \ REMOVED:\ Queue\ hell\ eliminated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00075}00075\ \textcolor{comment}{//\ Matrix\ event\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00076}\mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{00076}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{matrix\_event\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00077}\mbox{\hyperlink{freertos__chess_8c_abc01112e6afa1b3e029218e52b7c2196}{00077}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_abc01112e6afa1b3e029218e52b7c2196}{matrix\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00078}\mbox{\hyperlink{freertos__chess_8c_a9b3fea6e381f159f9e088382e4040d27}{00078}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a9b3fea6e381f159f9e088382e4040d27}{matrix\_response\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00080}00080\ \textcolor{comment}{//\ Button\ event\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00081}\mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{00081}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{button\_event\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00082}\mbox{\hyperlink{freertos__chess_8c_a5f1958b9037083cf953f250fe1f364a5}{00082}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a5f1958b9037083cf953f250fe1f364a5}{button\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00084}00084\ \textcolor{comment}{//\ UART\ communication\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00085}\mbox{\hyperlink{freertos__chess_8c_a7e436e9dcca9a044bb9264755b4caa9e}{00085}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a7e436e9dcca9a044bb9264755b4caa9e}{uart\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00086}\mbox{\hyperlink{freertos__chess_8c_a02a776b41d5e50969e5cf68dcbbc2c69}{00086}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a02a776b41d5e50969e5cf68dcbbc2c69}{uart\_response\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00088}00088\ \textcolor{comment}{//\ Game\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00089}\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{00089}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00090}\mbox{\hyperlink{freertos__chess_8c_a6dfc9956f36db9a85a34268c6e14b059}{00090}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a6dfc9956f36db9a85a34268c6e14b059}{game\_status\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00092}00092\ \textcolor{comment}{//\ Animation\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00093}\mbox{\hyperlink{freertos__chess_8c_a6fa8af7d1c0b048b9f2c363a9fb2b288}{00093}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a6fa8af7d1c0b048b9f2c363a9fb2b288}{animation\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00094}\mbox{\hyperlink{freertos__chess_8c_ad2c6aca6dc859def2315ed1c26f11aad}{00094}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_ad2c6aca6dc859def2315ed1c26f11aad}{animation\_status\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00096}00096\ \textcolor{comment}{//\ Screen\ saver\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00097}\mbox{\hyperlink{freertos__chess_8c_ad6e2650c9733357ca904426081ccee72}{00097}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_ad6e2650c9733357ca904426081ccee72}{screen\_saver\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00098}\mbox{\hyperlink{freertos__chess_8c_a494d670fc3ed5c9bf7fc74a908a92712}{00098}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a494d670fc3ed5c9bf7fc74a908a92712}{screen\_saver\_status\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00099}00099\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00100}00100\ \textcolor{comment}{//\ DISABLED:\ Matter\ control\ queues\ -\/\ Matter\ not\ needed}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00101}00101\ \textcolor{comment}{//\ QueueHandle\_t\ matter\_command\_queue\ =\ NULL;}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00102}00102\ \textcolor{comment}{//\ extern\ QueueHandle\_t\ matter\_status\_queue;}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00104}00104\ \textcolor{comment}{//\ Web\ server\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00105}\mbox{\hyperlink{freertos__chess_8c_a642abc1652d446215a18d55b0517edba}{00105}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a642abc1652d446215a18d55b0517edba}{web\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00106}00106\ \textcolor{keyword}{extern}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00107}00107\ \textcolor{keyword}{extern}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00109}00109\ \textcolor{comment}{//\ Test\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00110}\mbox{\hyperlink{freertos__chess_8c_a849df7d33a2eeeb8383dab84223a7813}{00110}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a849df7d33a2eeeb8383dab84223a7813}{test\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00112}00112\ \textcolor{comment}{//\ System\ mutexes}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00113}\mbox{\hyperlink{freertos__chess_8c_a864f0cc9b1f2e30bd3c0e225e2c48552}{00113}}\ SemaphoreHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a864f0cc9b1f2e30bd3c0e225e2c48552}{led\_mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00114}\mbox{\hyperlink{freertos__chess_8c_a80a74d10dccdaa933010d0e5cf7202d8}{00114}}\ SemaphoreHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a80a74d10dccdaa933010d0e5cf7202d8}{matrix\_mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00115}\mbox{\hyperlink{freertos__chess_8c_a17744dc0b4a21889e7e9527835edc068}{00115}}\ SemaphoreHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a17744dc0b4a21889e7e9527835edc068}{button\_mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00116}\mbox{\hyperlink{freertos__chess_8c_af5298ceb88597b4b25328ac7e1af7ff0}{00116}}\ SemaphoreHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_af5298ceb88597b4b25328ac7e1af7ff0}{game\_mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00117}\mbox{\hyperlink{freertos__chess_8c_a54b3156204f85b12fbf1a9c012730afc}{00117}}\ SemaphoreHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a54b3156204f85b12fbf1a9c012730afc}{system\_mutex}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00119}00119\ \textcolor{comment}{//\ System\ timers}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00120}\mbox{\hyperlink{freertos__chess_8c_ad589ad22574a5fdb69645141759216c4}{00120}}\ TimerHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_ad589ad22574a5fdb69645141759216c4}{matrix\_scan\_timer}}\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00121}00121\ \ \ \ \ NULL;\ \textcolor{comment}{//\ LEGACY\ -\/\ not\ used\ with\ coordinated\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00122}\mbox{\hyperlink{freertos__chess_8c_af58f98e02d7d24dcc49a348ea1f22e77}{00122}}\ TimerHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_af58f98e02d7d24dcc49a348ea1f22e77}{button\_scan\_timer}}\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00123}00123\ \ \ \ \ NULL;\ \textcolor{comment}{//\ LEGACY\ -\/\ not\ used\ with\ coordinated\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00124}\mbox{\hyperlink{freertos__chess_8c_a9bd4853603c685d45ba49977256c7567}{00124}}\ TimerHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a9bd4853603c685d45ba49977256c7567}{led\_update\_timer}}\ =\ NULL;\ \textcolor{comment}{//\ Timer\ pro\ periodick칠\ obnoven칤\ LED}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00125}\mbox{\hyperlink{freertos__chess_8c_a2d90fd6adb05ddb54ae494a47e311309}{00125}}\ TimerHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a2d90fd6adb05ddb54ae494a47e311309}{system\_health\_timer}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00127}00127\ \textcolor{comment}{//\ Koordinovan칳\ time-\/multiplexing\ timer\ (perioda\ 25ms)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00128}\mbox{\hyperlink{freertos__chess_8c_a0042f9cdb2f225fa940e25e47b2610ec}{00128}}\ \textcolor{keyword}{static}\ TimerHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a0042f9cdb2f225fa940e25e47b2610ec}{coordinated\_multiplex\_timer}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00129}00129\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00130}00130\ \textcolor{comment}{//\ PRODUCTION\ STABILITY:}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00131}00131\ \textcolor{comment}{//\ DO\ NOT\ run\ multiplex\ scanning\ inside\ FreeRTOS\ Timer\ Service\ task\ ("{}Tmr\ Svc"{}).}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00132}00132\ \textcolor{comment}{//\ We'll\ run\ the\ coordinated\ scan\ in\ a\ dedicated\ task\ with\ sufficient\ stack.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00133}\mbox{\hyperlink{freertos__chess_8c_a5a10fe5e0bb7faf063f64958f1f7304b}{00133}}\ \textcolor{keyword}{static}\ TaskHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a5a10fe5e0bb7faf063f64958f1f7304b}{coordinated\_multiplex\_task\_handle}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00134}\mbox{\hyperlink{freertos__chess_8c_a53f20ff71110439851d63626a31312a5}{00134}}\ \textcolor{preprocessor}{\#define\ COORDINATED\_MUX\_TASK\_STACK\_SIZE\ (8\ *\ 1024)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00135}00135\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00136}00136\ \textcolor{comment}{//\ System\ state}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00137}\mbox{\hyperlink{freertos__chess_8c_ab2336e816f0a31f0e3e85fba396e4340}{00137}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{freertos__chess_8c_ab2336e816f0a31f0e3e85fba396e4340}{system\_initialized}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00138}\mbox{\hyperlink{freertos__chess_8c_ae37ba709842162d9a8328959d0cb0e05}{00138}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{freertos__chess_8c_ae37ba709842162d9a8328959d0cb0e05}{hardware\_initialized}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00139}\mbox{\hyperlink{freertos__chess_8c_a32091f1b25b0412e3f75b7fb3dff4b90}{00139}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{freertos__chess_8c_a32091f1b25b0412e3f75b7fb3dff4b90}{freertos\_initialized}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00141}00141\ \textcolor{comment}{//\ GPIO\ pin\ arrays}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00142}\mbox{\hyperlink{freertos__chess_8c_ad9e3ceb44aa3ff2deb6b45b6079cc7e8}{00142}}\ \textcolor{keyword}{const}\ gpio\_num\_t\ \mbox{\hyperlink{freertos__chess_8c_ad9e3ceb44aa3ff2deb6b45b6079cc7e8}{matrix\_row\_pins}}[8]\ =\ \{\mbox{\hyperlink{freertos__chess_8h_a412cf595c5d992d528f572367cd382fc}{MATRIX\_ROW\_0}},\ \mbox{\hyperlink{freertos__chess_8h_a26f828d1911fdbed9f5a190d38b869f4}{MATRIX\_ROW\_1}},\ \mbox{\hyperlink{freertos__chess_8h_a6c3c544fb9cfc45bc5c9b321be7cd410}{MATRIX\_ROW\_2}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_aa33e7a34678ad6fe782210f99a7672ad}{MATRIX\_ROW\_3}},\ \mbox{\hyperlink{freertos__chess_8h_a71559152b07023bcb341ac1a2b1a6f42}{MATRIX\_ROW\_4}},\ \mbox{\hyperlink{freertos__chess_8h_a42d9ffa9b417036ce69c56a7b895bebb}{MATRIX\_ROW\_5}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a5f70e9694a3ea89ce6c9c4396843a3b2}{MATRIX\_ROW\_6}},\ \mbox{\hyperlink{freertos__chess_8h_ae9ab626eb119d23769111f56a1bcaa16}{MATRIX\_ROW\_7}}\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00146}\mbox{\hyperlink{freertos__chess_8c_a2d07c58a77430cba050b46dd496ce081}{00146}}\ \textcolor{keyword}{const}\ gpio\_num\_t\ \mbox{\hyperlink{freertos__chess_8c_a2d07c58a77430cba050b46dd496ce081}{matrix\_col\_pins}}[8]\ =\ \{\mbox{\hyperlink{freertos__chess_8h_a3e029f70c5d00d3e249faf7804581b0b}{MATRIX\_COL\_0}},\ \mbox{\hyperlink{freertos__chess_8h_ac18820617d1dcd813d8ac903a5c93a8d}{MATRIX\_COL\_1}},\ \mbox{\hyperlink{freertos__chess_8h_a141d2717e84ae5d86135f4562f67481b}{MATRIX\_COL\_2}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_af876ae3f9c7de7f9528648519939c0ee}{MATRIX\_COL\_3}},\ \mbox{\hyperlink{freertos__chess_8h_ab799338bcbcd21959ba40e084d6b5327}{MATRIX\_COL\_4}},\ \mbox{\hyperlink{freertos__chess_8h_a712d6392405fecb625bb7543219ac7a6}{MATRIX\_COL\_5}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a5c56175a56a0013ce45265301301e937}{MATRIX\_COL\_6}},\ \mbox{\hyperlink{freertos__chess_8h_a2194cd55ef55fe74673eff35a72c2b4b}{MATRIX\_COL\_7}}\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00150}\mbox{\hyperlink{freertos__chess_8c_aa13f5879e99176ffada8295c49c67b6c}{00150}}\ \textcolor{keyword}{const}\ gpio\_num\_t\ \mbox{\hyperlink{freertos__chess_8c_aa13f5879e99176ffada8295c49c67b6c}{promotion\_button\_pins\_a}}[4]\ =\ \{\mbox{\hyperlink{freertos__chess_8h_a123381859161caa7858faf29b48e26e5}{BUTTON\_QUEEN}},\ \mbox{\hyperlink{freertos__chess_8h_a7af87dab7ead0a04fb6403b906db7ae0}{BUTTON\_ROOK}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_ac861d083f88a75aef0cb5a65ba142f97}{BUTTON\_BISHOP}},\ \mbox{\hyperlink{freertos__chess_8h_aa4b9945e8a7178906001d2393d6c069d}{BUTTON\_KNIGHT}}\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00153}00153\ \textcolor{comment}{//\ NEPOUZIVANO:\ Toto\ pole\ se\ nikde\ v\ k칩du\ nepou쮂셨치!}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00154}00154\ \textcolor{comment}{//\ P콢vodn캩\ bylo\ navr쬰no\ pro\ druhou\ sadu\ promotion\ tla캜칤tek,\ ale\ syst칠m}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00155}00155\ \textcolor{comment}{//\ pou쮂셨치\ pouze\ promotion\_button\_pins\_a\ (4\ sd칤len치\ tla캜칤tka\ pro\ oba\ hr치캜e).}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00156}00156\ \textcolor{comment}{//\ const\ gpio\_num\_t\ promotion\_button\_pins\_b[4]\ =\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00157}00157\ \textcolor{comment}{//\ \ \ \ \ BUTTON\_PROMOTION\_QUEEN,\ BUTTON\_PROMOTION\_ROOK,\ BUTTON\_PROMOTION\_BISHOP,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00158}00158\ \textcolor{comment}{//\ \ \ \ \ BUTTON\_PROMOTION\_KNIGHT\};}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00160}00160\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00161}00161\ \textcolor{comment}{//\ GPIO\ VALIDATION\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00162}00162\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00164}00164\ \textcolor{comment}{//\ Enhanced\ GPIO\ validation\ function}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00165}\mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{00165}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(gpio\_num\_t\ pin,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *pin\_name)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00166}00166\ \ \ \textcolor{comment}{//\ Check\ if\ pin\ exists}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00167}00167\ \ \ \textcolor{keywordflow}{if}\ (pin\ <\ 0\ ||\ pin\ >\ 30)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00168}00168\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ GPIO\ pin\ \%d\ for\ \%s\ (ESP32-\/C6\ has\ GPIO\ 0-\/30)"{}},\ pin,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_name);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00170}00170\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00171}00171\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00173}00173\ \ \ \textcolor{comment}{//\ Check\ SPI\ Flash\ reserved\ pins\ (GPIO\ 24-\/26\ are\ reserved,\ but\ 27-\/30\ can\ be}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00174}00174\ \ \ \textcolor{comment}{//\ used\ for\ I/O)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00175}00175\ \ \ \textcolor{keywordflow}{if}\ (pin\ >=\ 24\ \&\&\ pin\ <=\ 26)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00176}00176\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GPIO\ \%d\ (\%s)\ is\ reserved\ for\ SPI\ Flash\ on\ ESP32-\/C6"{}},\ pin,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_name);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00178}00178\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00179}00179\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00181}00181\ \ \ \textcolor{comment}{//\ Warn\ about\ SPI\ Flash\ pins\ that\ can\ be\ used\ for\ I/O}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00182}00182\ \ \ \textcolor{keywordflow}{if}\ (pin\ >=\ 27\ \&\&\ pin\ <=\ 30)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00183}00183\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}GPIO\ \%d\ (\%s)\ is\ SPI\ Flash\ pin\ but\ can\ be\ used\ for\ I/O\ -\/\ use\ with\ "{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}caution"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin,\ pin\_name);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00187}00187\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00189}00189\ \ \ \textcolor{comment}{//\ Warn\ about\ strapping\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00190}00190\ \ \ \textcolor{keywordflow}{if}\ (pin\ ==\ 4\ ||\ pin\ ==\ 5\ ||\ pin\ ==\ 8\ ||\ pin\ ==\ 9\ ||\ pin\ ==\ 15)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00191}00191\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GPIO\ \%d\ (\%s)\ is\ a\ strapping\ pin\ -\/\ use\ with\ caution"{}},\ pin,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00192}00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_name);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00193}00193\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00194}00194\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00195}00195\ \ \ \textcolor{comment}{//\ Warn\ about\ USB-\/JTAG\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00196}00196\ \ \ \textcolor{keywordflow}{if}\ (pin\ ==\ 12\ ||\ pin\ ==\ 13)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00197}00197\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GPIO\ \%d\ (\%s)\ is\ used\ for\ USB-\/JTAG\ debugging"{}},\ pin,\ pin\_name);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00198}00198\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00200}00200\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00201}00201\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00203}00203\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00204}00204\ \textcolor{comment}{//\ HARDWARE\ INITIALIZATION\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00205}00205\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00207}\mbox{\hyperlink{freertos__chess_8c_af8e4ec2ba6554d39c4f7c9574718efdc}{00207}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_af8e4ec2ba6554d39c4f7c9574718efdc}{chess\_gpio\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00208}00208\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ GPIO\ pins..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00210}00210\ \ \ \textcolor{comment}{//\ DEBUG:\ Ov캩콏en칤\ definice\ pin콢}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00211}00211\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ STATUS\_LED\_PIN\ =\ GPIO\%d,\ BUTTON\_RESET\ =\ GPIO\%d"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a089a71f836911c71b3f73fdd3b4b890b}{STATUS\_LED\_PIN}},\ \mbox{\hyperlink{freertos__chess_8h_a0710f0869f3bcc7820964e85f3d59fa4}{BUTTON\_RESET}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00213}00213\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ LED\_DATA\_PIN\ =\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00215}00215\ \ \ \textcolor{comment}{//\ GPIO\ initialization\ -\/\ no\ WDT\ reset\ needed\ during\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00217}00217\ \ \ \textcolor{comment}{//\ Enhanced\ GPIO\ validation\ using\ the\ new\ validation\ function}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00218}00218\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Validating\ GPIO\ pin\ assignments..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00220}00220\ \ \ \textcolor{comment}{//\ Validate\ LED\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00221}00221\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(\mbox{\hyperlink{freertos__chess_8h_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}},\ \textcolor{stringliteral}{"{}LED\_DATA\_PIN"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00222}00222\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00223}00223\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00225}00225\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(\mbox{\hyperlink{freertos__chess_8h_a089a71f836911c71b3f73fdd3b4b890b}{STATUS\_LED\_PIN}},\ \textcolor{stringliteral}{"{}STATUS\_LED\_PIN"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00226}00226\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00227}00227\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00229}00229\ \ \ \textcolor{comment}{//\ Validate\ matrix\ row\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00230}00230\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00231}00231\ \ \ \ \ \textcolor{comment}{//\ GPIO\ validation\ -\/\ no\ WDT\ reset\ needed\ during\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00232}00232\ \ \ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(\mbox{\hyperlink{freertos__chess_8c_ad9e3ceb44aa3ff2deb6b45b6079cc7e8}{matrix\_row\_pins}}[i],\ \textcolor{stringliteral}{"{}MATRIX\_ROW"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00233}00233\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00234}00234\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00235}00235\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00236}00236\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00237}00237\ \ \ \textcolor{comment}{//\ Validate\ matrix\ column\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00238}00238\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00239}00239\ \ \ \ \ \textcolor{comment}{//\ GPIO\ validation\ -\/\ no\ WDT\ reset\ needed\ during\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00240}00240\ \ \ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(\mbox{\hyperlink{freertos__chess_8c_a2d07c58a77430cba050b46dd496ce081}{matrix\_col\_pins}}[i],\ \textcolor{stringliteral}{"{}MATRIX\_COL"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00241}00241\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00242}00242\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00243}00243\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00244}00244\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00245}00245\ \ \ \textcolor{comment}{//\ Validate\ reset\ button\ pin}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00246}00246\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a1ceecb2e00128b59e0224f35608eaf6c}{validate\_gpio\_pin}}(\mbox{\hyperlink{freertos__chess_8h_a0710f0869f3bcc7820964e85f3d59fa4}{BUTTON\_RESET}},\ \textcolor{stringliteral}{"{}BUTTON\_RESET"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00247}00247\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00248}00248\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00249}00249\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00250}00250\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 GPIO\ safety\ checks\ passed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00251}00251\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00252}00252\ \ \ \textcolor{comment}{//\ GPIO\ configuration\ -\/\ no\ WDT\ reset\ needed\ during\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00253}00253\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00254}00254\ \ \ \textcolor{comment}{//\ Configure\ matrix\ row\ pins\ as\ outputs}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00255}00255\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00256}00256\ \ \ \ \ \textcolor{comment}{//\ GPIO\ config\ -\/\ no\ WDT\ reset\ needed\ during\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00257}00257\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00258}00258\ \ \ \ \ \textcolor{comment}{//\ Bitov치\ maska\ s\ explicitn칤m\ p콏etypov치n칤m}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00259}00259\ \ \ \ \ uint32\_t\ pin\_number\ =\ (uint32\_t)\mbox{\hyperlink{freertos__chess_8c_ad9e3ceb44aa3ff2deb6b45b6079cc7e8}{matrix\_row\_pins}}[i];}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00260}00260\ \ \ \ \ uint64\_t\ pin\_mask\ =\ (1ULL\ <<\ pin\_number);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00261}00261\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00262}00262\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Configuring\ MATRIX\_ROW\_\%d\ (GPIO\%d,\ mask=0x\%llx)..."{}},\ i,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_number,\ pin\_mask);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00264}00264\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00265}00265\ \ \ \ \ gpio\_config\_t\ io\_conf\ =\ \{.pin\_bit\_mask\ =\ pin\_mask,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .mode\ =\ GPIO\_MODE\_OUTPUT,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_up\_en\ =\ GPIO\_PULLUP\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_down\_en\ =\ GPIO\_PULLDOWN\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00269}00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .intr\_type\ =\ GPIO\_INTR\_DISABLE\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00270}00270\ \ \ \ \ ret\ =\ gpio\_config(\&io\_conf);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00271}00271\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}gpio\_config\ returned\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00272}00272\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00273}00273\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00274}00274\ \ \ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ configure\ matrix\ row\ pin\ \%d\ (GPIO\%d):\ \%s"{}},\ i,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_number,\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00276}00276\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;\ \textcolor{comment}{//\ Return\ error\ instead\ of\ continuing}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00277}00277\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00278}00278\ \ \ \ \ \ \ gpio\_set\_level(\mbox{\hyperlink{freertos__chess_8c_ad9e3ceb44aa3ff2deb6b45b6079cc7e8}{matrix\_row\_pins}}[i],}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00279}00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1);\ \textcolor{comment}{//\ Set\ all\ rows\ HIGH\ initially\ (inactive\ state)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00280}00280\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}gpio\_set\_level\ done\ for\ GPIO\%d"{}},\ pin\_number);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00281}00281\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00282}00282\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00283}00283\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00284}00284\ \ \ \textcolor{comment}{//\ Configure\ matrix\ column\ pins\ as\ inputs\ with\ pull-\/up}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00285}00285\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ Starting\ matrix\ column\ configuration\ loop"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00286}00286\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00287}00287\ \ \ \ \ \textcolor{comment}{//\ WDT\ reset\ odstran캩n\ b캩hem\ inicializace}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00289}00289\ \ \ \ \ \textcolor{comment}{//\ Bitov치\ maska\ s\ explicitn칤m\ p콏etypov치n칤m}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00290}00290\ \ \ \ \ uint32\_t\ pin\_number\ =\ (uint32\_t)\mbox{\hyperlink{freertos__chess_8c_a2d07c58a77430cba050b46dd496ce081}{matrix\_col\_pins}}[i];}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00291}00291\ \ \ \ \ uint64\_t\ pin\_mask\ =\ (1ULL\ <<\ pin\_number);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00292}00292\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00293}00293\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Configuring\ MATRIX\_COL\_\%d\ (GPIO\%d,\ mask=0x\%llx)..."{}},\ i,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00294}00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_number,\ pin\_mask);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00295}00295\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00296}00296\ \ \ \ \ \textcolor{comment}{//\ DEBUG:\ Special\ logging\ for\ GPIO17\ (column\ 7)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00297}00297\ \ \ \ \ \textcolor{keywordflow}{if}\ (pin\_number\ ==\ 17)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00298}00298\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댌\ DEBUG:\ Configuring\ GPIO17\ (MATRIX\_COL\_7,\ index=\%d)"{}},\ i);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00299}00299\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00300}00300\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00301}00301\ \ \ \ \ \textcolor{comment}{//\ CRITICAL:\ Skip\ strapping\ pins\ to\ avoid\ system\ reset}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00302}00302\ \ \ \ \ \textcolor{keywordflow}{if}\ (pin\_number\ ==\ 9)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00303}00303\ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Skipping\ GPIO\%d\ (strapping\ pin)\ to\ avoid\ system\ reset"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00304}00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_number);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00305}00305\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ column\ pin\ \%d\ skipped\ (strapping\ pin)"{}},\ i);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00306}00306\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ About\ to\ continue\ to\ next\ iteration"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00307}00307\ \ \ \ \ \ \ \textcolor{keywordflow}{continue};\ \textcolor{comment}{//\ P콏esko캜en칤\ strapping\ pinu}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00308}00308\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00310}00310\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ Proceeding\ with\ GPIO\%d\ configuration"{}},\ pin\_number);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00312}00312\ \ \ \ \ \textcolor{comment}{//\ Explicitly\ reset\ GPIO17\ before\ configuration}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00313}00313\ \ \ \ \ \textcolor{comment}{//\ GPIO17\ is\ UART0\ RX\ pin\ on\ ESP32-\/C6\ and\ may\ have\ special\ properties}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00314}00314\ \ \ \ \ \textcolor{comment}{//\ that\ need\ to\ be\ cleared\ before\ using\ it\ as\ GPIO\ input}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00315}00315\ \ \ \ \ \textcolor{keywordflow}{if}\ (pin\_number\ ==\ 17)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00316}00316\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댌\ DEBUG:\ Resetting\ GPIO17\ before\ configuration\ (UART0\ RX\ pin)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00317}00317\ \ \ \ \ \ \ gpio\_reset\_pin(GPIO\_NUM\_17);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00318}00318\ \ \ \ \ \ \ \textcolor{comment}{//\ Small\ delay\ to\ ensure\ reset\ is\ complete}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00319}00319\ \ \ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(10));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00320}00320\ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00321}00321\ \ \ \ \ \ \ \textcolor{comment}{//\ CRITICAL:\ Explicitly\ switch\ GPIO17\ from\ UART\ function\ to\ GPIO\ function}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00322}00322\ \ \ \ \ \ \ \textcolor{comment}{//\ GPIO17\ is\ UART0\ RX\ pin\ on\ ESP32-\/C6\ and\ may\ be\ stuck\ in\ UART\ mode}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00323}00323\ \ \ \ \ \ \ \textcolor{comment}{//\ even\ if\ UART\ driver\ is\ not\ active.\ We\ need\ to\ force\ it\ to\ GPIO\ mode.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00324}00324\ \ \ \ \ \ \ \textcolor{comment}{//\ Strategy:\ Call\ gpio\_set\_direction()\ BEFORE\ gpio\_config()\ to\ ensure}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00325}00325\ \ \ \ \ \ \ \textcolor{comment}{//\ IOMUX\ is\ switched\ to\ GPIO\ function\ before\ configuration}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00326}00326\ \ \ \ \ \ \ gpio\_set\_direction(GPIO\_NUM\_17,\ GPIO\_MODE\_INPUT);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00327}00327\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댢\ DEBUG:\ GPIO17\ direction\ set\ to\ INPUT\ (forcing\ IOMUX\ switch\ from\ UART\ to\ GPIO)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00328}00328\ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00329}00329\ \ \ \ \ \ \ \textcolor{comment}{//\ Small\ delay\ to\ ensure\ IOMUX\ switch\ is\ complete}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00330}00330\ \ \ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(5));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00331}00331\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00332}00332\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00333}00333\ \ \ \ \ \textcolor{comment}{//\ WDT\ reset\ odstran캩n\ b캩hem\ inicializace}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00334}00334\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00335}00335\ \ \ \ \ \textcolor{comment}{//\ Configure\ all\ matrix\ column\ pins\ as\ INPUT\ with\ pull-\/up\ (standard\ configuration)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00336}00336\ \ \ \ \ gpio\_config\_t\ io\_conf\ =\ \{.pin\_bit\_mask\ =\ pin\_mask,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .mode\ =\ GPIO\_MODE\_INPUT,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_up\_en\ =\ GPIO\_PULLUP\_ENABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_down\_en\ =\ GPIO\_PULLDOWN\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .intr\_type\ =\ GPIO\_INTR\_DISABLE\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00341}00341\ \ \ \ \ ret\ =\ gpio\_config(\&io\_conf);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00342}00342\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}gpio\_config\ returned\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00343}00343\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00344}00344\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00345}00345\ \ \ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ configure\ matrix\ column\ pin\ \%d\ (GPIO\%d):\ \%s"{}},\ i,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pin\_number,\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00347}00347\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;\ \textcolor{comment}{//\ Return\ error\ instead\ of\ continuing}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00348}00348\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00349}00349\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ column\ pin\ \%d\ configured\ successfully"{}},\ i);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00350}00350\ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00351}00351\ \ \ \ \ \ \ \textcolor{comment}{//\ Verify\ GPIO17\ configuration\ (UART0\ RX\ pin\ -\/\ needs\ explicit\ GPIO\ mode)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00352}00352\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pin\_number\ ==\ 17)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00353}00353\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Explicitly\ set\ GPIO17\ to\ GPIO\ INPUT\ mode\ (not\ UART\ mode)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00354}00354\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ GPIO17\ is\ UART0\ RX\ pin\ on\ ESP32-\/C6\ and\ may\ default\ to\ UART\ mode}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00355}00355\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ even\ if\ UART\ is\ not\ active.\ Force\ it\ to\ GPIO\ INPUT\ mode.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00356}00356\ \ \ \ \ \ \ \ \ gpio\_set\_direction(GPIO\_NUM\_17,\ GPIO\_MODE\_INPUT);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00357}00357\ \ \ \ \ \ \ \ \ gpio\_set\_pull\_mode(GPIO\_NUM\_17,\ GPIO\_PULLUP\_ONLY);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00358}00358\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00359}00359\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Verify\ configuration}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00360}00360\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ test\_level\ =\ gpio\_get\_level(GPIO\_NUM\_17);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00361}00361\ \ \ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댢\ GPIO17:\ Configured\ as\ INPUT\ with\ pull-\/up,\ initial\ level=\%d"{}},\ test\_level);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00362}00362\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00363}00363\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00364}00364\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00365}00365\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ Matrix\ column\ configuration\ loop\ completed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00366}00366\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00367}00367\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ Matrix\ column\ configuration\ loop\ completed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00368}00368\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00369}00369\ \ \ \textcolor{comment}{//\ Configure\ status\ LED\ pin}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00370}00370\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization\ \ //\ Reset\ p콏ed\ status\ LED\ config}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00371}00371\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}DEBUG:\ About\ to\ configure\ STATUS\_LED"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00372}00372\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00373}00373\ \ \ \textcolor{comment}{//\ Spr치vn치\ bitov치\ maska\ s\ explicitn칤m\ castem}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00374}00374\ \ \ uint32\_t\ status\_led\_pin\ =\ (uint32\_t)\mbox{\hyperlink{freertos__chess_8h_a089a71f836911c71b3f73fdd3b4b890b}{STATUS\_LED\_PIN}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00375}00375\ \ \ uint64\_t\ status\_led\_mask\ =\ (1ULL\ <<\ status\_led\_pin);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00376}00376\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00377}00377\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Configuring\ STATUS\_LED\ (GPIO\%d,\ mask=0x\%llx)..."{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ status\_led\_pin,\ status\_led\_mask);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00379}00379\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00380}00380\ \ \ \textcolor{comment}{//\ Reset\ p콏ed\ gpio\_config()}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00381}00381\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00382}00382\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00383}00383\ \ \ gpio\_config\_t\ status\_led\_conf\ =\ \{.pin\_bit\_mask\ =\ status\_led\_mask,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .mode\ =\ GPIO\_MODE\_OUTPUT,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_up\_en\ =\ GPIO\_PULLUP\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_down\_en\ =\ GPIO\_PULLDOWN\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00387}00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .intr\_type\ =\ GPIO\_INTR\_DISABLE\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00388}00388\ \ \ ret\ =\ gpio\_config(\&status\_led\_conf);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00389}00389\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}gpio\_config\ returned\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00391}00391\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00392}00392\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ configure\ status\ LED\ pin\ (GPIO\%d):\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ status\_led\_pin,\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00394}00394\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;\ \textcolor{comment}{//\ Return\ error\ instead\ of\ continuing}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00395}00395\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00396}00396\ \ \ \ \ gpio\_set\_level(\mbox{\hyperlink{freertos__chess_8h_a089a71f836911c71b3f73fdd3b4b890b}{STATUS\_LED\_PIN}},\ 0);\ \textcolor{comment}{//\ LED\ off\ initially}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00397}00397\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Status\ LED\ configured\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00398}00398\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00400}00400\ \ \ \textcolor{comment}{//\ Configure\ reset\ button\ pin}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00401}00401\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization\ \ //\ Reset\ p콏ed\ reset\ button\ config}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00403}00403\ \ \ \textcolor{comment}{//\ Spr치vn치\ bitov치\ maska\ s\ explicitn칤m\ castem}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00404}00404\ \ \ uint32\_t\ reset\_button\_pin\ =\ (uint32\_t)\mbox{\hyperlink{freertos__chess_8h_a0710f0869f3bcc7820964e85f3d59fa4}{BUTTON\_RESET}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00405}00405\ \ \ uint64\_t\ reset\_button\_mask\ =\ (1ULL\ <<\ reset\_button\_pin);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00406}00406\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00407}00407\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Configuring\ RESET\_BUTTON\ (GPIO\%d,\ mask=0x\%llx)..."{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00408}00408\ \ \ \ \ \ \ \ \ \ \ \ reset\_button\_pin,\ reset\_button\_mask);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00409}00409\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00410}00410\ \ \ \textcolor{comment}{//\ Reset\ p콏ed\ gpio\_config()}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00411}00411\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00413}00413\ \ \ gpio\_config\_t\ reset\_button\_conf\ =\ \{.pin\_bit\_mask\ =\ reset\_button\_mask,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .mode\ =\ GPIO\_MODE\_INPUT,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_up\_en\ =\ GPIO\_PULLUP\_ENABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .pull\_down\_en\ =\ GPIO\_PULLDOWN\_DISABLE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00417}00417\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .intr\_type\ =\ GPIO\_INTR\_DISABLE\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00418}00418\ \ \ ret\ =\ gpio\_config(\&reset\_button\_conf);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00419}00419\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}gpio\_config\ returned\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00420}00420\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00421}00421\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00422}00422\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ configure\ reset\ button\ pin\ (GPIO\%d):\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ reset\_button\_pin,\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00424}00424\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;\ \textcolor{comment}{//\ Return\ error\ instead\ of\ continuing}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00425}00425\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00426}00426\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Reset\ button\ configured\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00427}00427\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00428}00428\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00429}00429\ \ \ \textcolor{comment}{//\ P콎IDAT:\ Fin치ln칤\ reset}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00430}00430\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00432}00432\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 GPIO\ pins\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00433}00433\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00434}00434\ \ \ \textcolor{comment}{//\ Dokon캜en칤\ GPIO\ konfigurace}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00435}00435\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00436}00436\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00437}00437\ \ \ \textcolor{comment}{//\ Fallback:\ If\ any\ GPIO\ configuration\ failed,\ log\ warning\ but\ continue}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00438}00438\ \ \ \textcolor{comment}{//\ ESP\_LOGW(TAG,\ "{}\ Some\ GPIO\ pins\ may\ not\ be\ configured\ correctly\ -\/\ running}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00439}00439\ \ \ \textcolor{comment}{//\ in\ simulation\ mode"{});\ ESP\_LOGW(TAG,\ "{}\ Hardware\ functionality\ will\ be}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00440}00440\ \ \ \textcolor{comment}{//\ limited\ -\/\ check\ GPIO\ pin\ assignments"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00441}00441\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00442}00442\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00443}00443\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00444}00444\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00445}\mbox{\hyperlink{freertos__chess_8c_ad817d527142431531e86a3f54d66fefd}{00445}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ad817d527142431531e86a3f54d66fefd}{chess\_led\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00446}00446\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댢\ Initializing\ WS2812B\ LED\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00447}00447\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00448}00448\ \ \ \textcolor{comment}{//\ Reset\ watchdog\ timeru\ p콏ed\ inicializac칤\ LED}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00449}00449\ \ \ esp\_err\_t\ wdt\_ret\ =\ esp\_task\_wdt\_reset();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00450}00450\ \ \ \textcolor{keywordflow}{if}\ (wdt\_ret\ !=\ ESP\_OK\ \&\&\ wdt\_ret\ !=\ ESP\_ERR\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00451}00451\ \ \ \ \ \textcolor{comment}{//\ Task\ not\ registered\ with\ TWDT\ yet\ -\/\ this\ is\ normal\ during\ startup}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00452}00452\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00453}00453\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00454}00454\ \ \ \textcolor{comment}{//\ Inicializace\ WS2812B\ hardwaru}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00455}00455\ \ \ \textcolor{comment}{//\ This\ function\ will\ be\ called\ by\ led\_task.c\ during\ hardware\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00456}00456\ \ \ \textcolor{comment}{//\ We\ just\ ensure\ the\ system\ is\ ready\ for\ LED\ operations}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00457}00457\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00458}00458\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ LED\ system\ initialization\ prepared"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00459}00459\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ WS2812B\ data\ pin:\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00460}00460\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Total\ LEDs:\ \%d\ (64\ board\ +\ 9\ buttons)"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00461}00461\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chess__types_8h_afb4b5c24ea71da31d1fe1536f5c18728}{CHESS\_LED\_COUNT\_TOTAL}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00462}00462\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Hardware\ initialization\ will\ be\ done\ by\ led\_task.c"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00463}00463\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00464}00464\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00465}00465\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00466}00466\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00467}\mbox{\hyperlink{freertos__chess_8c_aa7e19c2234c5d2c6b224dbf5d73cd7a9}{00467}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_aa7e19c2234c5d2c6b224dbf5d73cd7a9}{chess\_matrix\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00468}00468\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ matrix\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00469}00469\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00470}00470\ \ \ \textcolor{comment}{//\ WDT\ reset\ pro\ matrix\ inicializaci}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00471}00471\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00472}00472\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00473}00473\ \ \ \textcolor{comment}{//\ Matrix\ is\ already\ configured\ in\ GPIO\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00474}00474\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ we'll\ simulate\ reed\ switch\ detection}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00475}00475\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 Matrix\ system\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00476}00476\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ 8x8\ reed\ switch\ matrix"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00477}00477\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Row\ pins:\ GPIO\%d,\%d,\%d,\%d,\%d,\%d,\%d,\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a412cf595c5d992d528f572367cd382fc}{MATRIX\_ROW\_0}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00478}00478\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a26f828d1911fdbed9f5a190d38b869f4}{MATRIX\_ROW\_1}},\ \mbox{\hyperlink{freertos__chess_8h_a6c3c544fb9cfc45bc5c9b321be7cd410}{MATRIX\_ROW\_2}},\ \mbox{\hyperlink{freertos__chess_8h_aa33e7a34678ad6fe782210f99a7672ad}{MATRIX\_ROW\_3}},\ \mbox{\hyperlink{freertos__chess_8h_a71559152b07023bcb341ac1a2b1a6f42}{MATRIX\_ROW\_4}},\ \mbox{\hyperlink{freertos__chess_8h_a42d9ffa9b417036ce69c56a7b895bebb}{MATRIX\_ROW\_5}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00479}00479\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a5f70e9694a3ea89ce6c9c4396843a3b2}{MATRIX\_ROW\_6}},\ \mbox{\hyperlink{freertos__chess_8h_ae9ab626eb119d23769111f56a1bcaa16}{MATRIX\_ROW\_7}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00480}00480\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Column\ pins:\ GPIO\%d,\%d,\%d,\%d,\%d,\%d,\%d,\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a3e029f70c5d00d3e249faf7804581b0b}{MATRIX\_COL\_0}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00481}00481\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_ac18820617d1dcd813d8ac903a5c93a8d}{MATRIX\_COL\_1}},\ \mbox{\hyperlink{freertos__chess_8h_a141d2717e84ae5d86135f4562f67481b}{MATRIX\_COL\_2}},\ \mbox{\hyperlink{freertos__chess_8h_af876ae3f9c7de7f9528648519939c0ee}{MATRIX\_COL\_3}},\ \mbox{\hyperlink{freertos__chess_8h_ab799338bcbcd21959ba40e084d6b5327}{MATRIX\_COL\_4}},\ \mbox{\hyperlink{freertos__chess_8h_a712d6392405fecb625bb7543219ac7a6}{MATRIX\_COL\_5}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00482}00482\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a5c56175a56a0013ce45265301301e937}{MATRIX\_COL\_6}},\ \mbox{\hyperlink{freertos__chess_8h_a2194cd55ef55fe74673eff35a72c2b4b}{MATRIX\_COL\_7}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00483}00483\ \ \ \textcolor{comment}{//\ ESP\_LOGI(}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00484}00484\ \ \ \textcolor{comment}{//\ \ \ \ \ TAG,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00485}00485\ \ \ \textcolor{comment}{//\ \ \ \ \ "{}\ \ -\/\ Simulation\ mode:\ matrix\ events\ will\ be\ generated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00486}00486\ \ \ \textcolor{comment}{//\ \ \ \ \ programmatically"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00487}00487\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00488}00488\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00489}00489\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00490}00490\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00491}\mbox{\hyperlink{freertos__chess_8c_ab7324679dbbef995936d7af7aff3f086}{00491}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ab7324679dbbef995936d7af7aff3f086}{chess\_button\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00492}00492\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ button\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00494}00494\ \ \ \textcolor{comment}{//\ WDT\ reset\ pro\ button\ inicializaci}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00495}00495\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00496}00496\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00497}00497\ \ \ \textcolor{comment}{//\ Buttons\ are\ already\ configured\ in\ GPIO\ init}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00498}00498\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ we'll\ simulate\ button\ presses}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00499}00499\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 Button\ system\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00500}00500\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ 9\ buttons\ total"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00501}00501\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Promotion\ buttons\ A:\ Queen,\ Rook,\ Bishop,\ Knight"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00502}00502\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Promotion\ buttons\ B:\ Queen,\ Rook,\ Bishop,\ Knight"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00503}00503\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Reset\ button:\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a0710f0869f3bcc7820964e85f3d59fa4}{BUTTON\_RESET}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00504}00504\ \ \ \textcolor{comment}{//\ ESP\_LOGI(}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00505}00505\ \ \ \textcolor{comment}{//\ \ \ \ \ TAG,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00506}00506\ \ \ \textcolor{comment}{//\ \ \ \ \ "{}\ \ -\/\ Simulation\ mode:\ button\ events\ will\ be\ generated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00507}00507\ \ \ \textcolor{comment}{//\ \ \ \ \ programmatically"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00509}00509\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00510}00510\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00511}00511\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00512}\mbox{\hyperlink{freertos__chess_8c_a41db379171eabe6fccb60019e0e60549}{00512}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a41db379171eabe6fccb60019e0e60549}{chess\_hardware\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00513}00513\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}===\ Hardware\ Initialization\ ==="{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00514}00514\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00515}00515\ \ \ esp\_err\_t\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00516}00516\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00517}00517\ \ \ \textcolor{comment}{//\ Initialize\ GPIO}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00518}00518\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ GPIO..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00519}00519\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00520}00520\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_af8e4ec2ba6554d39c4f7c9574718efdc}{chess\_gpio\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00521}00521\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00522}00522\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GPIO\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00523}00523\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00524}00524\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00525}00525\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ GPIO\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00526}00526\ \ \ vTaskDelay(pdMS\_TO\_TICKS(1));\ \textcolor{comment}{//\ Allow\ other\ tasks\ to\ run}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00527}00527\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00528}00528\ \ \ \textcolor{comment}{//\ Initialize\ LED\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00529}00529\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ LED\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00530}00530\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00531}00531\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_ad817d527142431531e86a3f54d66fefd}{chess\_led\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00532}00532\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00533}00533\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}LED\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00534}00534\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00535}00535\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00536}00536\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ LED\ system\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00537}00537\ \ \ vTaskDelay(pdMS\_TO\_TICKS(1));\ \textcolor{comment}{//\ Allow\ other\ tasks\ to\ run}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00538}00538\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00539}00539\ \ \ \textcolor{comment}{//\ Initialize\ matrix\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00540}00540\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ matrix\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00541}00541\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00542}00542\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_aa7e19c2234c5d2c6b224dbf5d73cd7a9}{chess\_matrix\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00543}00543\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00544}00544\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00545}00545\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00546}00546\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00547}00547\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Matrix\ system\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00548}00548\ \ \ vTaskDelay(pdMS\_TO\_TICKS(1));\ \textcolor{comment}{//\ Allow\ other\ tasks\ to\ run}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00549}00549\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00550}00550\ \ \ \textcolor{comment}{//\ Initialize\ button\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00551}00551\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ button\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00552}00552\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00553}00553\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_ab7324679dbbef995936d7af7aff3f086}{chess\_button\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00554}00554\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00555}00555\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Button\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00556}00556\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00557}00557\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00558}00558\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Button\ system\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00559}00559\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00560}00560\ \ \ \mbox{\hyperlink{freertos__chess_8c_ae37ba709842162d9a8328959d0cb0e05}{hardware\_initialized}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00561}00561\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 All\ hardware\ systems\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00562}00562\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00563}00563\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00564}00564\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00565}00565\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00566}00566\ \textcolor{comment}{//\ FREERTOS\ INITIALIZATION\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00567}00567\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00568}00568\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00569}\mbox{\hyperlink{freertos__chess_8c_a918837616a81eb433243f2c1e109f73a}{00569}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a918837616a81eb433243f2c1e109f73a}{chess\_create\_queues}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00570}00570\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}===\ CREATING\ FREERTOS\ QUEUES\ ==="{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00571}00571\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Free\ heap\ before\ queues:\ \%zu\ bytes"{}},\ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00572}00572\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Min\ free\ heap:\ \%zu\ bytes"{}},\ esp\_get\_minimum\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00573}00573\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00574}00574\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00575}00575\ \ \ \textcolor{comment}{//\ WDT\ reset\ pro\ vytv치콏en칤\ front}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00576}00576\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00577}00577\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00578}00578\ \ \ \textcolor{comment}{//\ CRITICAL:\ Check\ heap\ availability\ before\ creating\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00579}00579\ \ \ \textcolor{keywordtype}{size\_t}\ free\_heap\ =\ esp\_get\_free\_heap\_size();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00580}00580\ \ \ \textcolor{keywordflow}{if}\ (free\_heap\ <\ 50000)\ \{\ \textcolor{comment}{//\ Minimum\ 50KB\ free\ heap\ required}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00581}00581\ \ \ \ \ ESP\_LOGE(}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00582}00582\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00583}00583\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Insufficient\ free\ heap\ for\ queue\ creation:\ \%zu\ bytes\ (minimum\ 50000)"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00584}00584\ \ \ \ \ \ \ \ \ free\_heap);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00585}00585\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00586}00586\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00587}00587\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00588}00588\ \ \ \textcolor{comment}{//\ LED\ queues\ -\/\ REMOVED:\ Using\ direct\ LED\ calls\ instead}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00589}00589\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ LED\ queues\ removed\ -\/\ using\ direct\ LED\ calls"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00590}00590\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ LED\ system\ simplified.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00591}00591\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00592}00592\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00593}00593\ \ \ \textcolor{comment}{//\ Matrix\ event\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00594}00594\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Matrix\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00595}00595\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Matrix\ Event\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00596}00596\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmatrix__event__t}{matrix\_event\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00597}00597\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{matrix\_event\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00598}00598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmatrix__event__t}{matrix\_event\_t}}),\ \textcolor{stringliteral}{"{}Matrix\ Event\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00599}00599\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Matrix\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00600}00600\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00601}00601\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_abc01112e6afa1b3e029218e52b7c2196}{matrix\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00602}00602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Matrix\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00603}00603\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Matrix\ Response\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00604}00604\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structgame__response__t}{game\_response\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00605}00605\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a9b3fea6e381f159f9e088382e4040d27}{matrix\_response\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a579e6003d89168493306bca5848f301a}{MATRIX\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00606}00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structgame__response__t}{game\_response\_t}}),\ \textcolor{stringliteral}{"{}Matrix\ Response\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00607}00607\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Matrix\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00608}00608\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00609}00609\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00610}00610\ \ \ \textcolor{comment}{//\ Button\ event\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00611}00611\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Button\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00612}00612\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Button\ Event\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00613}00613\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a6ca45550c06013af8c3cec978a7271ab}{BUTTON\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structbutton__event__t}{button\_event\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00614}00614\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{button\_event\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a6ca45550c06013af8c3cec978a7271ab}{BUTTON\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00615}00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structbutton__event__t}{button\_event\_t}}),\ \textcolor{stringliteral}{"{}Button\ Event\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00616}00616\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Button\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00617}00617\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a6ca45550c06013af8c3cec978a7271ab}{BUTTON\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00618}00618\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a5f1958b9037083cf953f250fe1f364a5}{button\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a6ca45550c06013af8c3cec978a7271ab}{BUTTON\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00619}00619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Button\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00620}00620\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Button\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00621}00621\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00622}00622\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00623}00623\ \ \ \textcolor{comment}{//\ UART\ communication\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00624}00624\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ UART\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00625}00625\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ UART\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},\ \mbox{\hyperlink{freertos__chess_8h_a1e15a8ac2f944de5c675aa81c1c653c4}{UART\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00626}00626\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}[64]));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00627}00627\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a7e436e9dcca9a044bb9264755b4caa9e}{uart\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a1e15a8ac2f944de5c675aa81c1c653c4}{UART\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}[64]),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00628}00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UART\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00629}00629\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ UART\ Response\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00630}00630\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_a1e15a8ac2f944de5c675aa81c1c653c4}{UART\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structgame__response__t}{game\_response\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00631}00631\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a02a776b41d5e50969e5cf68dcbbc2c69}{uart\_response\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a1e15a8ac2f944de5c675aa81c1c653c4}{UART\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00632}00632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structgame__response__t}{game\_response\_t}}),\ \textcolor{stringliteral}{"{}UART\ Response\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00633}00633\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00634}00634\ \ \ \textcolor{comment}{//\ CRITICAL:\ Create\ UART\ output\ queue\ for\ centralized\ output}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00635}00635\ \ \ \textcolor{keyword}{extern}\ QueueHandle\_t\ \mbox{\hyperlink{uart__task_8h_a6e06eb5d048532e903f597094c601c4c}{uart\_output\_queue}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00636}00636\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ UART\ Output\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},\ 20,\ 128);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00637}00637\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00638}00638\ \ \ \ \ \ \ \mbox{\hyperlink{uart__task_8h_a6e06eb5d048532e903f597094c601c4c}{uart\_output\_queue}},\ 20,\ 128,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00639}00639\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}UART\ Output\ Queue"{}});\ \textcolor{comment}{//\ Reduced\ item\ size\ from\ 512\ to\ 128\ to\ save\ \string~7.5KB}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00640}00640\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00641}00641\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ UART\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00642}00642\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00643}00643\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00644}00644\ \ \ \textcolor{comment}{//\ Game\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00645}00645\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Game\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00646}00646\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Game\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},\ \mbox{\hyperlink{freertos__chess_8h_a28eeb53d2d0b05fd6f19dd85f101b40e}{GAME\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00647}00647\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00648}00648\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a28eeb53d2d0b05fd6f19dd85f101b40e}{GAME\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00649}00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}),\ \textcolor{stringliteral}{"{}Game\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00650}00650\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Game\ Status\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},\ \mbox{\hyperlink{freertos__chess_8h_a28eeb53d2d0b05fd6f19dd85f101b40e}{GAME\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00651}00651\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00652}00652\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a6dfc9956f36db9a85a34268c6e14b059}{game\_status\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a28eeb53d2d0b05fd6f19dd85f101b40e}{GAME\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00653}00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Game\ Status\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00654}00654\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Game\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00655}00655\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00656}00656\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00657}00657\ \ \ \textcolor{comment}{//\ Animation\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00658}00658\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Animation\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00659}00659\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Animation\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00660}00660\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_affde4e66cef922d3fa060b3013d10c3a}{ANIMATION\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structled__command__t}{led\_command\_t}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00661}00661\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a6fa8af7d1c0b048b9f2c363a9fb2b288}{animation\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_affde4e66cef922d3fa060b3013d10c3a}{ANIMATION\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00662}00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structled__command__t}{led\_command\_t}}),\ \textcolor{stringliteral}{"{}Animation\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00663}00663\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Animation\ Status\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00664}00664\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_affde4e66cef922d3fa060b3013d10c3a}{ANIMATION\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(esp\_err\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00665}00665\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_ad2c6aca6dc859def2315ed1c26f11aad}{animation\_status\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_affde4e66cef922d3fa060b3013d10c3a}{ANIMATION\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00666}00666\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(esp\_err\_t),\ \textcolor{stringliteral}{"{}Animation\ Status\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00667}00667\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Animation\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00668}00668\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00669}00669\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00670}00670\ \ \ \textcolor{comment}{//\ Screen\ saver\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00671}00671\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Screen\ Saver\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00672}00672\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Screen\ Saver\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00673}00673\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_afd353feba5d0f1707fb7a70438c4dc1f}{SCREEN\_SAVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00674}00674\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_ad6e2650c9733357ca904426081ccee72}{screen\_saver\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_afd353feba5d0f1707fb7a70438c4dc1f}{SCREEN\_SAVER\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00675}00675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(uint8\_t),\ \textcolor{stringliteral}{"{}Screen\ Saver\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00676}00676\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Screen\ Saver\ Status\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00677}00677\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_afd353feba5d0f1707fb7a70438c4dc1f}{SCREEN\_SAVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(esp\_err\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00678}00678\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a494d670fc3ed5c9bf7fc74a908a92712}{screen\_saver\_status\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_afd353feba5d0f1707fb7a70438c4dc1f}{SCREEN\_SAVER\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00679}00679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(esp\_err\_t),\ \textcolor{stringliteral}{"{}Screen\ Saver\ Status\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00680}00680\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Screen\ Saver\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00681}00681\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00682}00682\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00683}00683\ \ \ \textcolor{comment}{//\ DISABLED:\ Matter\ control\ queues\ -\/\ Matter\ not\ needed}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00684}00684\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00685}00685\ \textcolor{comment}{\ \ ESP\_LOGI(TAG,\ "{}游댃\ Creating\ Matter\ queues..."{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00686}00686\ \textcolor{comment}{\ \ ESP\_LOGI(TAG,\ "{}\ \ -\/\ Matter\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{},}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00687}00687\ \textcolor{comment}{\ \ MATTER\_QUEUE\_SIZE,\ sizeof(uint8\_t));\ SAFE\_CREATE\_QUEUE(matter\_command\_queue,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00688}00688\ \textcolor{comment}{\ \ MATTER\_QUEUE\_SIZE,\ sizeof(uint8\_t),\ "{}Matter\ Command\ Queue"{});\ ESP\_LOGI(TAG,\ "{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00689}00689\ \textcolor{comment}{\ \ -\/\ Matter\ Status\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{},\ MATTER\_QUEUE\_SIZE,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00690}00690\ \textcolor{comment}{\ \ sizeof(esp\_err\_t));\ SAFE\_CREATE\_QUEUE(matter\_status\_queue,\ MATTER\_QUEUE\_SIZE,}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00691}00691\ \textcolor{comment}{\ \ sizeof(esp\_err\_t),\ "{}Matter\ Status\ Queue"{});\ ESP\_LOGI(TAG,\ "{}九\ Matter\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00692}00692\ \textcolor{comment}{\ \ created.\ Free\ heap:\ \%zu\ bytes"{},\ esp\_get\_free\_heap\_size());}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00693}00693\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00694}00694\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00695}00695\ \ \ \textcolor{comment}{//\ Web\ server\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00696}00696\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Web\ Server\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00697}00697\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Web\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00698}00698\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00699}00699\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a642abc1652d446215a18d55b0517edba}{web\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00700}00700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Web\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00701}00701\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Web\ Server\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00702}00702\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00703}00703\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00704}00704\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(uint8\_t),\ \textcolor{stringliteral}{"{}Web\ Server\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00705}00705\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Web\ Server\ Status\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00706}00706\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(esp\_err\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00707}00707\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_ac550726b2b0adb0539e9dc4f8a1be108}{WEB\_SERVER\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00708}00708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(esp\_err\_t),\ \textcolor{stringliteral}{"{}Web\ Server\ Status\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00709}00709\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Web\ Server\ queues\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00710}00710\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00711}00711\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00712}00712\ \ \ \textcolor{comment}{//\ Test\ control\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00713}00713\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ Test\ queue..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00714}00714\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ -\/\ Test\ Command\ Queue:\ \%d\ items\ 칑\ \%zu\ bytes"{}},\ \mbox{\hyperlink{freertos__chess_8h_a60c0e1e27fef536d95040e98b856975a}{LED\_QUEUE\_SIZE}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00715}00715\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(uint8\_t));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00716}00716\ \ \ \mbox{\hyperlink{freertos__chess_8h_a4821223bcff83669f6b0414b90542738}{SAFE\_CREATE\_QUEUE}}(\mbox{\hyperlink{freertos__chess_8c_a849df7d33a2eeeb8383dab84223a7813}{test\_command\_queue}},\ \mbox{\hyperlink{freertos__chess_8h_a60c0e1e27fef536d95040e98b856975a}{LED\_QUEUE\_SIZE}},\ \textcolor{keyword}{sizeof}(uint8\_t),}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00717}00717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Test\ Command\ Queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00718}00718\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Test\ queue\ created.\ Free\ heap:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00719}00719\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00720}00720\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00721}00721\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00722}00722\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游꿀\ ALL\ FREERTOS\ QUEUES\ CREATED\ SUCCESSFULLY!"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00723}00723\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Final\ free\ heap:\ \%zu\ bytes"{}},\ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00724}00724\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00725}00725\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00726}00726\ \ \ \textcolor{comment}{//\ CRITICAL:\ Validate\ all\ queues\ were\ created\ successfully}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00727}00727\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{matrix\_event\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_abc01112e6afa1b3e029218e52b7c2196}{matrix\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a9b3fea6e381f159f9e088382e4040d27}{matrix\_response\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00728}00728\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{button\_event\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a5f1958b9037083cf953f250fe1f364a5}{button\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a7e436e9dcca9a044bb9264755b4caa9e}{uart\_command\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00729}00729\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_a02a776b41d5e50969e5cf68dcbbc2c69}{uart\_response\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a6dfc9956f36db9a85a34268c6e14b059}{game\_status\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00730}00730\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_a6fa8af7d1c0b048b9f2c363a9fb2b288}{animation\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_ad2c6aca6dc859def2315ed1c26f11aad}{animation\_status\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00731}00731\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_ad6e2650c9733357ca904426081ccee72}{screen\_saver\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a494d670fc3ed5c9bf7fc74a908a92712}{screen\_saver\_status\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00732}00732\ \ \ \ \ \ \ \textcolor{comment}{/*\ !matter\_command\_queue\ ||\ !matter\_status\_queue\ ||\ */}\ \textcolor{comment}{//\ DISABLED\ -\/}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00733}00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Matter\ not}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00734}00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ needed}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00735}00735\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_a642abc1652d446215a18d55b0517edba}{web\_command\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}}\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00736}00736\ \ \ \ \ \ \ !\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}}\ ||\ !\mbox{\hyperlink{freertos__chess_8c_a849df7d33a2eeeb8383dab84223a7813}{test\_command\_queue}})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00737}00737\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}One\ or\ more\ queues\ failed\ to\ create\ -\/\ system\ initialization\ "{}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00738}00738\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}will\ fail"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00739}00739\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00740}00740\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00741}00741\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00742}00742\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ All\ queue\ handles\ validated\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00743}00743\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00744}00744\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00745}00745\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00746}\mbox{\hyperlink{freertos__chess_8c_a9bb91e5162ab07c0d6e18df6a5a9f43e}{00746}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a9bb91e5162ab07c0d6e18df6a5a9f43e}{chess\_create\_mutexes}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00747}00747\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Creating\ FreeRTOS\ mutexes..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00748}00748\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00749}00749\ \ \ \mbox{\hyperlink{freertos__chess_8h_a9ca3a534387caddce17a0aa3afb7a332}{SAFE\_CREATE\_MUTEX}}(\mbox{\hyperlink{freertos__chess_8c_a864f0cc9b1f2e30bd3c0e225e2c48552}{led\_mutex}},\ \textcolor{stringliteral}{"{}LED\ Mutex"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00750}00750\ \ \ \mbox{\hyperlink{freertos__chess_8h_a9ca3a534387caddce17a0aa3afb7a332}{SAFE\_CREATE\_MUTEX}}(\mbox{\hyperlink{freertos__chess_8c_a80a74d10dccdaa933010d0e5cf7202d8}{matrix\_mutex}},\ \textcolor{stringliteral}{"{}Matrix\ Mutex"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00751}00751\ \ \ \mbox{\hyperlink{freertos__chess_8h_a9ca3a534387caddce17a0aa3afb7a332}{SAFE\_CREATE\_MUTEX}}(\mbox{\hyperlink{freertos__chess_8c_a17744dc0b4a21889e7e9527835edc068}{button\_mutex}},\ \textcolor{stringliteral}{"{}Button\ Mutex"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00752}00752\ \ \ \mbox{\hyperlink{freertos__chess_8h_a9ca3a534387caddce17a0aa3afb7a332}{SAFE\_CREATE\_MUTEX}}(\mbox{\hyperlink{freertos__chess_8c_af5298ceb88597b4b25328ac7e1af7ff0}{game\_mutex}},\ \textcolor{stringliteral}{"{}Game\ Mutex"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00753}00753\ \ \ \mbox{\hyperlink{freertos__chess_8h_a9ca3a534387caddce17a0aa3afb7a332}{SAFE\_CREATE\_MUTEX}}(\mbox{\hyperlink{freertos__chess_8c_a54b3156204f85b12fbf1a9c012730afc}{system\_mutex}},\ \textcolor{stringliteral}{"{}System\ Mutex"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00754}00754\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00755}00755\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 All\ FreeRTOS\ mutexes\ created\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00756}00756\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00757}00757\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00758}00758\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00759}00759\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00760}00760\ \textcolor{comment}{//\ TIMER\ CALLBACK\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00761}00761\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00762}00762\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00763}00763\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00764}00764\ \textcolor{comment}{//\ COORDINATED\ TIME-\/MULTIPLEXING\ SYSTEM}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00765}00765\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00766}00766\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00787}\mbox{\hyperlink{freertos__chess_8c_a43c4623c2553d09a59385aabe971d75d}{00787}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_a43c4623c2553d09a59385aabe971d75d}{\_\_attribute\_\_}}((unused))}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00788}00788\ coordinated\_multiplex\_timer\_callback(TimerHandle\_t\ xTimer)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00789}00789\ \ \ \textcolor{comment}{//\ IMPORTANT:}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00790}00790\ \ \ \textcolor{comment}{//\ Timer\ callbacks\ run\ in\ FreeRTOS\ Timer\ Service\ task\ ("{}Tmr\ Svc"{})\ which\ has}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00791}00791\ \ \ \textcolor{comment}{//\ limited\ stack.\ Running\ matrix\ scanning\ /\ move\ detection\ /\ logging\ here\ can}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00792}00792\ \ \ \textcolor{comment}{//\ crash\ the\ system\ (exactly\ what\ your\ logs\ show).}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00793}00793\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00794}00794\ \ \ \textcolor{comment}{//\ The\ coordinated\ multiplexing\ is\ now\ executed\ by\ \`{}coordinated\_multiplex\_task`.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00795}00795\ \ \ (void)xTimer;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00796}00796\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00797}00797\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00804}\mbox{\hyperlink{freertos__chess_8c_a00c0a35485fb3de6ba2a604e7eb9b566}{00804}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_a00c0a35485fb3de6ba2a604e7eb9b566}{coordinated\_multiplex\_task}}(\textcolor{keywordtype}{void}\ *pvParameters)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00805}00805\ \ \ (void)pvParameters;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00806}00806\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00807}00807\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00808}00808\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}九\ Coordinated\ multiplexing\ TASK\ started\ (25ms\ cycle,\ stack=\%dKB)"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00809}00809\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_a53f20ff71110439851d63626a31312a5}{COORDINATED\_MUX\_TASK\_STACK\_SIZE}}\ /\ 1024);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00810}00810\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00811}00811\ \ \ \textcolor{comment}{//\ Register\ with\ TWDT\ (optional;\ safe\ wrapper\ pattern\ is\ used\ elsewhere)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00812}00812\ \ \ esp\_err\_t\ wdt\_ret\ =\ esp\_task\_wdt\_add(NULL);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00813}00813\ \ \ \textcolor{keywordflow}{if}\ (wdt\_ret\ !=\ ESP\_OK\ \&\&\ wdt\_ret\ !=\ ESP\_ERR\_INVALID\_ARG)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00814}00814\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Multiplex\ task\ WDT\ registration\ failed:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00815}00815\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(wdt\_ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00816}00816\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00817}00817\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00818}00818\ \ \ TickType\_t\ last\_wake\_time\ =\ xTaskGetTickCount();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00819}00819\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00820}00820\ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00821}00821\ \ \ \ \ \textcolor{comment}{//\ Reset\ WDT\ (if\ registered)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00822}00822\ \ \ \ \ esp\_task\_wdt\_reset();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00823}00823\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00824}00824\ \ \ \ \ \textcolor{comment}{//\ PHASE\ 1:\ MATRIX\ scan}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00825}00825\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{led__task_8c_ac4220888456a96a1308bbf06df3730b8}{matrix\_scanning\_enabled}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00826}00826\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{led__task_8c_ac4220888456a96a1308bbf06df3730b8}{matrix\_scanning\_enabled}})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00827}00827\ \ \ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__task_8h_a86518ffc745875b5c3c34d7c96f7e186}{matrix\_scan\_all}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00828}00828\ \ \ \ \ \ \ \mbox{\hyperlink{matrix__task_8h_a86518ffc745875b5c3c34d7c96f7e186}{matrix\_scan\_all}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00829}00829\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00830}00830\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00831}00831\ \ \ \ \ \textcolor{comment}{//\ PHASE\ 2:\ release\ matrix\ pins\ for\ button\ scan}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00832}00832\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__task_8h_a9afd14fa75a6cfa6e37480b4935cd285}{matrix\_release\_pins}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00833}00833\ \ \ \ \ \mbox{\hyperlink{matrix__task_8h_a9afd14fa75a6cfa6e37480b4935cd285}{matrix\_release\_pins}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00834}00834\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00835}00835\ \ \ \ \ \textcolor{comment}{//\ PHASE\ 3:\ BUTTON\ scan}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00836}00836\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{button__task_8c_a5fb2a771d8252d20fc0ad4d97667d4df}{button\_scan\_all}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00837}00837\ \ \ \ \ \mbox{\hyperlink{button__task_8c_a5fb2a771d8252d20fc0ad4d97667d4df}{button\_scan\_all}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00838}00838\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00839}00839\ \ \ \ \ \textcolor{comment}{//\ PHASE\ 4:\ re-\/acquire\ matrix\ pins}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00840}00840\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__task_8h_a8162927b4230f6777b1d42deec017797}{matrix\_acquire\_pins}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00841}00841\ \ \ \ \ \mbox{\hyperlink{matrix__task_8h_a8162927b4230f6777b1d42deec017797}{matrix\_acquire\_pins}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00842}00842\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00843}00843\ \ \ \ \ \textcolor{comment}{//\ Full\ multiplexing\ cycle}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00844}00844\ \ \ \ \ vTaskDelayUntil(\&last\_wake\_time,\ pdMS\_TO\_TICKS(\mbox{\hyperlink{freertos__chess_8h_a519b0c7ea34c85b7e4c7144095820e65}{TOTAL\_CYCLE\_TIME\_MS}}));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00845}00845\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00846}00846\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00847}00847\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00848}00848\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00849}00849\ \textcolor{comment}{//\ LEGACY\ TIMER\ CALLBACKS\ (kept\ for\ compatibility,\ not\ used)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00850}00850\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00851}00851\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00856}\mbox{\hyperlink{freertos__chess_8c_a60ba01ed8c95cf7326c889ea1b6a2bc2}{00856}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_a60ba01ed8c95cf7326c889ea1b6a2bc2}{button\_scan\_timer\_callback}}(TimerHandle\_t\ xTimer)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00857}00857\ \ \ \textcolor{comment}{//\ NOTE:\ This\ callback\ is\ NOT\ used\ when\ coordinated\ multiplexing\ is\ active}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00858}00858\ \ \ \textcolor{comment}{//\ Kept\ for\ backward\ compatibility\ only}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00859}00859\ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{button__task_8c_a5fb2a771d8252d20fc0ad4d97667d4df}{button\_scan\_all}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00860}00860\ \ \ \mbox{\hyperlink{button__task_8c_a5fb2a771d8252d20fc0ad4d97667d4df}{button\_scan\_all}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00861}00861\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00862}00862\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00867}\mbox{\hyperlink{freertos__chess_8c_a904cb90015996d3ad0532e71bc502318}{00867}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_a904cb90015996d3ad0532e71bc502318}{matrix\_scan\_timer\_callback}}(TimerHandle\_t\ xTimer)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00868}00868\ \ \ \textcolor{comment}{//\ NOTE:\ This\ callback\ is\ NOT\ used\ when\ coordinated\ multiplexing\ is\ active}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00869}00869\ \ \ \textcolor{comment}{//\ Kept\ for\ backward\ compatibility\ only}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00870}00870\ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{led__task_8c_ac4220888456a96a1308bbf06df3730b8}{matrix\_scanning\_enabled}};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00871}00871\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{led__task_8c_ac4220888456a96a1308bbf06df3730b8}{matrix\_scanning\_enabled}})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00872}00872\ \ \ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{matrix__task_8h_a86518ffc745875b5c3c34d7c96f7e186}{matrix\_scan\_all}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00873}00873\ \ \ \ \ \mbox{\hyperlink{matrix__task_8h_a86518ffc745875b5c3c34d7c96f7e186}{matrix\_scan\_all}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00874}00874\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00875}00875\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00876}00876\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00881}\mbox{\hyperlink{freertos__chess_8c_ae46cffe2b1cbbb95b41ce73ada4e7ecd}{00881}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_ae46cffe2b1cbbb95b41ce73ada4e7ecd}{led\_update\_timer\_callback}}(TimerHandle\_t\ xTimer)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00882}00882\ \ \ \textcolor{comment}{//\ NOTE:\ Timer\ callbacks\ run\ in\ timer\ service\ task\ context}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00883}00883\ \ \ \textcolor{comment}{//\ which\ is\ not\ registered\ with\ TWDT,\ so\ we\ don't\ call\ WDT\ reset}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00884}00884\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00885}00885\ \ \ \textcolor{comment}{//\ Periodick칠\ obnoven칤\ LED\ pro\ prevenci\ b칤l칠ho\ blik치n칤}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00886}00886\ \ \ \textcolor{comment}{//\ This\ ensures\ LED\ strip\ gets\ regular\ updates\ even\ when\ no\ commands\ are\ sent}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00887}00887\ \ \ \mbox{\hyperlink{led__task_8h_a35ed753e036a2372ea57df822d92f154}{led\_force\_immediate\_update}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00888}00888\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00889}00889\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00890}\mbox{\hyperlink{freertos__chess_8c_ad4a9b6f60cb5280918a47885121ea229}{00890}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ad4a9b6f60cb5280918a47885121ea229}{chess\_create\_timers}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00891}00891\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Creating\ FreeRTOS\ timers..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00892}00892\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00893}00893\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00894}00894\ \ \ \textcolor{comment}{//\ COORDINATED\ TIME-\/MULTIPLEXING\ TIMER\ (NEW\ SYSTEM)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00895}00895\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00896}00896\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00897}00897\ \ \ \textcolor{comment}{//\ PRODUCTION\ STABILITY:}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00898}00898\ \ \ \textcolor{comment}{//\ Do\ not\ create/start\ coordinated\ multiplexing\ as\ a\ FreeRTOS\ timer.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00899}00899\ \ \ \textcolor{comment}{//\ The\ Timer\ Service\ task\ stack\ is\ too\ small\ for\ the\ call\ chain}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00900}00900\ \ \ \textcolor{comment}{//\ (matrix\_detect\_moves\ -\/>\ ha\_light\_report\_activity\ -\/>\ esp\_log\ -\/>\ vfprintf).}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00901}00901\ \ \ \textcolor{comment}{//\ We\ use\ \`{}coordinated\_multiplex\_task`\ instead.}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00902}00902\ \ \ \mbox{\hyperlink{freertos__chess_8c_a0042f9cdb2f225fa940e25e47b2610ec}{coordinated\_multiplex\_timer}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00903}00903\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 Coordinated\ multiplexing\ will\ run\ as\ a\ TASK\ (not\ timer)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00904}00904\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00905}00905\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00906}00906\ \ \ \textcolor{comment}{//\ LEGACY\ TIMERS\ (kept\ for\ backward\ compatibility,\ not\ started)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00907}00907\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00908}00908\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00909}00909\ \ \ \textcolor{comment}{//\ Matrix\ scan\ timer\ (20ms\ period)\ -\/\ LEGACY,\ not\ used}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00910}00910\ \ \ \mbox{\hyperlink{freertos__chess_8c_ad589ad22574a5fdb69645141759216c4}{matrix\_scan\_timer}}\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00911}00911\ \ \ \ \ \ \ xTimerCreate(\textcolor{stringliteral}{"{}MatrixScan"{}},\ pdMS\_TO\_TICKS(\mbox{\hyperlink{freertos__chess_8h_ab3d042ad7a50f8a44015cc2a749d3fa4}{MATRIX\_SCAN\_TIME\_MS}}),\ pdTRUE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00912}00912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NULL,\ \mbox{\hyperlink{freertos__chess_8c_a904cb90015996d3ad0532e71bc502318}{matrix\_scan\_timer\_callback}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00913}00913\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_ad589ad22574a5fdb69645141759216c4}{matrix\_scan\_timer}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00914}00914\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ legacy\ matrix\ scan\ timer\ (not\ critical)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00915}00915\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00916}00916\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00917}00917\ \ \ \textcolor{comment}{//\ Button\ scan\ timer\ (5ms\ period)\ -\/\ LEGACY,\ not\ used}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00918}00918\ \ \ \mbox{\hyperlink{freertos__chess_8c_af58f98e02d7d24dcc49a348ea1f22e77}{button\_scan\_timer}}\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00919}00919\ \ \ \ \ \ \ xTimerCreate(\textcolor{stringliteral}{"{}ButtonScan"{}},\ pdMS\_TO\_TICKS(\mbox{\hyperlink{freertos__chess_8h_a3f22d026310bf8c1f12bbed516a074ea}{BUTTON\_SCAN\_TIME\_MS}}),\ pdTRUE,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00920}00920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NULL,\ \mbox{\hyperlink{freertos__chess_8c_a60ba01ed8c95cf7326c889ea1b6a2bc2}{button\_scan\_timer\_callback}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00921}00921\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_af58f98e02d7d24dcc49a348ea1f22e77}{button\_scan\_timer}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00922}00922\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ legacy\ button\ scan\ timer\ (not\ critical)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00923}00923\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00924}00924\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00925}00925\ \ \ \textcolor{comment}{//\ Timer\ pro\ periodick칠\ obnoven칤\ LED}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00926}00926\ \ \ \mbox{\hyperlink{freertos__chess_8c_a9bd4853603c685d45ba49977256c7567}{led\_update\_timer}}\ =\ xTimerCreate(\textcolor{stringliteral}{"{}LEDUpdate"{}},\ pdMS\_TO\_TICKS(25),\ pdTRUE,\ NULL,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00927}00927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_ae46cffe2b1cbbb95b41ce73ada4e7ecd}{led\_update\_timer\_callback}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00928}00928\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a9bd4853603c685d45ba49977256c7567}{led\_update\_timer}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00929}00929\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ LED\ update\ timer"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00930}00930\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00931}00931\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00932}00932\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 LED\ update\ timer\ created\ (25ms\ period)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00933}00933\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00934}00934\ \ \ \textcolor{comment}{//\ System\ health\ timer\ -\/\ DISABLED\ (was\ causing\ crashes\ with\ NULL\ callback)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00935}00935\ \ \ \textcolor{comment}{//\ system\_health\_timer\ =\ xTimerCreate("{}SystemHealth"{},\ pdMS\_TO\_TICKS(30000),}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00936}00936\ \ \ \textcolor{comment}{//\ pdTRUE,\ NULL,\ NULL);\ if\ (system\_health\_timer\ ==\ NULL)\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00937}00937\ \ \ \textcolor{comment}{//\ \ \ \ \ ESP\_LOGE(TAG,\ "{}Failed\ to\ create\ system\ health\ timer"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00938}00938\ \ \ \textcolor{comment}{//\ \ \ \ \ return\ ESP\_ERR\_NO\_MEM;}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00939}00939\ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00940}00940\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00941}00941\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 All\ FreeRTOS\ timers\ created\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00942}00942\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00943}00943\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00944}00944\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00945}\mbox{\hyperlink{freertos__chess_8c_a315226a40faf8a392b6328ed7c26340f}{00945}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a315226a40faf8a392b6328ed7c26340f}{chess\_start\_timers}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00946}00946\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Starting\ FreeRTOS\ timers..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00947}00947\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00948}00948\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00949}00949\ \ \ \textcolor{comment}{//\ START\ COORDINATED\ MULTIPLEXING\ TIMER\ (NEW\ SYSTEM)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00950}00950\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00951}00951\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00952}00952\ \ \ \textcolor{comment}{//\ Start\ coordinated\ multiplexing\ TASK\ (safe\ context)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00953}00953\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a5a10fe5e0bb7faf063f64958f1f7304b}{coordinated\_multiplex\_task\_handle}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00954}00954\ \ \ \ \ BaseType\_t\ ok\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00955}00955\ \ \ \ \ \ \ \ \ xTaskCreate(\mbox{\hyperlink{freertos__chess_8c_a00c0a35485fb3de6ba2a604e7eb9b566}{coordinated\_multiplex\_task}},\ \textcolor{stringliteral}{"{}coord\_mux\_task"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00956}00956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_a53f20ff71110439851d63626a31312a5}{COORDINATED\_MUX\_TASK\_STACK\_SIZE}},\ NULL,\ \mbox{\hyperlink{freertos__chess_8h_ab8ed4eae602e4b2be89befb487b83d26}{MATRIX\_TASK\_PRIORITY}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00957}00957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{freertos__chess_8c_a5a10fe5e0bb7faf063f64958f1f7304b}{coordinated\_multiplex\_task\_handle}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00958}00958\ \ \ \ \ \textcolor{keywordflow}{if}\ (ok\ !=\ pdPASS\ ||\ \mbox{\hyperlink{freertos__chess_8c_a5a10fe5e0bb7faf063f64958f1f7304b}{coordinated\_multiplex\_task\_handle}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00959}00959\ \ \ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ coordinated\ multiplexing\ task"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00960}00960\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00961}00961\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00962}00962\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00963}00963\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00964}00964\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 Coordinated\ multiplexing\ task\ active\ (25ms\ cycle)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00965}00965\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 九\ Matrix\ and\ button\ scanning\ are\ now\ coordinated!"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00966}00966\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 九\ No\ GPIO\ conflicts\ -\/\ clean\ time-\/multiplexing\ active"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00967}00967\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00968}00968\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00969}00969\ \ \ \textcolor{comment}{//\ LEGACY\ TIMERS\ (DO\ NOT\ START\ -\/\ would\ cause\ conflicts)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00970}00970\ \ \ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00971}00971\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00972}00972\ \ \ \textcolor{comment}{//\ DO\ NOT\ start\ legacy\ matrix\_scan\_timer\ -\/\ would\ conflict\ with\ coordinated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00973}00973\ \ \ \textcolor{comment}{//\ timer}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00974}00974\ \ \ ESP\_LOGI(}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00975}00975\ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00976}00976\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ 낒勇끂 \ Legacy\ matrix\ scan\ timer\ NOT\ started\ (coordinated\ system\ active)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00977}00977\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00978}00978\ \ \ \textcolor{comment}{//\ DO\ NOT\ start\ legacy\ button\_scan\_timer\ -\/\ would\ conflict\ with\ coordinated}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00979}00979\ \ \ \textcolor{comment}{//\ timer}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00980}00980\ \ \ ESP\_LOGI(}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00981}00981\ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00982}00982\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ \ 낒勇끂 \ Legacy\ button\ scan\ timer\ NOT\ started\ (coordinated\ system\ active)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00983}00983\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00984}00984\ \ \ \textcolor{comment}{//\ DISABLED:\ LED\ update\ timer\ causes\ WDT\ errors\ (timer\ service\ task\ not}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00985}00985\ \ \ \textcolor{comment}{//\ registered\ with\ TWDT)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00986}00986\ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00987}00987\ \textcolor{comment}{\ \ if\ (led\_update\_timer\ !=\ NULL)\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00988}00988\ \textcolor{comment}{\ \ \ \ \ \ if\ (xTimerStart(led\_update\_timer,\ 0)\ !=\ pdPASS)\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00989}00989\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ ESP\_LOGE(TAG,\ "{}Failed\ to\ start\ LED\ update\ timer"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00990}00990\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ return\ ESP\_ERR\_INVALID\_STATE;}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00991}00991\ \textcolor{comment}{\ \ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00992}00992\ \textcolor{comment}{\ \ \ \ \ \ ESP\_LOGI(TAG,\ "{}九늎 LED\ update\ timer\ started\ (25ms\ period)"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00993}00993\ \textcolor{comment}{\ \ \}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00994}00994\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00995}00995\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 낒勇끂 \ LED\ update\ timer\ DISABLED\ (causes\ WDT\ errors)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00996}00996\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00997}00997\ \ \ \textcolor{comment}{//\ System\ health\ timer\ -\/\ DISABLED\ (was\ causing\ crashes)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00998}00998\ \ \ \textcolor{comment}{//\ if\ (system\_health\_timer\ !=\ NULL)\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l00999}00999\ \ \ \textcolor{comment}{//\ \ \ \ \ if\ (xTimerStart(system\_health\_timer,\ 0)\ !=\ pdPASS)\ \{}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01000}01000\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ ESP\_LOGE(TAG,\ "{}Failed\ to\ start\ system\ health\ timer"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01001}01001\ \ \ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ return\ ESP\_ERR\_INVALID\_STATE;}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01002}01002\ \ \ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01003}01003\ \ \ \textcolor{comment}{//\ \ \ \ \ ESP\_LOGI(TAG,\ "{}九늎 System\ health\ timer\ started"{});}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01004}01004\ \ \ \textcolor{comment}{//\ \}}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01005}01005\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01006}01006\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 All\ FreeRTOS\ timers\ started\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01007}01007\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01008}01008\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游꿢\ TIME-\/MULTIPLEXING\ SYSTEM\ ACTIVE!"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01009}01009\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01010}01010\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01011}01011\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01012}01012\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01013}\mbox{\hyperlink{freertos__chess_8c_aadded4ebb2b88babdb6319afda065872}{01013}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_aadded4ebb2b88babdb6319afda065872}{chess\_freertos\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01014}01014\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}===\ FreeRTOS\ Initialization\ ==="{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01015}01015\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Free\ heap\ before\ FreeRTOS\ init:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01016}01016\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01017}01017\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Min\ free\ heap:\ \%zu\ bytes"{}},\ esp\_get\_minimum\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01018}01018\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01019}01019\ \ \ \textcolor{comment}{//\ Don't\ reset\ watchdog\ here\ -\/\ it\ might\ not\ be\ initialized\ yet}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01020}01020\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01021}01021\ \ \ esp\_err\_t\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01022}01022\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01023}01023\ \ \ \textcolor{comment}{//\ Create\ queues}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01024}01024\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ FreeRTOS\ queues..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01025}01025\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a918837616a81eb433243f2c1e109f73a}{chess\_create\_queues}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01026}01026\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01027}01027\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Queue\ creation\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01028}01028\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01029}01029\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01030}01030\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ FreeRTOS\ queues\ created\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01031}01031\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01032}01032\ \ \ \textcolor{comment}{//\ Create\ mutexes}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01033}01033\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ FreeRTOS\ mutexes..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01034}01034\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a9bb91e5162ab07c0d6e18df6a5a9f43e}{chess\_create\_mutexes}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01035}01035\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01036}01036\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Mutex\ creation\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01037}01037\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01038}01038\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01039}01039\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ FreeRTOS\ mutexes\ created\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01040}01040\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01041}01041\ \ \ \textcolor{comment}{//\ Create\ timers}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01042}01042\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Creating\ FreeRTOS\ timers..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01043}01043\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_ad4a9b6f60cb5280918a47885121ea229}{chess\_create\_timers}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01044}01044\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01045}01045\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Timer\ creation\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01046}01046\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01047}01047\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01048}01048\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ FreeRTOS\ timers\ created\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01049}01049\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01050}01050\ \ \ \mbox{\hyperlink{freertos__chess_8c_a32091f1b25b0412e3f75b7fb3dff4b90}{freertos\_initialized}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01051}01051\ \ \ \textcolor{comment}{//\ Don't\ reset\ watchdog\ here\ -\/\ it\ might\ not\ be\ initialized\ yet}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01052}01052\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游꿀\ FreeRTOS\ infrastructure\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01053}01053\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01054}01054\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01055}01055\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01056}01056\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01057}01057\ \textcolor{comment}{//\ SYSTEM\ UTILITY\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01058}01058\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01059}01059\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01060}\mbox{\hyperlink{freertos__chess_8c_a8d34f1ba2358585af189badda7f0d051}{01060}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a8d34f1ba2358585af189badda7f0d051}{chess\_nvs\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01061}01061\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ NVS\ flash..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01062}01062\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01063}01063\ \ \ esp\_err\_t\ ret\ =\ nvs\_flash\_init();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01064}01064\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_NVS\_NO\_FREE\_PAGES\ ||}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01065}01065\ \ \ \ \ \ \ ret\ ==\ ESP\_ERR\_NVS\_NEW\_VERSION\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01066}01066\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}NVS\ partition\ was\ truncated\ and\ erased"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01067}01067\ \ \ \ \ ESP\_ERROR\_CHECK(nvs\_flash\_erase());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01068}01068\ \ \ \ \ ret\ =\ nvs\_flash\_init();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01069}01069\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01070}01070\ \ \ ESP\_ERROR\_CHECK(ret);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01071}01071\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01072}01072\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九늎 NVS\ flash\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01073}01073\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01074}01074\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01075}01075\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01076}\mbox{\hyperlink{freertos__chess_8c_ae3398aa451de52fedd3ac9e5830fca76}{01076}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ae3398aa451de52fedd3ac9e5830fca76}{chess\_system\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01077}01077\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}===\ System\ Initialization\ ==="{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01078}01078\ \ \ \textcolor{comment}{//\ Don't\ reset\ watchdog\ here\ -\/\ it\ might\ not\ be\ initialized\ yet}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01079}01079\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Starting\ NVS\ initialization..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01080}01080\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01081}01081\ \ \ esp\_err\_t\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01082}01082\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01083}01083\ \ \ \textcolor{comment}{//\ Initialize\ NVS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01084}01084\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a8d34f1ba2358585af189badda7f0d051}{chess\_nvs\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01085}01085\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01086}01086\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}NVS\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01087}01087\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01088}01088\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01089}01089\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ NVS\ initialization\ completed\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01090}01090\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01091}01091\ \ \ \textcolor{comment}{//\ Initialize\ hardware}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01092}01092\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Starting\ hardware\ initialization..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01093}01093\ \ \ \textcolor{comment}{//\ WDT\ reset\ removed\ during\ initialization\ //\ Reset\ watchdog\ before\ hardware}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01094}01094\ \ \ \textcolor{comment}{//\ initialization}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01095}01095\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_a41db379171eabe6fccb60019e0e60549}{chess\_hardware\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01096}01096\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01097}01097\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Hardware\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01098}01098\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01099}01099\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01100}01100\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Hardware\ initialization\ completed\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01101}01101\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01102}01102\ \ \ \textcolor{comment}{//\ Initialize\ memory\ optimization\ systems}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01103}01103\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Starting\ memory\ optimization\ systems\ initialization..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01104}01104\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_ac2f54e3f77005d32b1df12eca333ed3e}{chess\_memory\_systems\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01105}01105\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01106}01106\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Memory\ systems\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01107}01107\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01108}01108\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01109}01109\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Memory\ optimization\ systems\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01110}01110\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01111}01111\ \ \ \textcolor{comment}{//\ Initialize\ FreeRTOS\ infrastructure}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01112}01112\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Starting\ FreeRTOS\ infrastructure\ initialization..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01113}01113\ \ \ ret\ =\ \mbox{\hyperlink{freertos__chess_8c_aadded4ebb2b88babdb6319afda065872}{chess\_freertos\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01114}01114\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01115}01115\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}FreeRTOS\ initialization\ failed"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01116}01116\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01117}01117\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01118}01118\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01119}01119\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}九\ FreeRTOS\ infrastructure\ initialization\ completed\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01120}01120\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01121}01121\ \ \ \mbox{\hyperlink{freertos__chess_8c_ab2336e816f0a31f0e3e85fba396e4340}{system\_initialized}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01122}01122\ \ \ \textcolor{comment}{//\ Don't\ reset\ watchdog\ here\ -\/\ it\ might\ not\ be\ initialized\ yet}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01123}01123\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游꿀\ System\ initialization\ completed\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01124}01124\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01125}01125\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01126}01126\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01127}\mbox{\hyperlink{freertos__chess_8c_a1fc97de08523b766a876d7688a3bdae3}{01127}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a1fc97de08523b766a876d7688a3bdae3}{chess\_check\_memory\_health}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01128}01128\ \ \ \textcolor{keywordtype}{size\_t}\ free\_heap\ =\ esp\_get\_free\_heap\_size();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01129}01129\ \ \ \textcolor{keywordtype}{size\_t}\ min\_free\_heap\ =\ esp\_get\_minimum\_free\_heap\_size();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01130}01130\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01131}01131\ \ \ \textcolor{keywordflow}{if}\ (free\_heap\ <\ 10000)\ \{\ \textcolor{comment}{//\ Less\ than\ 10KB\ free}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01132}01132\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Low\ memory\ warning:\ \%zu\ bytes\ free"{}},\ free\_heap);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01133}01133\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01134}01134\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01135}01135\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01136}01136\ \ \ \textcolor{keywordflow}{if}\ (free\_heap\ <\ 5000)\ \{\ \textcolor{comment}{//\ Less\ than\ 5KB\ free}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01137}01137\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Critical\ memory\ warning:\ \%zu\ bytes\ free"{}},\ free\_heap);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01138}01138\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01139}01139\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01140}01140\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01141}01141\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Memory\ health:\ \%zu\ bytes\ free,\ \%zu\ bytes\ minimum"{}},\ free\_heap,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01142}01142\ \ \ \ \ \ \ \ \ \ \ \ min\_free\_heap);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01143}01143\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01144}01144\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01145}01145\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01146}\mbox{\hyperlink{freertos__chess_8c_a0321f7ecdafb014dbfb05309bf810493}{01146}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a0321f7ecdafb014dbfb05309bf810493}{chess\_monitor\_tasks}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01147}01147\ \ \ UBaseType\_t\ task\_count\ =\ uxTaskGetNumberOfTasks();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01148}01148\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01149}01149\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Task\ monitoring:\ \%d\ active\ tasks"{}},\ task\_count);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01150}01150\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01151}01151\ \ \ \textcolor{keywordflow}{if}\ (task\_count\ <\ 5)\ \{\ \textcolor{comment}{//\ Should\ have\ at\ least\ 5\ tasks}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01152}01152\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Low\ task\ count\ warning:\ \%d\ tasks"{}},\ task\_count);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01153}01153\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_STATE;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01154}01154\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01155}01155\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01156}01156\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01157}01157\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01158}01158\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01159}\mbox{\hyperlink{freertos__chess_8c_acc6c5ec2b59b331d0d27ef56a9f0c462}{01159}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{freertos__chess_8c_acc6c5ec2b59b331d0d27ef56a9f0c462}{chess\_print\_system\_info}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01160}01160\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01161}01161\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}ESP32-\/C6\ Chess\ System\ v2.4\ Information"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01162}01162\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01163}01163\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Version:\ \%s"{}},\ \mbox{\hyperlink{freertos__chess_8h_acc0d1902b8ef5d4934f99724427e5bc4}{CHESS\_VERSION\_STRING}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01164}01164\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Build\ Date:\ \%s"{}},\ \mbox{\hyperlink{freertos__chess_8h_a8b1a270b4e32e22a214ff3ad8e670ef7}{CHESS\_BUILD\_DATE}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01165}01165\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Author:\ \%s"{}},\ \mbox{\hyperlink{freertos__chess_8h_afbda35de111776579b8d9abad085db4d}{CHESS\_SYSTEM\_AUTHOR}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01166}01166\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01167}01167\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Hardware\ Configuration:"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01168}01168\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 LED\ Data\ Pin:\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01169}01169\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Status\ LED:\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a089a71f836911c71b3f73fdd3b4b890b}{STATUS\_LED\_PIN}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01170}01170\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Reset\ Button:\ GPIO\%d"{}},\ \mbox{\hyperlink{freertos__chess_8h_a0710f0869f3bcc7820964e85f3d59fa4}{BUTTON\_RESET}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01171}01171\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Matrix:\ 8x8\ reed\ switches"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01172}01172\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Buttons:\ 9\ total\ (promotion\ +\ reset)"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01173}01173\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01174}01174\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}System\ Status:"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01175}01175\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Hardware:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01176}01176\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_ae37ba709842162d9a8328959d0cb0e05}{hardware\_initialized}}\ ?\ \textcolor{stringliteral}{"{}九늎 Initialized"{}}\ :\ \textcolor{stringliteral}{"{}九듚 Not\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01177}01177\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 FreeRTOS:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01178}01178\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_a32091f1b25b0412e3f75b7fb3dff4b90}{freertos\_initialized}}\ ?\ \textcolor{stringliteral}{"{}九늎 Initialized"{}}\ :\ \textcolor{stringliteral}{"{}九듚 Not\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01179}01179\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 System:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01180}01180\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{freertos__chess_8c_ab2336e816f0a31f0e3e85fba396e4340}{system\_initialized}}\ ?\ \textcolor{stringliteral}{"{}九늎 Initialized"{}}\ :\ \textcolor{stringliteral}{"{}九듚 Not\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01181}01181\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01182}01182\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Memory\ Information:"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01183}01183\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Free\ Heap:\ \%zu\ bytes"{}},\ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01184}01184\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Minimum\ Free:\ \%zu\ bytes"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01185}01185\ \ \ \ \ \ \ \ \ \ \ \ esp\_get\_minimum\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01186}01186\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Total\ Free:\ \%zu\ bytes"{}},\ esp\_get\_free\_heap\_size());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01187}01187\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01188}01188\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Task\ Information:"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01189}01189\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}\ \ 묖 Active\ Tasks:\ \%d"{}},\ uxTaskGetNumberOfTasks());}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01190}01190\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}========================================"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01191}01191\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01192}01192\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01193}01193\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01194}01194\ \textcolor{comment}{//\ HARDWARE\ ABSTRACTION\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01195}01195\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01196}01196\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01197}\mbox{\hyperlink{freertos__chess_8c_a7fb9ad5c97d8450a447d81ae4c6199fe}{01197}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a7fb9ad5c97d8450a447d81ae4c6199fe}{chess\_uart\_send\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *str)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01198}01198\ \ \ \textcolor{keywordflow}{if}\ (str\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01199}01199\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01200}01200\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01201}01201\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01202}01202\ \ \ \textcolor{comment}{//\ CRITICAL:\ Use\ centralized\ UART\ output\ queue}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01203}01203\ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{uart__task_8c_af1ca9bbdbbd1329b9bade0cc31634ba7}{uart\_queue\_message}}(\textcolor{keywordtype}{int}\ type,\ \textcolor{keywordtype}{bool}\ add\_newline,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *format,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01204}01204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ...);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01205}01205\ \ \ \mbox{\hyperlink{uart__task_8c_af1ca9bbdbbd1329b9bade0cc31634ba7}{uart\_queue\_message}}(0,\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}\%s"{}},\ str);\ \textcolor{comment}{//\ UART\_MSG\_NORMAL\ =\ 0}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01206}01206\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01207}01207\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01208}01208\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01209}01209\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01210}\mbox{\hyperlink{freertos__chess_8c_af0a70e7b77c14224b0efc66be5c59396}{01210}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_af0a70e7b77c14224b0efc66be5c59396}{chess\_uart\_printf}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *format,\ ...)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01211}01211\ \ \ \textcolor{keywordflow}{if}\ (format\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01212}01212\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01213}01213\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01214}01214\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01215}01215\ \ \ \textcolor{comment}{//\ CRITICAL:\ Use\ centralized\ UART\ output\ queue\ with\ formatted\ message}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01216}01216\ \ \ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{uart__task_8c_af1ca9bbdbbd1329b9bade0cc31634ba7}{uart\_queue\_message}}(\textcolor{keywordtype}{int}\ type,\ \textcolor{keywordtype}{bool}\ add\_newline,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *format,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01217}01217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ...);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01218}01218\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01219}01219\ \ \ va\_list\ args;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01220}01220\ \ \ va\_start(args,\ format);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01221}01221\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01222}01222\ \ \ \textcolor{keywordtype}{char}\ buffer[256];}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01223}01223\ \ \ \textcolor{keywordtype}{int}\ len\ =\ vsnprintf(buffer,\ \textcolor{keyword}{sizeof}(buffer),\ format,\ args);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01224}01224\ \ \ va\_end(args);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01225}01225\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01226}01226\ \ \ \textcolor{keywordflow}{if}\ (len\ >\ 0\ \&\&\ len\ <\ \textcolor{keyword}{sizeof}(buffer))\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01227}01227\ \ \ \ \ \mbox{\hyperlink{uart__task_8c_af1ca9bbdbbd1329b9bade0cc31634ba7}{uart\_queue\_message}}(0,\ \textcolor{keyword}{false},\ \textcolor{stringliteral}{"{}\%s"{}},\ buffer);\ \textcolor{comment}{//\ UART\_MSG\_NORMAL\ =\ 0}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01228}01228\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01229}01229\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01230}01230\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01231}01231\ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_SIZE;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01232}01232\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01233}01233\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01234}\mbox{\hyperlink{freertos__chess_8c_a6f66538255c01c03931e08eac42e6e8f}{01234}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a6f66538255c01c03931e08eac42e6e8f}{chess\_led\_set\_pixel}}(uint8\_t\ led\_index,\ uint8\_t\ red,\ uint8\_t\ green,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01235}01235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t\ blue)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01236}01236\ \ \ \textcolor{keywordflow}{if}\ (led\_index\ >=\ \mbox{\hyperlink{chess__types_8h_afb4b5c24ea71da31d1fe1536f5c18728}{CHESS\_LED\_COUNT\_TOTAL}})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01237}01237\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ LED\ index:\ \%d\ (max:\ \%d)"{}},\ led\_index,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01238}01238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chess__types_8h_afb4b5c24ea71da31d1fe1536f5c18728}{CHESS\_LED\_COUNT\_TOTAL}}\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01239}01239\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01240}01240\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01241}01241\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01242}01242\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ log\ the\ LED\ command}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01243}01243\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}LED\ Set\ Pixel:\ index=\%d,\ RGB=(\%d,\%d,\%d)"{}},\ led\_index,\ red,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01244}01244\ \ \ \ \ \ \ \ \ \ \ \ green,\ blue);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01245}01245\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01246}01246\ \ \ \textcolor{comment}{//\ P콏칤m칠\ vol치n칤\ LED\ funkce}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01247}01247\ \ \ \mbox{\hyperlink{led__task_8h_ad4b7ef962f86de71ef5f934f2a92544a}{led\_set\_pixel\_safe}}(led\_index,\ red,\ green,\ blue);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01248}01248\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01249}01249\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01250}01250\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01251}\mbox{\hyperlink{freertos__chess_8c_aba042f04f5d5fcb5bfb8f1ea039be359}{01251}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_aba042f04f5d5fcb5bfb8f1ea039be359}{chess\_led\_set\_all}}(uint8\_t\ red,\ uint8\_t\ green,\ uint8\_t\ blue)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01252}01252\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ log\ the\ LED\ command}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01253}01253\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}LED\ Set\ All:\ RGB=(\%d,\%d,\%d)"{}},\ red,\ green,\ blue);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01254}01254\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01255}01255\ \ \ \textcolor{comment}{//\ P콏칤m칠\ vol치n칤\ LED\ funkce}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01256}01256\ \ \ \mbox{\hyperlink{led__task_8h_a67410e7a666d076402f2eaf116716a2b}{led\_set\_all\_safe}}(red,\ green,\ blue);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01257}01257\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01258}01258\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01259}01259\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01260}\mbox{\hyperlink{freertos__chess_8c_af2ee44ebdd95075569a9d32e7460ff7e}{01260}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_af2ee44ebdd95075569a9d32e7460ff7e}{chess\_led\_clear}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01261}01261\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ log\ the\ LED\ command}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01262}01262\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}LED\ Clear\ All"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01263}01263\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01264}01264\ \ \ \textcolor{comment}{//\ P콏칤m칠\ vol치n칤\ LED\ funkce}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01265}01265\ \ \ \mbox{\hyperlink{led__task_8h_afff280b4c9b7261d1a086e0cfa356604}{led\_clear\_all\_safe}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01266}01266\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01267}01267\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01268}01268\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01269}\mbox{\hyperlink{freertos__chess_8c_ab72ea43bb7c2a1d9dee3d16ee7702a35}{01269}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ab72ea43bb7c2a1d9dee3d16ee7702a35}{chess\_led\_show\_board}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01270}01270\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ log\ the\ LED\ command}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01271}01271\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}LED\ Show\ Chess\ Board\ Pattern"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01272}01272\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01273}01273\ \ \ \textcolor{comment}{//\ P콏칤m칠\ vol치n칤\ LED\ funkce}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01274}01274\ \ \ \textcolor{comment}{//\ Show\ chess\ board\ pattern\ (alternating\ black/white\ squares)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01275}01275\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 64;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01276}01276\ \ \ \ \ \textcolor{keywordtype}{int}\ row\ =\ i\ /\ 8;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01277}01277\ \ \ \ \ \textcolor{keywordtype}{int}\ col\ =\ i\ \%\ 8;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01278}01278\ \ \ \ \ \textcolor{keywordflow}{if}\ ((row\ +\ col)\ \%\ 2\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01279}01279\ \ \ \ \ \ \ \mbox{\hyperlink{led__task_8h_ad4b7ef962f86de71ef5f934f2a92544a}{led\_set\_pixel\_safe}}(i,\ 255,\ 255,\ 255);\ \textcolor{comment}{//\ White\ squares}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01280}01280\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01281}01281\ \ \ \ \ \ \ \mbox{\hyperlink{led__task_8h_ad4b7ef962f86de71ef5f934f2a92544a}{led\_set\_pixel\_safe}}(i,\ 0,\ 0,\ 0);\ \textcolor{comment}{//\ Black\ squares}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01282}01282\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01283}01283\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01284}01284\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01285}01285\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01286}01286\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01287}\mbox{\hyperlink{freertos__chess_8c_ae834a611972910ae29f806ee1edc6ac5}{01287}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ae834a611972910ae29f806ee1edc6ac5}{chess\_led\_button\_feedback}}(uint8\_t\ button\_id,\ \textcolor{keywordtype}{bool}\ available)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01288}01288\ \ \ \textcolor{keywordflow}{if}\ (button\_id\ >=\ \mbox{\hyperlink{chess__types_8h_a6f0f1e32a1bc7c5e590c118b42f59b2c}{CHESS\_BUTTON\_COUNT}})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01289}01289\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ button\ ID:\ \%d\ (max:\ \%d)"{}},\ button\_id,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01290}01290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{chess__types_8h_a6f0f1e32a1bc7c5e590c118b42f59b2c}{CHESS\_BUTTON\_COUNT}}\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01291}01291\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01292}01292\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01293}01293\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01294}01294\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ log\ the\ button\ feedback}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01295}01295\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Button\ LED\ Feedback:\ button=\%d,\ available=\%s"{}},\ button\_id,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01296}01296\ \ \ \ \ \ \ \ \ \ \ \ available\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01297}01297\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01298}01298\ \ \ \textcolor{comment}{//\ P콏칤m칠\ vol치n칤\ LED\ funkce}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01299}01299\ \ \ uint8\_t\ led\_index\ =}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01300}01300\ \ \ \ \ \ \ button\_id\ +\ \mbox{\hyperlink{chess__types_8h_a490b67efe5e74def79831ae40041f654}{CHESS\_LED\_COUNT\_BOARD}};\ \textcolor{comment}{//\ Button\ LEDs\ start\ at\ index\ 64}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01301}01301\ \ \ \textcolor{keywordflow}{if}\ (available)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01302}01302\ \ \ \ \ \mbox{\hyperlink{led__task_8h_ad4b7ef962f86de71ef5f934f2a92544a}{led\_set\_pixel\_safe}}(led\_index,\ 0,\ 255,\ 0);\ \textcolor{comment}{//\ Green\ for\ available}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01303}01303\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01304}01304\ \ \ \ \ \mbox{\hyperlink{led__task_8h_ad4b7ef962f86de71ef5f934f2a92544a}{led\_set\_pixel\_safe}}(led\_index,\ 255,\ 0,\ 0);\ \textcolor{comment}{//\ Red\ for\ not\ available}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01305}01305\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01306}01306\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01307}01307\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01308}01308\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01309}\mbox{\hyperlink{freertos__chess_8c_ad875b05d9ca835122984b99c4d092a6a}{01309}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ad875b05d9ca835122984b99c4d092a6a}{chess\_matrix\_scan}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01310}01310\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ simulate\ matrix\ scanning}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01311}01311\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ Scan:\ Simulating\ 8x8\ reed\ switch\ matrix"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01312}01312\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01313}01313\ \ \ \textcolor{comment}{//\ Simulate\ some\ matrix\ events}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01314}01314\ \ \ \textcolor{keyword}{static}\ uint32\_t\ \mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01315}01315\ \ \ \mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}++;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01316}01316\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01317}01317\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ \%\ 10\ ==\ 0)\ \{\ \textcolor{comment}{//\ Every\ 10th\ scan}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01318}01318\ \ \ \ \ \textcolor{comment}{//\ Simulate\ a\ piece\ move}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01319}01319\ \ \ \ \ \mbox{\hyperlink{structmatrix__event__t}{matrix\_event\_t}}\ \textcolor{keyword}{event}\ =\ \{.type\ =\ \mbox{\hyperlink{chess__types_8h_a86af72d7b967d33d0fade767c033320fa35b920398a95b8a2cb0b48a31df01619}{MATRIX\_EVENT\_MOVE\_DETECTED}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01320}01320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .from\_square\ =\ (\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ /\ 10)\ \%\ 64,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01321}01321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .to\_square\ =\ ((\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ /\ 10)\ +\ 1)\ \%\ 64,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01322}01322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .piece\_type\ =\ (\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ /\ 10)\ \%\ 6\ +\ 1,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01323}01323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .timestamp\ =\ esp\_timer\_get\_time()\ /\ 1000\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01324}01324\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01325}01325\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{matrix\_event\_queue}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01326}01326\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a1b93ff1badbca8962927cb6fd837463e}{matrix\_event\_queue}},\ \&event,\ pdMS\_TO\_TICKS(100))\ !=}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01327}01327\ \ \ \ \ \ \ \ \ \ \ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01328}01328\ \ \ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ send\ matrix\ event\ to\ queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01329}01329\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01330}01330\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01331}01331\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01332}01332\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01333}01333\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01334}01334\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01335}01335\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01336}\mbox{\hyperlink{freertos__chess_8c_a97e4f6a8afd280c2e3a7c7708c823f26}{01336}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a97e4f6a8afd280c2e3a7c7708c823f26}{chess\_matrix\_reset}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01337}01337\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ Reset:\ Clearing\ all\ matrix\ states"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01338}01338\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01339}01339\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01340}01340\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01341}\mbox{\hyperlink{freertos__chess_8c_a082e770fd9ed752fea35d0597d2cc4de}{01341}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a082e770fd9ed752fea35d0597d2cc4de}{chess\_matrix\_get\_status}}(uint8\_t\ *status\_array)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01342}01342\ \ \ \textcolor{keywordflow}{if}\ (status\_array\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01343}01343\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01344}01344\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01345}01345\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01346}01346\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ return\ simulated\ matrix\ status}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01347}01347\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 64;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01348}01348\ \ \ \ \ status\_array[i]\ =\ (i\ \%\ 8\ ==\ 0)\ ?\ 1\ :\ 0;\ \textcolor{comment}{//\ Simulate\ pieces\ on\ A-\/file}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01349}01349\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01350}01350\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01351}01351\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Matrix\ Status:\ Retrieved\ simulated\ 8x8\ matrix\ state"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01352}01352\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01353}01353\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01354}01354\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01355}\mbox{\hyperlink{freertos__chess_8c_a9fcb61aa21d096994b53489091a335bd}{01355}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a9fcb61aa21d096994b53489091a335bd}{chess\_button\_scan}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01356}01356\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ simulate\ button\ scanning}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01357}01357\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Button\ Scan:\ Simulating\ 9\ button\ states"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01358}01358\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01359}01359\ \ \ \textcolor{comment}{//\ Simulate\ some\ button\ events}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01360}01360\ \ \ \textcolor{keyword}{static}\ uint32\_t\ \mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01361}01361\ \ \ \mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}++;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01362}01362\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01363}01363\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ \%\ 20\ ==\ 0)\ \{\ \textcolor{comment}{//\ Every\ 20th\ scan}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01364}01364\ \ \ \ \ \textcolor{comment}{//\ Simulate\ a\ button\ press}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01365}01365\ \ \ \ \ \mbox{\hyperlink{structbutton__event__t}{button\_event\_t}}\ \textcolor{keyword}{event}\ =\ \{.type\ =\ \mbox{\hyperlink{chess__types_8h_a54c67f8a6d26165b932e66b06b5b904bac5a8f24e3beed7990f5495be58d2dc79}{BUTTON\_EVENT\_PRESS}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01366}01366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .button\_id\ =\ (\mbox{\hyperlink{matrix__task_8c_aadac7bd6fb2efeee4da9a5432123db70}{scan\_count}}\ /\ 20)\ \%\ \mbox{\hyperlink{chess__types_8h_a6f0f1e32a1bc7c5e590c118b42f59b2c}{CHESS\_BUTTON\_COUNT}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01367}01367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .press\_duration\_ms\ =\ 100,}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01368}01368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .timestamp\ =\ esp\_timer\_get\_time()\ /\ 1000\};}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01369}01369\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01370}01370\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{button\_event\_queue}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01371}01371\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a05107bbe85fd87a92dad9efd71dbd653}{button\_event\_queue}},\ \&event,\ pdMS\_TO\_TICKS(100))\ !=}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01372}01372\ \ \ \ \ \ \ \ \ \ \ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01373}01373\ \ \ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ send\ button\ event\ to\ queue"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01374}01374\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01375}01375\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01376}01376\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01377}01377\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01378}01378\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01379}01379\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01380}01380\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01381}\mbox{\hyperlink{freertos__chess_8c_a6611221bad87e54f59f9dd794145a88f}{01381}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a6611221bad87e54f59f9dd794145a88f}{chess\_button\_get\_status}}(uint8\_t\ *button\_status)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01382}01382\ \ \ \textcolor{keywordflow}{if}\ (button\_status\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01383}01383\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01384}01384\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01385}01385\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01386}01386\ \ \ \textcolor{comment}{//\ In\ simulation\ mode,\ return\ simulated\ button\ status}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01387}01387\ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{chess__types_8h_a6f0f1e32a1bc7c5e590c118b42f59b2c}{CHESS\_BUTTON\_COUNT}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01388}01388\ \ \ \ \ button\_status[i]\ =\ (i\ \%\ 3\ ==\ 0)\ ?\ 1\ :\ 0;\ \textcolor{comment}{//\ Simulate\ some\ buttons\ pressed}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01389}01389\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01390}01390\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01391}01391\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Button\ Status:\ Retrieved\ simulated\ button\ states"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01392}01392\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01393}01393\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01394}01394\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01395}\mbox{\hyperlink{freertos__chess_8c_a8fc661c051f0a660c3ace708482afdef}{01395}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_a8fc661c051f0a660c3ace708482afdef}{chess\_game\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01396}01396\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Game\ Init:\ Starting\ new\ chess\ game"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01397}01397\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01398}01398\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01399}01399\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01400}\mbox{\hyperlink{freertos__chess_8c_afed3614bd3811e6c72f9fd0f0c6f605f}{01400}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_afed3614bd3811e6c72f9fd0f0c6f605f}{chess\_game\_reset}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01401}01401\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Game\ Reset:\ Resetting\ chess\ game\ to\ initial\ state"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01402}01402\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01403}01403\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01404}01404\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01405}\mbox{\hyperlink{freertos__chess_8c_aee0685887418c8f4406109069ea004de}{01405}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_aee0685887418c8f4406109069ea004de}{chess\_game\_get\_status}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01406}01406\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Game\ Status:\ Retrieving\ current\ game\ state"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01407}01407\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01408}01408\ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01409}01409\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01410}01410\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01411}01411\ \textcolor{comment}{//\ MEMORY\ OPTIMIZATION\ SYSTEMS\ INITIALIZATION}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01412}01412\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01413}01413\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01414}\mbox{\hyperlink{freertos__chess_8c_ac2f54e3f77005d32b1df12eca333ed3e}{01414}}\ esp\_err\_t\ \mbox{\hyperlink{freertos__chess_8c_ac2f54e3f77005d32b1df12eca333ed3e}{chess\_memory\_systems\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01415}01415\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ memory\ optimization\ systems..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01416}01416\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01417}01417\ \ \ esp\_err\_t\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01418}01418\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01419}01419\ \ \ \textcolor{comment}{//\ Initialize\ shared\ buffer\ pool}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01420}01420\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ shared\ buffer\ pool..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01421}01421\ \ \ ret\ =\ \mbox{\hyperlink{shared__buffer__pool_8h_a57e203054eac9c4b6834783c64844d9b}{buffer\_pool\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01422}01422\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01423}01423\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}仇\ Shared\ buffer\ pool\ initialization\ failed:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01424}01424\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01425}01425\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01426}01426\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01427}01427\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Shared\ buffer\ pool\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01428}01428\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01429}01429\ \ \ \textcolor{comment}{//\ Initialize\ streaming\ output\ system}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01430}01430\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}游댃\ Initializing\ streaming\ output\ system..."{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01431}01431\ \ \ ret\ =\ \mbox{\hyperlink{streaming__output_8h_a5ce23c8be43f17f9b75c37d63fdb7eac}{streaming\_output\_init}}();}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01432}01432\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01433}01433\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}仇\ Streaming\ output\ initialization\ failed:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01434}01434\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01435}01435\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01436}01436\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01437}01437\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ Streaming\ output\ system\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01438}01438\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01439}01439\ \ \ \textcolor{comment}{//\ Configure\ streaming\ output\ for\ UART}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01440}01440\ \ \ ret\ =\ \mbox{\hyperlink{streaming__output_8h_a8aa67921edc9b4e0c2ffcf2660a96982}{streaming\_set\_uart\_output}}(0);\ \textcolor{comment}{//\ UART\ port\ 0\ (USB\ Serial\ JTAG)}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01441}01441\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01442}01442\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}仇\ Failed\ to\ configure\ UART\ streaming:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01443}01443\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01444}01444\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01445}01445\ \ \ \}}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01446}01446\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ UART\ streaming\ configured\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01447}01447\ }
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01448}01448\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}九\ All\ memory\ optimization\ systems\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01449}01449\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{freertos__chess_8c_source_l01450}01450\ \}}

\end{DoxyCode}
