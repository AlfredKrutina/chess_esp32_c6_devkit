\doxysection{web\+\_\+server\+\_\+task.\+c}
\hypertarget{web__server__task_8c_source}{}\label{web__server__task_8c_source}\index{web\_server\_task.c@{web\_server\_task.c}}
\mbox{\hyperlink{web__server__task_8c}{Zobrazit dokumentaci tohoto souboru.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00124}00124\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{web__server__task_8h}{web\_server\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00125}00125\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{game__task_8h}{../game\_task/include/game\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00126}00126\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ha__light__task_8h}{../ha\_light\_task/include/ha\_light\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00127}00127\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{led__task_8h}{../led\_task/include/led\_task.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00128}00128\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{led__mapping_8h}{led\_mapping.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00129}00129\ \textcolor{comment}{//\ \#include\ "{}../timer\_system/include/timer\_system.h"{}\ //\ UNUSED}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00130}00130\ \textcolor{preprocessor}{\#include\ "{}esp\_event.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00131}00131\ \textcolor{preprocessor}{\#include\ "{}esp\_http\_server.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00132}00132\ \textcolor{preprocessor}{\#include\ "{}esp\_log.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00133}00133\ \textcolor{preprocessor}{\#include\ "{}esp\_netif.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00134}00134\ \textcolor{preprocessor}{\#include\ "{}esp\_task\_wdt.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00135}00135\ \textcolor{preprocessor}{\#include\ "{}esp\_wifi.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00136}00136\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{freertos__chess_8h}{freertos\_chess.h}}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00137}00137\ \textcolor{preprocessor}{\#include\ "{}nvs.h"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00138}00138\ \textcolor{comment}{//\ \#include\ "{}nvs\_flash.h"{}\ //\ UNUSED}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00139}00139\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00140}00140\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00141}00141\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00143}00143\ \textcolor{comment}{//\ Externi\ deklarace\ fronty}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00144}00144\ \textcolor{keyword}{extern}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00146}00146\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00147}00147\ \textcolor{comment}{//\ LOKALNI\ PROMENNE\ A\ KONSTANTY}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00148}00148\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00150}\mbox{\hyperlink{web__server__task_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{00150}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}}\ =\ \textcolor{stringliteral}{"{}WEB\_SERVER\_TASK"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00152}00152\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00153}00153\ \textcolor{comment}{//\ WDT\ WRAPPER\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00154}00154\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00170}\mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{00170}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{web\_server\_task\_wdt\_reset\_safe}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00171}00171\ \ \ esp\_err\_t\ ret\ =\ esp\_task\_wdt\_reset();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00173}00173\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00174}00174\ \ \ \ \ \textcolor{comment}{//\ Logovat\ jako\ WARNING\ misto\ ERROR\ -\/\ task\ jeste\ neni\ registrovany}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00175}00175\ \ \ \ \ ESP\_LOGW(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00176}00176\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00177}00177\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}WDT\ reset:\ task\ not\ registered\ yet\ (this\ is\ normal\ during\ startup)"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00178}00178\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;\ \textcolor{comment}{//\ Povazovat\ za\ uspech\ pro\ nase\ ucely}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00179}00179\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00180}00180\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WDT\ reset\ failed:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00181}00181\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00182}00182\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00184}00184\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00185}00185\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00187}00187\ \textcolor{comment}{//\ Konfigurace\ WiFi}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00188}\mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{00188}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_SSID\ "{}ESP32-\/CzechMate"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00189}\mbox{\hyperlink{web__server__task_8c_ac80c92af8bf29cfe0442a28b6a7ec5a3}{00189}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_PASSWORD\ "{}12345678"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00190}\mbox{\hyperlink{web__server__task_8c_ac0a1dba58f0e6d7f07d3050fa0291dd0}{00190}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_CHANNEL\ 1}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00191}\mbox{\hyperlink{web__server__task_8c_ab689d29cda2d350ce6652141df530fd0}{00191}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_MAX\_CONNECTIONS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00192}00192\ \textcolor{preprocessor}{\ \ 10\ }\textcolor{comment}{//\ Support\ for\ 6+\ clients\ (ESP32-\/C6\ can\ handle\ up\ to\ \string~10-\/16)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00193}\mbox{\hyperlink{web__server__task_8c_a067a8d9ec14859ad6237320d2cec686a}{00193}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_IP\ "{}192.168.4.1"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00194}\mbox{\hyperlink{web__server__task_8c_a2782b50f9a156696a1708c61823aa3a3}{00194}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_GATEWAY\ "{}192.168.4.1"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00195}\mbox{\hyperlink{web__server__task_8c_af48472f62a4bab9896e181b25d439f34}{00195}}\ \textcolor{preprocessor}{\#define\ WIFI\_AP\_NETMASK\ "{}255.255.255.0"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00196}00196\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00197}00197\ \textcolor{comment}{//\ NVS\ konfigurace\ pro\ WiFi\ STA}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00198}\mbox{\hyperlink{web__server__task_8c_a3be9b58c528a64824c7b4847f5589837}{00198}}\ \textcolor{preprocessor}{\#define\ WIFI\_NVS\_NAMESPACE\ "{}wifi\_config"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00199}\mbox{\hyperlink{web__server__task_8c_a4d51acbc4a1127232436f69fbbc18683}{00199}}\ \textcolor{preprocessor}{\#define\ WIFI\_NVS\_KEY\_SSID\ "{}sta\_ssid"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00200}\mbox{\hyperlink{web__server__task_8c_a434b6722326d8ef2da75d4d215ac6992}{00200}}\ \textcolor{preprocessor}{\#define\ WIFI\_NVS\_KEY\_PASSWORD\ "{}sta\_password"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00201}00201\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00202}00202\ \textcolor{comment}{//\ NVS\ konfigurace\ pro\ Web\ Lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00203}\mbox{\hyperlink{web__server__task_8c_a94e74a2c614fc3d5ea5f639a55f2221b}{00203}}\ \textcolor{preprocessor}{\#define\ WEB\_NVS\_NAMESPACE\ "{}web\_config"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00204}\mbox{\hyperlink{web__server__task_8c_a34ccd19a2d18b64a7db37e39c68dc704}{00204}}\ \textcolor{preprocessor}{\#define\ WEB\_NVS\_KEY\_LOCKED\ "{}locked"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00206}00206\ \textcolor{comment}{//\ Konfigurace\ HTTP\ serveru}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00207}\mbox{\hyperlink{web__server__task_8c_a4f905ddd4da1a3e205a8935f4babb25b}{00207}}\ \textcolor{preprocessor}{\#define\ HTTP\_SERVER\_PORT\ 80}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00208}\mbox{\hyperlink{web__server__task_8c_ac6dafba2315f7dd8ef7954d67c1c58ef}{00208}}\ \textcolor{preprocessor}{\#define\ HTTP\_SERVER\_MAX\_URI\_LEN\ 512}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00209}\mbox{\hyperlink{web__server__task_8c_aa471f425e7c4a8154dd0a6aef7b1c151}{00209}}\ \textcolor{preprocessor}{\#define\ HTTP\_SERVER\_MAX\_HEADERS\ 8}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00210}\mbox{\hyperlink{web__server__task_8c_a8fed04375198615d8723433210c7861a}{00210}}\ \textcolor{preprocessor}{\#define\ HTTP\_SERVER\_MAX\_CLIENTS\ 4}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00212}00212\ \textcolor{comment}{//\ Velikosti\ JSON\ bufferu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00213}\mbox{\hyperlink{web__server__task_8c_a2e4ba70a12e464d5b5278c18d28355f8}{00213}}\ \textcolor{preprocessor}{\#define\ JSON\_BUFFER\_SIZE\ 2048\ }\textcolor{comment}{//\ Puvodni\ velikost}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00215}00215\ \textcolor{comment}{//\ Sledovani\ stavu\ web\ serveru}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00216}\mbox{\hyperlink{web__server__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{00216}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00217}\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{00217}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00218}\mbox{\hyperlink{web__server__task_8c_a6fd14c6866c5be5170e78061b5af1cca}{00218}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_a6fd14c6866c5be5170e78061b5af1cca}{wifi\_ap\_active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00219}\mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{00219}}\ \textcolor{keyword}{static}\ uint32\_t\ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00220}\mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{00220}}\ uint32\_t\ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}}\ =\ 0;\ \textcolor{comment}{//\ Externi\ pro\ UART\ prikazy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00221}00221\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00222}00222\ \textcolor{comment}{//\ Handle\ HTTP\ serveru}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00223}\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{00223}}\ \textcolor{keyword}{static}\ httpd\_handle\_t\ \mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00224}00224\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00225}00225\ \textcolor{comment}{//\ Handle\ netif}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00226}\mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{00226}}\ \textcolor{keyword}{static}\ esp\_netif\_t\ *\mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{ap\_netif}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00227}\mbox{\hyperlink{web__server__task_8c_a8475209c3d16d25790fc4b67e18f3f57}{00227}}\ \textcolor{keyword}{static}\ esp\_netif\_t\ *\mbox{\hyperlink{web__server__task_8c_a8475209c3d16d25790fc4b67e18f3f57}{sta\_netif}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00229}00229\ \textcolor{comment}{//\ STA\ status\ promenne}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00230}\mbox{\hyperlink{web__server__task_8c_a738f5dc6c12f15f0149e08de59f48064}{00230}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00231}\mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{00231}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00232}00232\ \ \ \ \ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Flag\ pro\ sledovani\ stavu\ pripojovani\ (zabranuje\ race\ condition)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00233}\mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{00233}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Flag\ pro\ lock\ web\ rozhrani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00234}\mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{00234}}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}[16]\ =\ \{0\};\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Externi\ pro\ UART\ prikazy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00235}\mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{00235}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}}[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00236}\mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{00236}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00237}00237\ \ \ \ \ 0;\ \textcolor{comment}{//\ Posledni\ disconnection\ reason\ pro\ error\ handling}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00238}00238\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00239}00239\ \textcolor{comment}{/*\ Cache\ jasu\ pro\ GET\ /api/status\ â€“\ zabranuje\ NVS\ +\ CONFIG\_MANAGER\ na\ kazdy\ request\ */}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00240}\mbox{\hyperlink{web__server__task_8c_ab17ad7844a24ac3ce03f648f18a3c976}{00240}}\ \textcolor{keyword}{static}\ uint8\_t\ \mbox{\hyperlink{web__server__task_8c_ab17ad7844a24ac3ce03f648f18a3c976}{cached\_brightness}}\ =\ 50;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00241}\mbox{\hyperlink{web__server__task_8c_a10437ead7390b9e656788a7546bb15b2}{00241}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_a10437ead7390b9e656788a7546bb15b2}{cached\_brightness\_valid}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00242}00242\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00243}00243\ \textcolor{comment}{//\ Externi\ promenne}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00244}\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{00244}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00245}\mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{00245}}\ QueueHandle\_t\ \mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00247}00247\ \textcolor{comment}{//\ Extern\ funcions\ from\ main.c\ for\ Demo\ Mode}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00248}00248\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a6e05201e522856e3cd984bade768be7e}{toggle\_demo\_mode}}(\textcolor{keywordtype}{bool}\ enabled);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00249}00249\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a570c98f23cd91c36ce62964733732cdf}{set\_demo\_speed\_ms}}(uint32\_t\ speed\_ms);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00250}00250\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_ad190bb08e29e63b6f04a3715dae88706}{is\_demo\_mode\_enabled}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00251}00251\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00252}00252\ \textcolor{comment}{//\ JSON\ buffer\ pool\ (znovupouzitelny)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00253}\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{00253}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}[\mbox{\hyperlink{web__server__task_8c_a2e4ba70a12e464d5b5278c18d28355f8}{JSON\_BUFFER\_SIZE}}];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00255}00255\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00256}00256\ \textcolor{comment}{//\ PREDBEZNE\ DEKLARACE}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00257}00257\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00258}00258\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00259}00259\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a67b85e21ee1a283f1f8ba6b818e6bb3e}{wifi\_init\_apsta}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00260}00260\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{wifi\_event\_handler}}(\textcolor{keywordtype}{void}\ *arg,\ esp\_event\_base\_t\ event\_base,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ event\_id,\ \textcolor{keywordtype}{void}\ *event\_data);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00262}00262\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a336ec184b985a0af307c5ad81f06ae9e}{start\_http\_server}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00263}00263\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a12a90512dcfbad1de2475bba47af2c18}{stop\_http\_server}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00264}00264\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00265}00265\ \textcolor{comment}{//\ HTTP\ handlery}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00266}00266\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ac4be9f5032c10525d0b61493e402b758}{http\_get\_root\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00267}00267\ \textcolor{keyword}{static}\ esp\_err\_t}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00268}00268\ \mbox{\hyperlink{web__server__task_8c_afeadcd80458be0b8f189b25986dc9e72}{http\_get\_chess\_js\_handler}}(httpd\_req\_t\ *req);\ \textcolor{comment}{//\ chess\_app.js\ file}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00269}00269\ \textcolor{keyword}{static}\ esp\_err\_t}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00270}00270\ \mbox{\hyperlink{web__server__task_8c_ae7ac8a7695f85cdf9c15b8045b2813b3}{http\_get\_test\_handler}}(httpd\_req\_t\ *req);\ \textcolor{comment}{//\ Testovaci\ stranka\ pro\ timer}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00271}00271\ \textcolor{keyword}{static}\ esp\_err\_t}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00272}00272\ \mbox{\hyperlink{web__server__task_8c_a9c15047ba3df7b2591894a68c0d80923}{http\_get\_favicon\_handler}}(httpd\_req\_t\ *req);\ \textcolor{comment}{//\ Favicon\ handler\ (204\ No\ Content)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00273}00273\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1df4df74a1d4c242f385b8288f5243d4}{http\_get\_board\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00274}00274\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_abe969da6ebebc1b67cb06e9fc8bf3125}{http\_get\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00275}00275\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ad3a55001d3de8d4f584d7c64bed5f13d}{http\_get\_history\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00276}00276\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a97ff386657b49592624586a42a5f38e4}{http\_get\_captured\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00277}00277\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aeac0e653e9a5ab503812d90dac9623d5}{http\_get\_advantage\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00278}00278\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ab7d5385d7f569007c56c2c7a7fa7d6c3}{http\_get\_timer\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00279}00279\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a475710334bf70a033c8877844b4becf7}{http\_post\_timer\_config\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00280}00280\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a908aa1beee83594820b7c14d65c18278}{http\_post\_timer\_pause\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00281}00281\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a25c5ac166fb8596946684e3e3f9e0202}{http\_post\_timer\_resume\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00282}00282\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a3500d692620d566066b284e7678946c6}{http\_post\_timer\_reset\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00283}00283\ \textcolor{comment}{//\ static\ esp\_err\_t\ http\_post\_move\_handler(httpd\_req\_t\ *req);\ \ //\ VYPNUTO\ -\/\ web}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00284}00284\ \textcolor{comment}{//\ je\ 100\%\ READ-\/ONLY}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00286}00286\ \textcolor{comment}{//\ Handler\ pro\ Tahy\ (Move)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00287}00287\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aeb0c7739faebc37cc1a058f796ba24e9}{http\_post\_game\_move\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00289}00289\ \textcolor{comment}{//\ WiFi\ API\ handlery}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00290}00290\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a6493232eb46ff49eb44d894c8c4a1daf}{http\_post\_wifi\_config\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00291}00291\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a3d0bd2243c20416d59e0fba4fcd733a6}{http\_post\_wifi\_connect\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00292}00292\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1e666336ebbd7c13672804089a310f19}{http\_post\_wifi\_disconnect\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00293}00293\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a55bff9badf4ff599d4b2a8e272f9f318}{http\_post\_wifi\_clear\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00294}00294\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aedaea596294dea3bc9a8670d696e8290}{http\_get\_wifi\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00295}00295\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aedaea596294dea3bc9a8670d696e8290}{http\_get\_wifi\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00296}00296\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a860d44d17a7928a2ad3d09628635dd31}{http\_get\_web\_lock\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00298}00298\ \textcolor{comment}{//\ Handlery\ pro\ Demo\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00299}00299\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a94ab4e3ed0c9d94e819d7e4e9e66b9d8}{http\_post\_demo\_config\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00300}00300\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1b2ca6e53cae11465e829b142b4ee049}{http\_get\_demo\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00301}00301\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00302}00302\ \textcolor{comment}{//\ Handler\ pro\ Virtual\ Actions}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00303}00303\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_af36e989f916f7fc74dfbe1bbf52b3869}{http\_post\_game\_virtual\_action\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00304}00304\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aa9ed8d6dbc130fd18b7d409f4f742189}{http\_post\_game\_new\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00305}00305\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_afe04c688d88ea0650555b298507ea154}{http\_post\_game\_hint\_highlight\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00306}00306\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00307}00307\ \textcolor{comment}{//\ Handlery\ pro\ MQTT\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00308}00308\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a540c54cb24f48beccd6d626d89d25267}{http\_get\_mqtt\_status\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00309}00309\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a93314f062ff3d38822815ee5f6c2761d}{http\_post\_mqtt\_config\_handler}}(httpd\_req\_t\ *req);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00310}00310\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00311}00311\ \textcolor{comment}{//\ WiFi\ NVS\ funkce}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00312}\mbox{\hyperlink{web__server__task_8h_a0915923195ef83ed0a4a8ab10cfe3d24}{00312}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a0915923195ef83ed0a4a8ab10cfe3d24}{wifi\_load\_config\_from\_nvs}}(\textcolor{keywordtype}{char}\ *ssid,\ \textcolor{keywordtype}{size\_t}\ ssid\_len,\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00313}00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ password\_len)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00314}00314\ \ \ \textcolor{keywordflow}{if}\ (ssid\ ==\ NULL\ ||\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}\ ==\ NULL\ ||\ ssid\_len\ ==\ 0\ ||\ password\_len\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00315}00315\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ parameters\ for\ wifi\_load\_config\_from\_nvs"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00316}00316\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00317}00317\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00318}00318\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00319}00319\ \ \ nvs\_handle\_t\ nvs\_handle;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00320}00320\ \ \ esp\_err\_t\ ret\ =\ nvs\_open(\mbox{\hyperlink{web__server__task_8c_a3be9b58c528a64824c7b4847f5589837}{WIFI\_NVS\_NAMESPACE}},\ NVS\_READONLY,\ \&nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00321}00321\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00322}00322\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ open\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00323}00323\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00324}00324\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00326}00326\ \ \ \textcolor{comment}{//\ Nacist\ SSID}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00327}00327\ \ \ \textcolor{keywordtype}{size\_t}\ required\_size\ =\ ssid\_len;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00328}00328\ \ \ ret\ =\ nvs\_get\_str(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a4d51acbc4a1127232436f69fbbc18683}{WIFI\_NVS\_KEY\_SSID}},\ ssid,\ \&required\_size);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00329}00329\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00330}00330\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ get\ SSID\ from\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00331}00331\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00332}00332\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00333}00333\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00334}00334\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00335}00335\ \ \ \textcolor{comment}{//\ Nacist\ password}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00336}00336\ \ \ required\_size\ =\ password\_len;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00337}00337\ \ \ ret\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00338}00338\ \ \ \ \ \ \ nvs\_get\_str(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a434b6722326d8ef2da75d4d215ac6992}{WIFI\_NVS\_KEY\_PASSWORD}},\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ \&required\_size);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00339}00339\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00340}00340\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ get\ password\ from\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00341}00341\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00342}00342\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00343}00343\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00344}00344\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00345}00345\ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00346}00346\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ config\ loaded\ from\ NVS:\ SSID=\%s"{}},\ ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00347}00347\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00348}00348\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00349}00349\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00350}00350\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00351}00351\ \textcolor{comment}{//\ WiFi\ STA\ funkce\ (static\ pro\ interni\ pouziti)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00352}00352\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_adf48bce5b2fe5cafb51a5a5b928ca31d}{wifi\_get\_sta\_status\_json}}(\textcolor{keywordtype}{char}\ *buffer,\ \textcolor{keywordtype}{size\_t}\ buffer\_size);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00353}00353\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00354}00354\ \textcolor{comment}{//\ Gettery\ pro\ externi\ pouziti}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00355}\mbox{\hyperlink{web__server__task_8h_a2fb41e5bc5236e57873eb55f1eadb51c}{00355}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a2fb41e5bc5236e57873eb55f1eadb51c}{wifi\_get\_sta\_ip}}(\textcolor{keywordtype}{char}\ *buffer,\ \textcolor{keywordtype}{size\_t}\ max\_len)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00356}00356\ \ \ \textcolor{keywordflow}{if}\ (buffer\ ==\ NULL\ ||\ max\_len\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00357}00357\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00358}00358\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00359}00359\ \ \ strncpy(buffer,\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}},\ max\_len\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00360}00360\ \ \ buffer[max\_len\ -\/\ 1]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00361}00361\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00362}00362\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00363}00363\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00364}\mbox{\hyperlink{web__server__task_8h_a0dd2f78dc29e5c5cd031dcdf59d587e6}{00364}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a0dd2f78dc29e5c5cd031dcdf59d587e6}{wifi\_get\_sta\_ssid}}(\textcolor{keywordtype}{char}\ *buffer,\ \textcolor{keywordtype}{size\_t}\ max\_len)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00365}00365\ \ \ \textcolor{keywordflow}{if}\ (buffer\ ==\ NULL\ ||\ max\_len\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00366}00366\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00367}00367\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00368}00368\ \ \ strncpy(buffer,\ \mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}},\ max\_len\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00369}00369\ \ \ buffer[max\_len\ -\/\ 1]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00370}00370\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00371}00371\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00372}00372\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00373}00373\ \textcolor{comment}{//\ Externi\ WiFi\ funkce\ (pro\ UART\ prikazy)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00374}\mbox{\hyperlink{web__server__task_8h_acc62bf6d95aba71aede977266f96e962}{00374}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_acc62bf6d95aba71aede977266f96e962}{wifi\_save\_config\_to\_nvs}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *ssid,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00375}00375\ \ \ \textcolor{keywordflow}{if}\ (ssid\ ==\ NULL\ ||\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00376}00376\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ parameters:\ ssid\ or\ password\ is\ NULL"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00377}00377\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00378}00378\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00379}00379\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00380}00380\ \ \ \textcolor{keywordtype}{size\_t}\ ssid\_len\ =\ strlen(ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00381}00381\ \ \ \textcolor{keywordtype}{size\_t}\ password\_len\ =\ strlen(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00382}00382\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00383}00383\ \ \ \textcolor{keywordflow}{if}\ (ssid\_len\ ==\ 0\ ||\ ssid\_len\ >\ 32)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00384}00384\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ SSID\ length:\ \%zu\ (must\ be\ 1-\/32)"{}},\ ssid\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00385}00385\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00386}00386\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00387}00387\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00388}00388\ \ \ \textcolor{keywordflow}{if}\ (password\_len\ ==\ 0\ ||\ password\_len\ >\ 64)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00389}00389\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Invalid\ password\ length:\ \%zu\ (must\ be\ 1-\/64)"{}},\ password\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00390}00390\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00391}00391\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00392}00392\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00393}00393\ \ \ nvs\_handle\_t\ nvs\_handle;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00394}00394\ \ \ esp\_err\_t\ ret\ =\ nvs\_open(\mbox{\hyperlink{web__server__task_8c_a3be9b58c528a64824c7b4847f5589837}{WIFI\_NVS\_NAMESPACE}},\ NVS\_READWRITE,\ \&nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00395}00395\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00396}00396\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ open\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00397}00397\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00398}00398\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00400}00400\ \ \ ret\ =\ nvs\_set\_str(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a4d51acbc4a1127232436f69fbbc18683}{WIFI\_NVS\_KEY\_SSID}},\ ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00401}00401\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00402}00402\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ SSID\ in\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00403}00403\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00404}00404\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00405}00405\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00406}00406\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00407}00407\ \ \ ret\ =\ nvs\_set\_str(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a434b6722326d8ef2da75d4d215ac6992}{WIFI\_NVS\_KEY\_PASSWORD}},\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00408}00408\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00409}00409\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ password\ in\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00410}00410\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00411}00411\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00412}00412\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00413}00413\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00414}00414\ \ \ ret\ =\ nvs\_commit(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00415}00415\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00416}00416\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ commit\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00417}00417\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00418}00418\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00419}00419\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00420}00420\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00421}00421\ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00422}00422\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ config\ saved\ to\ NVS:\ SSID=\%s"{}},\ ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00423}00423\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00424}00424\ \ \ \textcolor{comment}{//\ Pokud\ je\ pripojeny\ a\ SSID\ se\ zmenil,\ odpojit}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00425}00425\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ \&\&\ strcmp(\mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}},\ ssid)\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00426}00426\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}SSID\ changed\ from\ '\%s'\ to\ '\%s',\ disconnecting..."{}},\ \mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00427}00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00428}00428\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a4a4813aac1f99fb986c17f6a4f5e40e2}{wifi\_disconnect\_sta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00429}00429\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00430}00430\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00431}00431\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00432}00432\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00433}00433\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00434}\mbox{\hyperlink{web__server__task_8h_ad3bda523e632b9d3152cdd73fe9d8d4c}{00434}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ad3bda523e632b9d3152cdd73fe9d8d4c}{wifi\_connect\_sta}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00435}00435\ \ \ \textcolor{comment}{//\ Kontrola:\ pokud\ uz\ je\ pripojeny,\ vratit\ uspech}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00436}00436\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00437}00437\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Already\ connected\ to\ WiFi:\ \%s\ (IP:\ \%s)"{}},\ \mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}},\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00438}00438\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00439}00439\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00440}00440\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00441}00441\ \ \ \textcolor{comment}{//\ Kontrola:\ pokud\ se\ prave\ pripojuje,\ vratit\ chybu\ (race\ condition}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00442}00442\ \ \ \textcolor{comment}{//\ protection)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00443}00443\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00444}00444\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ connection\ already\ in\ progress"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00445}00445\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_STATE;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00446}00446\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00447}00447\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00448}00448\ \ \ \textcolor{keywordtype}{char}\ ssid[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00449}00449\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[65]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00451}00451\ \ \ \textcolor{comment}{//\ Nacist\ konfiguraci\ z\ NVS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00452}00452\ \ \ esp\_err\_t\ ret\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00453}00453\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a0915923195ef83ed0a4a8ab10cfe3d24}{wifi\_load\_config\_from\_nvs}}(ssid,\ \textcolor{keyword}{sizeof}(ssid),\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00454}00454\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00455}00455\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ load\ WiFi\ config\ from\ NVS:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00456}00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00457}00457\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00458}00458\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00459}00459\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00460}00460\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Connecting\ to\ WiFi:\ SSID=\%s"{}},\ ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00461}00461\ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ Nastavit\ flag\ pripojovani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00462}00462\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00463}00463\ \ \ \textcolor{comment}{//\ Nastavit\ WiFi\ STA\ konfiguraci}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00464}00464\ \ \ wifi\_config\_t\ wifi\_config\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00465}00465\ \ \ strncpy((\textcolor{keywordtype}{char}\ *)wifi\_config.sta.ssid,\ ssid,\ \textcolor{keyword}{sizeof}(wifi\_config.sta.ssid)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00466}00466\ \ \ strncpy((\textcolor{keywordtype}{char}\ *)wifi\_config.sta.password,\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00467}00467\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(wifi\_config.sta.password)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00468}00468\ \ \ wifi\_config.sta.threshold.authmode\ =\ WIFI\_AUTH\_WPA2\_PSK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00469}00469\ \ \ wifi\_config.sta.pmf\_cfg.capable\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00470}00470\ \ \ wifi\_config.sta.pmf\_cfg.required\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00471}00471\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00472}00472\ \ \ ret\ =\ esp\_wifi\_set\_config(WIFI\_IF\_STA,\ \&wifi\_config);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00473}00473\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00474}00474\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ WiFi\ STA\ config:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00475}00475\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00476}00476\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00477}00477\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00478}00478\ \ \ \textcolor{comment}{//\ Spustit\ pripojeni}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00479}00479\ \ \ ret\ =\ esp\_wifi\_connect();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00480}00480\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00481}00481\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ start\ WiFi\ connection:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00482}00482\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00483}00483\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00484}00484\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00485}00485\ \ \ \textcolor{comment}{//\ Cekat\ na\ pripojeni\ (max\ 30\ sekund)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00486}00486\ \ \ \textcolor{keywordtype}{int}\ retry\_count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00487}00487\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_retries\ =\ 30;\ \textcolor{comment}{//\ 30\ sekund\ (1\ sekunda\ per\ retry)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00488}00488\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00489}00489\ \ \ \textcolor{keywordflow}{while}\ (retry\_count\ <\ max\_retries)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00490}00490\ \ \ \ \ \textcolor{comment}{//\ Resetovat\ WDT\ aby\ se\ zabranilo\ timeoutu\ (funkce\ muze\ blokovat\ az\ 30}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00491}00491\ \ \ \ \ \textcolor{comment}{//\ sekund)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00492}00492\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{web\_server\_task\_wdt\_reset\_safe}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00494}00494\ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(1000));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00495}00495\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00496}00496\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00497}00497\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ connected\ successfully!\ IP:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00498}00498\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Resetovat\ flag}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00499}00499\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00500}00500\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00501}00501\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00502}00502\ \ \ \ \ retry\_count++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00503}00503\ \ \ \ \ \textcolor{keywordflow}{if}\ (retry\_count\ \%\ 5\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00504}00504\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Waiting\ for\ WiFi\ connection...\ (\%d/\%d)"{}},\ retry\_count,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00505}00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ max\_retries);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00506}00506\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00507}00507\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00508}00508\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00509}00509\ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ connection\ timeout\ after\ \%d\ seconds"{}},\ max\_retries);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00510}00510\ \ \ esp\_wifi\_disconnect();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00511}00511\ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Resetovat\ flag\ pri\ timeout}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00512}00512\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00513}00513\ \ \ \textcolor{comment}{//\ Vratit\ specificky\ error\ code\ podle\ disconnection\ reason}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00514}00514\ \ \ \textcolor{comment}{//\ WIFI\_REASON\_NO\_AP\_FOUND\ =\ 201}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00515}00515\ \ \ \textcolor{comment}{//\ WIFI\_REASON\_AUTH\_FAIL\ =\ 202}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00516}00516\ \ \ \textcolor{comment}{//\ WIFI\_REASON\_ASSOC\_FAIL\ =\ 203}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00517}00517\ \ \ \textcolor{comment}{//\ WIFI\_REASON\_HANDSHAKE\_TIMEOUT\ =\ 204}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00518}00518\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ ==\ 201)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00519}00519\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NOT\_FOUND;\ \textcolor{comment}{//\ Network\ not\ found}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00520}00520\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ ==\ 202\ ||\ \mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ ==\ 203\ ||}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00521}00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ ==\ 204)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00522}00522\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_RESPONSE;\ \textcolor{comment}{//\ Authentication/association\ failed\ (wrong}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00523}00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ password)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00524}00524\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00525}00525\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00526}00526\ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_TIMEOUT;\ \textcolor{comment}{//\ General\ timeout}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00527}00527\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00528}00528\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00529}\mbox{\hyperlink{web__server__task_8h_a4a4813aac1f99fb986c17f6a4f5e40e2}{00529}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a4a4813aac1f99fb986c17f6a4f5e40e2}{wifi\_disconnect\_sta}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00530}00530\ \ \ \textcolor{comment}{//\ Pokud\ neni\ pripojeny\ a\ nepripojuje\ se,\ vratit\ uspech}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00531}00531\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ \&\&\ !\mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00532}00532\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ already\ disconnected"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00533}00533\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00534}00534\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00535}00535\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00536}00536\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Disconnecting\ from\ WiFi..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00537}00537\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00538}00538\ \ \ \textcolor{comment}{//\ Pokud\ se\ prave\ pripojuje,\ zrusit\ pripojeni}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00539}00539\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00540}00540\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Cancelling\ WiFi\ connection\ in\ progress"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00541}00541\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00542}00542\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00543}00543\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00544}00544\ \ \ esp\_err\_t\ ret\ =\ esp\_wifi\_disconnect();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00545}00545\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00546}00546\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ disconnect\ WiFi:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00547}00547\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00548}00548\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00549}00549\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00550}00550\ \ \ \textcolor{comment}{//\ Cekat\ na\ odpojeni\ (max\ 5\ sekund)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00551}00551\ \ \ \textcolor{keywordtype}{int}\ retry\_count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00552}00552\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ max\_retries\ =\ 5;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00553}00553\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00554}00554\ \ \ \textcolor{keywordflow}{while}\ (retry\_count\ <\ max\_retries\ \&\&\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00555}00555\ \ \ \ \ \textcolor{comment}{//\ Resetovat\ WDT\ aby\ se\ zabranilo\ timeoutu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00556}00556\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{web\_server\_task\_wdt\_reset\_safe}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00557}00557\ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(1000));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00558}00558\ \ \ \ \ retry\_count++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00559}00559\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00560}00560\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00561}00561\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00562}00562\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ disconnected\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00563}00563\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00564}00564\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ disconnect\ timeout,\ but\ continuing"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00565}00565\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00566}00566\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00567}00567\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00568}00568\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00569}00569\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00570}\mbox{\hyperlink{web__server__task_8h_a1b7f75613a5cab50704428a000610531}{00570}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1b7f75613a5cab50704428a000610531}{wifi\_clear\_config\_from\_nvs}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00571}00571\ \ \ nvs\_handle\_t\ nvs\_handle;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00572}00572\ \ \ esp\_err\_t\ ret\ =\ nvs\_open(\mbox{\hyperlink{web__server__task_8c_a3be9b58c528a64824c7b4847f5589837}{WIFI\_NVS\_NAMESPACE}},\ NVS\_READWRITE,\ \&nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00573}00573\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00574}00574\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ open\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00575}00575\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00576}00576\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00577}00577\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00578}00578\ \ \ ret\ =\ nvs\_erase\_key(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a4d51acbc4a1127232436f69fbbc18683}{WIFI\_NVS\_KEY\_SSID}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00579}00579\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK\ \&\&\ ret\ !=\ ESP\_ERR\_NVS\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00580}00580\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ erase\ SSID:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00581}00581\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00582}00582\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00583}00583\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00584}00584\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00585}00585\ \ \ ret\ =\ nvs\_erase\_key(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a434b6722326d8ef2da75d4d215ac6992}{WIFI\_NVS\_KEY\_PASSWORD}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00586}00586\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK\ \&\&\ ret\ !=\ ESP\_ERR\_NVS\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00587}00587\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ erase\ password:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00588}00588\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00589}00589\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00590}00590\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00591}00591\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00592}00592\ \ \ ret\ =\ nvs\_commit(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00593}00593\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00594}00594\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ commit\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00595}00595\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00596}00596\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00597}00597\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00598}00598\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00599}00599\ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00600}00600\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ config\ cleared\ from\ NVS"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00601}00601\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00602}00602\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00603}00603\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00604}00604\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00605}\mbox{\hyperlink{web__server__task_8h_a96cbfc09f923b4548a4bb4c63f70237f}{00605}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_a96cbfc09f923b4548a4bb4c63f70237f}{wifi\_is\_sta\_connected}}(\textcolor{keywordtype}{void})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}};\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00606}00606\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00607}00607\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00608}00608\ \textcolor{comment}{//\ WEB\ LOCK\ NVS\ FUNKCE}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00609}00609\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00610}00610\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00617}\mbox{\hyperlink{web__server__task_8c_a7a944cacc1ac5f2f8077a9244aaa44e3}{00617}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a7a944cacc1ac5f2f8077a9244aaa44e3}{web\_lock\_save\_to\_nvs}}(\textcolor{keywordtype}{bool}\ locked)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00618}00618\ \ \ nvs\_handle\_t\ nvs\_handle;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00619}00619\ \ \ esp\_err\_t\ ret\ =\ nvs\_open(\mbox{\hyperlink{web__server__task_8c_a94e74a2c614fc3d5ea5f639a55f2221b}{WEB\_NVS\_NAMESPACE}},\ NVS\_READWRITE,\ \&nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00620}00620\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00621}00621\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ open\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00622}00622\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00623}00623\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00624}00624\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00625}00625\ \ \ uint8\_t\ locked\_value\ =\ locked\ ?\ 1\ :\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00626}00626\ \ \ ret\ =\ nvs\_set\_blob(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a34ccd19a2d18b64a7db37e39c68dc704}{WEB\_NVS\_KEY\_LOCKED}},\ \&locked\_value,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00627}00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(locked\_value));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00628}00628\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00629}00629\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ web\ lock:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00630}00630\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00631}00631\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00632}00632\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00633}00633\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00634}00634\ \ \ ret\ =\ nvs\_commit(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00635}00635\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00636}00636\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ commit\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00637}00637\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00638}00638\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00639}00639\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00640}00640\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00641}00641\ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00642}00642\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ lock\ saved\ to\ NVS:\ \%s"{}},\ locked\ ?\ \textcolor{stringliteral}{"{}locked"{}}\ :\ \textcolor{stringliteral}{"{}unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00643}00643\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00644}00644\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00645}00645\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00646}00646\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00652}\mbox{\hyperlink{web__server__task_8h_afd6d2236bd4fcbbe7ccbbb0e7b4a71de}{00652}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_afd6d2236bd4fcbbe7ccbbb0e7b4a71de}{web\_lock\_load\_from\_nvs}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00653}00653\ \ \ nvs\_handle\_t\ nvs\_handle;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00654}00654\ \ \ esp\_err\_t\ ret\ =\ nvs\_open(\mbox{\hyperlink{web__server__task_8c_a94e74a2c614fc3d5ea5f639a55f2221b}{WEB\_NVS\_NAMESPACE}},\ NVS\_READONLY,\ \&nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00655}00655\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00656}00656\ \ \ \ \ \textcolor{comment}{//\ Pokud\ NVS\ namespace\ neexistuje,\ pouzit\ default\ (unlocked)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00657}00657\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_NVS\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00658}00658\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00659}00659\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00660}00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Web\ lock\ NVS\ namespace\ not\ found,\ using\ default:\ unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00661}00661\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00662}00662\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00663}00663\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ open\ NVS:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00664}00664\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00665}00665\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00666}00666\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00667}00667\ \ \ uint8\_t\ locked\_value\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00668}00668\ \ \ \textcolor{keywordtype}{size\_t}\ required\_size\ =\ \textcolor{keyword}{sizeof}(locked\_value);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00669}00669\ \ \ ret\ =\ nvs\_get\_blob(nvs\_handle,\ \mbox{\hyperlink{web__server__task_8c_a34ccd19a2d18b64a7db37e39c68dc704}{WEB\_NVS\_KEY\_LOCKED}},\ \&locked\_value,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00670}00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&required\_size);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00671}00671\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_NVS\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00672}00672\ \ \ \ \ \textcolor{comment}{//\ Klic\ neexistuje,\ pouzit\ default\ (unlocked)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00673}00673\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00674}00674\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ lock\ key\ not\ found,\ using\ default:\ unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00675}00675\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00676}00676\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00677}00677\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00678}00678\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ get\ web\ lock:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00679}00679\ \ \ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00680}00680\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00681}00681\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00682}00682\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00683}00683\ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ =\ (locked\_value\ !=\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00684}00684\ \ \ nvs\_close(nvs\_handle);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00685}00685\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ lock\ loaded\ from\ NVS:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00686}00686\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ ?\ \textcolor{stringliteral}{"{}locked"{}}\ :\ \textcolor{stringliteral}{"{}unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00687}00687\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00688}00688\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00689}00689\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00690}00690\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00696}\mbox{\hyperlink{web__server__task_8h_add53c7f34376bb856c868cab6321070b}{00696}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}(\textcolor{keywordtype}{void})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}};\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00697}00697\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00704}\mbox{\hyperlink{web__server__task_8h_a325753fb6460ffaa94c0c32237c8e7e1}{00704}}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a325753fb6460ffaa94c0c32237c8e7e1}{web\_lock\_set}}(\textcolor{keywordtype}{bool}\ locked)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00705}00705\ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ =\ locked;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00706}00706\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{web__server__task_8c_a7a944cacc1ac5f2f8077a9244aaa44e3}{web\_lock\_save\_to\_nvs}}(locked);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00707}00707\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00708}00708\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ interface\ \%s"{}},\ locked\ ?\ \textcolor{stringliteral}{"{}locked"{}}\ :\ \textcolor{stringliteral}{"{}unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00709}00709\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00710}00710\ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00711}00711\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00712}00712\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00713}00713\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00714}00714\ \textcolor{comment}{//\ WIFI\ APSTA\ SETUP}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00715}00715\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00716}00716\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00730}\mbox{\hyperlink{web__server__task_8c_a67b85e21ee1a283f1f8ba6b818e6bb3e}{00730}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a67b85e21ee1a283f1f8ba6b818e6bb3e}{wifi\_init\_apsta}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00731}00731\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ WiFi\ APSTA..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00732}00732\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00733}00733\ \ \ \textcolor{comment}{//\ Dulezite:\ Inicializovat\ netif\ PRED\ vytvorenim\ default\ netif}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00734}00734\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ netif..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00735}00735\ \ \ esp\_err\_t\ ret\ =\ esp\_netif\_init();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00736}00736\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK\ \&\&\ ret\ !=\ ESP\_ERR\_INVALID\_STATE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00737}00737\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ initialize\ netif:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00738}00738\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00739}00739\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00740}00740\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_INVALID\_STATE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00741}00741\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Netif\ already\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00742}00742\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00743}00743\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00744}00744\ \ \ \textcolor{comment}{//\ Dulezite:\ Vytvorit\ default\ event\ loop\ PRED\ inicializaci\ WiFi}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00745}00745\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Creating\ default\ event\ loop..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00746}00746\ \ \ ret\ =\ esp\_event\_loop\_create\_default();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00747}00747\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK\ \&\&\ ret\ !=\ ESP\_ERR\_INVALID\_STATE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00748}00748\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ default\ event\ loop:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00749}00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00750}00750\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00751}00751\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00752}00752\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_ERR\_INVALID\_STATE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00753}00753\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Event\ loop\ already\ created"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00754}00754\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00755}00755\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Event\ loop\ ready"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00756}00756\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00757}00757\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00758}00758\ \ \ \textcolor{comment}{//\ Vytvorit\ default\ netif\ pro\ AP}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00759}00759\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Creating\ default\ WiFi\ AP\ netif..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00760}00760\ \ \ \mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{ap\_netif}}\ =\ esp\_netif\_create\_default\_wifi\_ap();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00761}00761\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{ap\_netif}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00762}00762\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ AP\ netif"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00763}00763\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00764}00764\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00765}00765\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00766}00766\ \ \ \textcolor{comment}{//\ Vytvorit\ default\ netif\ pro\ STA}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00767}00767\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Creating\ default\ WiFi\ STA\ netif..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00768}00768\ \ \ \mbox{\hyperlink{web__server__task_8c_a8475209c3d16d25790fc4b67e18f3f57}{sta\_netif}}\ =\ esp\_netif\_create\_default\_wifi\_sta();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00769}00769\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a8475209c3d16d25790fc4b67e18f3f57}{sta\_netif}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00770}00770\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ STA\ netif"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00771}00771\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00772}00772\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00773}00773\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00774}00774\ \ \ \textcolor{comment}{//\ Inicializovat\ WiFi\ s\ vychozi\ konfiguraci}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00775}00775\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Initializing\ WiFi..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00776}00776\ \ \ wifi\_init\_config\_t\ cfg\ =\ WIFI\_INIT\_CONFIG\_DEFAULT();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00777}00777\ \ \ ret\ =\ esp\_wifi\_init(\&cfg);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00778}00778\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00779}00779\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ init\ failed:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00780}00780\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00781}00781\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00782}00782\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00783}00783\ \ \ \textcolor{comment}{//\ Registrovat\ WiFi\ event\ handler}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00784}00784\ \ \ ret\ =\ esp\_event\_handler\_instance\_register(WIFI\_EVENT,\ ESP\_EVENT\_ANY\_ID,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00785}00785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{wifi\_event\_handler}},\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00786}00786\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00787}00787\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ register\ WiFi\ event\ handler:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00788}00788\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00789}00789\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00790}00790\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00791}00791\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00792}00792\ \ \ \textcolor{comment}{//\ Registrovat\ IP\ event\ handler\ pro\ STA}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00793}00793\ \ \ ret\ =\ esp\_event\_handler\_instance\_register(IP\_EVENT,\ IP\_EVENT\_STA\_GOT\_IP,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00794}00794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{wifi\_event\_handler}},\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00795}00795\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00796}00796\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ register\ IP\ event\ handler:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00797}00797\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00798}00798\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00799}00799\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00800}00800\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00801}00801\ \ \ ret\ =\ esp\_event\_handler\_instance\_register(IP\_EVENT,\ IP\_EVENT\_STA\_LOST\_IP,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00802}00802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{wifi\_event\_handler}},\ NULL,\ NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00803}00803\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00804}00804\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ register\ IP\ lost\ event\ handler:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00805}00805\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00806}00806\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00807}00807\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00808}00808\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00809}00809\ \ \ \textcolor{comment}{//\ Konfigurovat\ WiFi\ AP}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00810}00810\ \ \ wifi\_config\_t\ wifi\_config\ =\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00811}00811\ \ \ \ \ \ \ .ap\ =\ \{.ssid\ =\ \mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{WIFI\_AP\_SSID}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00812}00812\ \ \ \ \ \ \ \ \ \ \ \ \ \ .ssid\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{WIFI\_AP\_SSID}}),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00813}00813\ \ \ \ \ \ \ \ \ \ \ \ \ \ .password\ =\ \mbox{\hyperlink{web__server__task_8c_ac80c92af8bf29cfe0442a28b6a7ec5a3}{WIFI\_AP\_PASSWORD}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00814}00814\ \ \ \ \ \ \ \ \ \ \ \ \ \ .channel\ =\ \mbox{\hyperlink{web__server__task_8c_ac0a1dba58f0e6d7f07d3050fa0291dd0}{WIFI\_AP\_CHANNEL}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00815}00815\ \ \ \ \ \ \ \ \ \ \ \ \ \ .max\_connection\ =\ \mbox{\hyperlink{web__server__task_8c_ab689d29cda2d350ce6652141df530fd0}{WIFI\_AP\_MAX\_CONNECTIONS}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00816}00816\ \ \ \ \ \ \ \ \ \ \ \ \ \ .authmode\ =\ WIFI\_AUTH\_WPA2\_PSK\},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00817}00817\ \ \ \};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00818}00818\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00819}00819\ \ \ \textcolor{comment}{//\ Nastavit\ WiFi\ mod\ na\ APSTA}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00820}00820\ \ \ ret\ =\ esp\_wifi\_set\_mode(WIFI\_MODE\_APSTA);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00821}00821\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00822}00822\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ WiFi\ mode:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00823}00823\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00824}00824\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00825}00825\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00826}00826\ \ \ \textcolor{comment}{//\ Nastavit\ WiFi\ konfiguraci}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00827}00827\ \ \ ret\ =\ esp\_wifi\_set\_config(WIFI\_IF\_AP,\ \&wifi\_config);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00828}00828\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00829}00829\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ set\ WiFi\ config:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00830}00830\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00831}00831\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00832}00832\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00833}00833\ \ \ \textcolor{comment}{//\ Spustit\ WiFi}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00834}00834\ \ \ ret\ =\ esp\_wifi\_start();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00835}00835\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00836}00836\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ start\ WiFi:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00837}00837\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00838}00838\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00839}00839\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00840}00840\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ APSTA\ initialized\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00841}00841\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}AP\ SSID:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{WIFI\_AP\_SSID}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00842}00842\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}AP\ Password:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_ac80c92af8bf29cfe0442a28b6a7ec5a3}{WIFI\_AP\_PASSWORD}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00843}00843\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}AP\ IP:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_a067a8d9ec14859ad6237320d2cec686a}{WIFI\_AP\_IP}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00844}00844\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA\ interface\ ready\ for\ connection"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00845}00845\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00846}00846\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00847}00847\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00848}00848\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00866}\mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{00866}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ac31e38637f7a5e5c8ce4d033b0955fec}{wifi\_event\_handler}}(\textcolor{keywordtype}{void}\ *arg,\ esp\_event\_base\_t\ event\_base,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00867}00867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ event\_id,\ \textcolor{keywordtype}{void}\ *event\_data)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00868}00868\ \ \ \textcolor{comment}{//\ AP\ eventy\ -\/\ pripojeni\ klientu\ k\ hotspotu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00869}00869\ \ \ \textcolor{keywordflow}{if}\ (event\_base\ ==\ WIFI\_EVENT\ \&\&\ event\_id\ ==\ WIFI\_EVENT\_AP\_STACONNECTED)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00870}00870\ \ \ \ \ wifi\_event\_ap\_staconnected\_t\ *\textcolor{keyword}{event}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00871}00871\ \ \ \ \ \ \ \ \ (wifi\_event\_ap\_staconnected\_t\ *)event\_data;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00872}00872\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}AP:\ Station\ connected,\ AID=\%d"{}},\ event-\/>aid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00873}00873\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}}++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00874}00874\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ WIFI\_EVENT\ \&\&}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00875}00875\ \ \ \ \ \ \ \ \ \ \ \ \ \ event\_id\ ==\ WIFI\_EVENT\_AP\_STADISCONNECTED)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00876}00876\ \ \ \ \ wifi\_event\_ap\_stadisconnected\_t\ *\textcolor{keyword}{event}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00877}00877\ \ \ \ \ \ \ \ \ (wifi\_event\_ap\_stadisconnected\_t\ *)event\_data;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00878}00878\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}AP:\ Station\ disconnected,\ AID=\%d"{}},\ event-\/>aid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00879}00879\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}}\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00880}00880\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}}-\/-\/;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00881}00881\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00882}00882\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00883}00883\ \ \ \textcolor{comment}{//\ STA\ eventy\ -\/\ pripojeni\ k\ WiFi\ siti}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00884}00884\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ WIFI\_EVENT\ \&\&\ event\_id\ ==\ WIFI\_EVENT\_STA\_START)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00885}00885\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA:\ Started"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00886}00886\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ WIFI\_EVENT\ \&\&\ event\_id\ ==\ WIFI\_EVENT\_STA\_CONNECTED)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00887}00887\ \ \ \ \ wifi\_event\_sta\_connected\_t\ *\textcolor{keyword}{event}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00888}00888\ \ \ \ \ \ \ \ \ (wifi\_event\_sta\_connected\_t\ *)event\_data;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00889}00889\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA:\ Connected\ to\ SSID:\ \%s"{}},\ event-\/>ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00890}00890\ \ \ \ \ strncpy(\mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}},\ (\textcolor{keywordtype}{char}\ *)event-\/>ssid,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00891}00891\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}}[\textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_a8e71a432a4ef4bac3ead0d19184bad9e}{sta\_ssid}})\ -\/\ 1]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00892}00892\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ WIFI\_EVENT\ \&\&}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00893}00893\ \ \ \ \ \ \ \ \ \ \ \ \ \ event\_id\ ==\ WIFI\_EVENT\_STA\_DISCONNECTED)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00894}00894\ \ \ \ \ wifi\_event\_sta\_disconnected\_t\ *\textcolor{keyword}{event}\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00895}00895\ \ \ \ \ \ \ \ \ (wifi\_event\_sta\_disconnected\_t\ *)event\_data;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00896}00896\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae6a105bb6087d94dc1dff9c49c17a3d8}{last\_disconnect\_reason}}\ =\ \textcolor{keyword}{event}-\/>reason;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00897}00897\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA:\ Disconnected,\ reason:\ \%d"{}},\ event-\/>reason);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00898}00898\ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00899}00899\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Resetovat\ flag\ pripojovani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00900}00900\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}[0]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00901}00901\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00902}00902\ \ \ \textcolor{comment}{//\ IP\ eventy\ -\/\ ziskani\ IP\ adresy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00903}00903\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ IP\_EVENT\ \&\&\ event\_id\ ==\ IP\_EVENT\_STA\_GOT\_IP)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00904}00904\ \ \ \ \ ip\_event\_got\_ip\_t\ *\textcolor{keyword}{event}\ =\ (ip\_event\_got\_ip\_t\ *)event\_data;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00905}00905\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA:\ Got\ IP:\ "{}}\ IPSTR,\ IP2STR(\&event-\/>ip\_info.ip));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00906}00906\ \ \ \ \ snprintf(\mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}),\ IPSTR,\ IP2STR(\&event-\/>ip\_info.ip));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00907}00907\ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00908}00908\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Resetovat\ flag\ pripojovani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00909}00909\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (event\_base\ ==\ IP\_EVENT\ \&\&\ event\_id\ ==\ IP\_EVENT\_STA\_LOST\_IP)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00910}00910\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}STA:\ Lost\ IP"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00911}00911\ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00912}00912\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae88cda9a42f3f54cda581d8f3df6a981}{sta\_connecting}}\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Resetovat\ flag\ pripojovani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00913}00913\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}[0]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00914}00914\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00915}00915\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00916}00916\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00917}00917\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00918}00918\ \textcolor{comment}{//\ WIFI\ NVS\ FUNKCE}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00919}00919\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00920}00920\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00921}00921\ \textcolor{comment}{//\ Duplicitni\ implementace\ odstranena\ -\/\ pouzivaji\ se\ externi\ funkce\ definovane}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00922}00922\ \textcolor{comment}{//\ vyse}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00923}00923\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00937}\mbox{\hyperlink{web__server__task_8c_adf48bce5b2fe5cafb51a5a5b928ca31d}{00937}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_adf48bce5b2fe5cafb51a5a5b928ca31d}{wifi\_get\_sta\_status\_json}}(\textcolor{keywordtype}{char}\ *buffer,\ \textcolor{keywordtype}{size\_t}\ buffer\_size)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00938}00938\ \ \ \textcolor{keywordflow}{if}\ (buffer\ ==\ NULL\ ||\ buffer\_size\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00939}00939\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00940}00940\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00941}00941\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00942}00942\ \ \ \textcolor{comment}{//\ Ziskat\ AP\ IP\ adresu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00943}00943\ \ \ esp\_netif\_ip\_info\_t\ ip\_info;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00944}00944\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *ap\_ip\_str\ =\ \mbox{\hyperlink{web__server__task_8c_a067a8d9ec14859ad6237320d2cec686a}{WIFI\_AP\_IP}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00945}00945\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{ap\_netif}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00946}00946\ \ \ \ \ esp\_err\_t\ ret\ =\ esp\_netif\_get\_ip\_info(\mbox{\hyperlink{web__server__task_8c_a91aeff1220701b1ecdc74ab211de8243}{ap\_netif}},\ \&ip\_info);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00947}00947\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00948}00948\ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ ap\_ip[16];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00949}00949\ \ \ \ \ \ \ snprintf(ap\_ip,\ \textcolor{keyword}{sizeof}(ap\_ip),\ IPSTR,\ IP2STR(\&ip\_info.ip));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00950}00950\ \ \ \ \ \ \ ap\_ip\_str\ =\ ap\_ip;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00951}00951\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00952}00952\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00953}00953\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00954}00954\ \ \ \textcolor{comment}{//\ Ziskat\ STA\ SSID\ z\ NVS\ (pokud\ existuje)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00955}00955\ \ \ \textcolor{keywordtype}{char}\ saved\_ssid[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00956}00956\ \ \ \textcolor{keywordtype}{char}\ saved\_password[65]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00957}00957\ \ \ esp\_err\_t\ nvs\_ret\ =\ \mbox{\hyperlink{web__server__task_8c_a0915923195ef83ed0a4a8ab10cfe3d24}{wifi\_load\_config\_from\_nvs}}(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00958}00958\ \ \ \ \ \ \ saved\_ssid,\ \textcolor{keyword}{sizeof}(saved\_ssid),\ saved\_password,\ \textcolor{keyword}{sizeof}(saved\_password));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00959}00959\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *sta\_ssid\_display\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00960}00960\ \ \ \ \ \ \ (nvs\_ret\ ==\ ESP\_OK)\ ?\ saved\_ssid\ :\ \textcolor{stringliteral}{"{}Not\ configured"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00961}00961\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00962}00962\ \ \ \textcolor{comment}{//\ Zjistit\ online\ status:\ STA\ connected\ a\ ma\ IP\ adresu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00963}00963\ \ \ \textcolor{keywordtype}{bool}\ online\ =\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ \&\&\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}[0]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00964}00964\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00965}00965\ \ \ \textcolor{keywordtype}{int}\ len\ =\ snprintf(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00966}00966\ \ \ \ \ \ \ buffer,\ buffer\_size,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00967}00967\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00968}00968\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}ap\_ssid\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00969}00969\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}ap\_ip\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00970}00970\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}ap\_clients\(\backslash\)"{}:\%lu,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00971}00971\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}sta\_ssid\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00972}00972\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}sta\_ip\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00973}00973\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}sta\_connected\(\backslash\)"{}:\%s,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00974}00974\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}online\(\backslash\)"{}:\%s,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00975}00975\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}locked\(\backslash\)"{}:\%s"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00976}00976\ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00977}00977\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{WIFI\_AP\_SSID}},\ ap\_ip\_str,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long})\mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}},\ sta\_ssid\_display,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00978}00978\ \ \ \ \ \ \ (\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ \&\&\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}[0]\ !=\ \textcolor{charliteral}{'\(\backslash\)0'})\ ?\ \mbox{\hyperlink{web__server__task_8c_aea67e706fb77d2b28047d62252b54088}{sta\_ip}}\ :\ \textcolor{stringliteral}{"{}Not\ connected"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00979}00979\ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},\ online\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00980}00980\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00981}00981\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00982}00982\ \ \ \textcolor{keywordflow}{if}\ (len\ <\ 0\ ||\ len\ >=\ (\textcolor{keywordtype}{int})buffer\_size)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00983}00983\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ WiFi\ status\ JSON\ (buffer\ too\ small)"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00984}00984\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_ERR\_NO\_MEM;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00985}00985\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00986}00986\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00987}00987\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00988}00988\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00989}00989\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00998}\mbox{\hyperlink{web__server__task_8c_a860d44d17a7928a2ad3d09628635dd31}{00998}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a860d44d17a7928a2ad3d09628635dd31}{http\_get\_web\_lock\_status\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l00999}00999\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/web/lock-\/status"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01000}01000\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01001}01001\ \ \ \textcolor{keywordtype}{char}\ response[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01002}01002\ \ \ \textcolor{keywordtype}{int}\ len\ =\ snprintf(response,\ \textcolor{keyword}{sizeof}(response),\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}locked\(\backslash\)"{}:\%s\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01003}01003\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01004}01004\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01005}01005\ \ \ \textcolor{keywordflow}{if}\ (len\ <\ 0\ ||\ len\ >=\ (\textcolor{keywordtype}{int})\textcolor{keyword}{sizeof}(response))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01006}01006\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01007}01007\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ response"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01008}01008\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01009}01009\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01010}01010\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01011}01011\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01012}01012\ \ \ httpd\_resp\_send(req,\ response,\ strlen(response));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01013}01013\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01014}01014\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01015}01015\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01016}01016\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01017}01017\ \textcolor{comment}{//\ MQTT\ API\ HANDLERS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01018}01018\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01019}01019\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01032}\mbox{\hyperlink{web__server__task_8c_a540c54cb24f48beccd6d626d89d25267}{01032}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a540c54cb24f48beccd6d626d89d25267}{http\_get\_mqtt\_status\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01033}01033\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/mqtt/status"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01034}01034\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01035}01035\ \ \ \textcolor{comment}{//\ Get\ MQTT\ config}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01036}01036\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}}[128]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01037}01037\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}[64]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01038}01038\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[64]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01039}01039\ \ \ uint16\_t\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}}\ =\ 1883;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01040}01040\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01041}01041\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{ha__light__task_8c_a0564ec8bd0c8c4e490ed84e22246df81}{mqtt\_get\_config}}(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}}),\ \&\mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}},\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01042}01042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}),\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01043}01043\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01044}01044\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01045}01045\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ MQTT\ config"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01046}01046\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01047}01047\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01048}01048\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01049}01049\ \ \ \textcolor{comment}{//\ Get\ WiFi\ STA\ status\ (required\ for\ MQTT)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01050}01050\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ =\ \mbox{\hyperlink{web__server__task_8c_a96cbfc09f923b4548a4bb4c63f70237f}{wifi\_is\_sta\_connected}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01051}01051\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01052}01052\ \ \ \textcolor{comment}{//\ Get\ MQTT\ connection\ status}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01053}01053\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{ha__light__task_8c_a6a99fbef218ac40fc0b77e18f0e9a708}{mqtt\_connected}}\ =\ \mbox{\hyperlink{ha__light__task_8c_a7f38fb48c581f40707dbed343cedb07c}{ha\_light\_is\_mqtt\_connected}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01054}01054\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01055}01055\ \ \ \textcolor{comment}{//\ Get\ HA\ mode}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01056}01056\ \ \ \mbox{\hyperlink{ha__light__task_8h_af2a3f8e1a020167cca1ba6c844ba3588}{ha\_mode\_t}}\ mode\ =\ \mbox{\hyperlink{ha__light__task_8c_a745b4de0bfe0480fe88c73e3d23170eb}{ha\_light\_get\_mode}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01057}01057\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *mode\_str\ =\ (mode\ ==\ \mbox{\hyperlink{ha__light__task_8h_af2a3f8e1a020167cca1ba6c844ba3588a51024b9ef0b703bb96a18c6971dd1fcb}{HA\_MODE\_GAME}})\ ?\ \textcolor{stringliteral}{"{}game"{}}\ :\ \textcolor{stringliteral}{"{}ha"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01058}01058\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01059}01059\ \ \ \textcolor{comment}{//\ Build\ JSON\ response}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01060}01060\ \ \ \textcolor{keywordtype}{char}\ response[512];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01061}01061\ \ \ \textcolor{keywordtype}{int}\ len\ =\ snprintf(response,\ \textcolor{keyword}{sizeof}(response),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01062}01062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01063}01063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}host\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01064}01064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}port\(\backslash\)"{}:\%d,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01065}01065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}username\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01066}01066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}password\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{},"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01067}01067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}wifi\_connected\(\backslash\)"{}:\%s,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01068}01068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}mqtt\_connected\(\backslash\)"{}:\%s,"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01069}01069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)"{}mode\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01070}01070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01071}01071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}},\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}},\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}[0]\ ?\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}\ :\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01072}01072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[0]\ ?\ \textcolor{stringliteral}{"{}***"{}}\ :\ \textcolor{stringliteral}{"{}"{}},\ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01073}01073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a6a99fbef218ac40fc0b77e18f0e9a708}{mqtt\_connected}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},\ mode\_str);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01074}01074\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01075}01075\ \ \ \textcolor{keywordflow}{if}\ (len\ <\ 0\ ||\ len\ >=\ (\textcolor{keywordtype}{int})\textcolor{keyword}{sizeof}(response))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01076}01076\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01077}01077\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ response"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01078}01078\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01079}01079\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01080}01080\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01081}01081\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01082}01082\ \ \ httpd\_resp\_send(req,\ response,\ strlen(response));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01083}01083\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01084}01084\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01085}01085\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01098}\mbox{\hyperlink{web__server__task_8c_a93314f062ff3d38822815ee5f6c2761d}{01098}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a93314f062ff3d38822815ee5f6c2761d}{http\_post\_mqtt\_config\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01099}01099\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/mqtt/config"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01100}01100\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01101}01101\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01102}01102\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01103}01103\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}MQTT\ config\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01104}01104\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01105}01105\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01106}01106\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01107}01107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01108}01108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01109}01109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01110}01110\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01111}01111\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01112}01112\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01113}01113\ \ \ \textcolor{comment}{//\ NaÄÃ­st\ JSON\ z\ request\ body}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01114}01114\ \ \ \textcolor{keywordtype}{char}\ content[512]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01115}01115\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01116}01116\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01117}01117\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01118}01118\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01119}01119\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}No\ data\ received\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01120}01120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01121}01121\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01122}01122\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01123}01123\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01124}01124\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01125}01125\ \ \ \textcolor{comment}{//\ Parsovat\ JSON\ -\/\ hledat\ "{}host"{},\ "{}port"{},\ "{}username"{},\ "{}password"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01126}01126\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}}[128]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01127}01127\ \ \ uint16\_t\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}}\ =\ 1883;\ \textcolor{comment}{//\ Default}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01128}01128\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}[64]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01129}01129\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[64]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01130}01130\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01131}01131\ \ \ \textcolor{comment}{//\ NajÃ­t\ "{}host"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01132}01132\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *host\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}host\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01133}01133\ \ \ \textcolor{keywordflow}{if}\ (host\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01134}01134\ \ \ \ \ host\_start\ =\ strchr(host\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01135}01135\ \ \ \ \ \textcolor{keywordflow}{if}\ (host\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01136}01136\ \ \ \ \ \ \ host\_start++;\ \textcolor{comment}{//\ PÅ™eskoÄit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01137}01137\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*host\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *host\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01138}01138\ \ \ \ \ \ \ \ \ host\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01139}01139\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *host\_end\ =\ strchr(host\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01140}01140\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (host\_end\ !=\ NULL\ \&\&\ host\_end\ >\ host\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01141}01141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ host\_end\ -\/\ host\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01142}01142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}}))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01143}01143\ \ \ \ \ \ \ \ \ \ \ strncpy(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}},\ host\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01144}01144\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01145}01145\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01146}01146\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01147}01147\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01148}01148\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01149}01149\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01150}01150\ \ \ \textcolor{comment}{//\ NajÃ­t\ "{}port"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01151}01151\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *port\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}port\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01152}01152\ \ \ \textcolor{keywordflow}{if}\ (port\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01153}01153\ \ \ \ \ port\_start\ =\ strchr(port\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01154}01154\ \ \ \ \ \textcolor{keywordflow}{if}\ (port\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01155}01155\ \ \ \ \ \ \ port\_start++;\ \textcolor{comment}{//\ PÅ™eskoÄit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01156}01156\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*port\_start\ ==\ \textcolor{charliteral}{'\ '})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01157}01157\ \ \ \ \ \ \ \ \ port\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01158}01158\ \ \ \ \ \ \ uint32\_t\ port\_val\ =\ strtoul(port\_start,\ NULL,\ 10);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01159}01159\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (port\_val\ >\ 0\ \&\&\ port\_val\ <=\ 65535)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01160}01160\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}}\ =\ (uint16\_t)port\_val;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01161}01161\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01162}01162\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01163}01163\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01164}01164\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01165}01165\ \ \ \textcolor{comment}{//\ NajÃ­t\ "{}username"{}\ (volitelnÃ©)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01166}01166\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *username\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}username\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01167}01167\ \ \ \textcolor{keywordflow}{if}\ (username\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01168}01168\ \ \ \ \ username\_start\ =\ strchr(username\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01169}01169\ \ \ \ \ \textcolor{keywordflow}{if}\ (username\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01170}01170\ \ \ \ \ \ \ username\_start++;\ \textcolor{comment}{//\ PÅ™eskoÄit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01171}01171\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*username\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *username\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01172}01172\ \ \ \ \ \ \ \ \ username\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01173}01173\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *username\_end\ =\ strchr(username\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01174}01174\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (username\_end\ !=\ NULL\ \&\&\ username\_end\ >\ username\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01175}01175\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ username\_end\ -\/\ username\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01176}01176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01177}01177\ \ \ \ \ \ \ \ \ \ \ strncpy(\mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}},\ username\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01178}01178\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01179}01179\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01180}01180\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01181}01181\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01182}01182\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01183}01183\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01184}01184\ \ \ \textcolor{comment}{//\ NajÃ­t\ "{}password"{}\ (volitelnÃ©)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01185}01185\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *password\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}password\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01186}01186\ \ \ \textcolor{keywordflow}{if}\ (password\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01187}01187\ \ \ \ \ password\_start\ =\ strchr(password\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01188}01188\ \ \ \ \ \textcolor{keywordflow}{if}\ (password\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01189}01189\ \ \ \ \ \ \ password\_start++;\ \textcolor{comment}{//\ PÅ™eskoÄit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01190}01190\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*password\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *password\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01191}01191\ \ \ \ \ \ \ \ \ password\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01192}01192\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *password\_end\ =\ strchr(password\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01193}01193\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (password\_end\ !=\ NULL\ \&\&\ password\_end\ >\ password\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01194}01194\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ password\_end\ -\/\ password\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01195}01195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01196}01196\ \ \ \ \ \ \ \ \ \ \ strncpy(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ password\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01197}01197\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01198}01198\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01199}01199\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01200}01200\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01201}01201\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01202}01202\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01203}01203\ \ \ \textcolor{comment}{//\ Validovat\ host}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01204}01204\ \ \ \textcolor{keywordflow}{if}\ (strlen(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}})\ ==\ 0\ ||\ strlen(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}})\ >\ 127)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01205}01205\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01206}01206\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01207}01207\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01208}01208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Invalid\ host\ (must\ be\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01209}01209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}1-\/127\ characters)\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01210}01210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01211}01211\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01212}01212\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01213}01213\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01214}01214\ \ \ \textcolor{comment}{//\ UloÅ¾it\ do\ NVS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01215}01215\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *username\_ptr\ =\ (strlen(\mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}})\ >\ 0)\ ?\ \mbox{\hyperlink{ha__light__task_8c_acfea5fbe8295640a1489399ceeb6c018}{username}}\ :\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01216}01216\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *password\_ptr\ =\ (strlen(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}})\ >\ 0)\ ?\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}\ :\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01217}01217\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01218}01218\ \ \ esp\_err\_t\ err\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01219}01219\ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_ad116a346513e475c7ffe3e5137a18d0d}{mqtt\_save\_config\_to\_nvs}}(\mbox{\hyperlink{ha__light__task_8c_a471a823d17bf7081fd4ebf84741f6758}{host}},\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}},\ username\_ptr,\ password\_ptr);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01220}01220\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01221}01221\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01222}01222\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01223}01223\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[256];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01224}01224\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01225}01225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Failed\ to\ save:\ \%s\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01226}01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(err));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01227}01227\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01228}01228\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01229}01229\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01230}01230\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01231}01231\ \ \ \textcolor{comment}{//\ Reinit\ MQTT\ client\ if\ WiFi\ STA\ is\ connected}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01232}01232\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *success\_message;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01233}01233\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a96cbfc09f923b4548a4bb4c63f70237f}{wifi\_is\_sta\_connected}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01234}01234\ \ \ \ \ esp\_err\_t\ reinit\_ret\ =\ \mbox{\hyperlink{ha__light__task_8c_aaa92358f60e1043bee0865be41fb1b2c}{ha\_light\_reinit\_mqtt}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01235}01235\ \ \ \ \ \textcolor{keywordflow}{if}\ (reinit\_ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01236}01236\ \ \ \ \ \ \ success\_message\ =\ \textcolor{stringliteral}{"{}MQTT\ configuration\ saved\ and\ client\ reinicialized\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01237}01237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}with\ new\ settings."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01238}01238\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01239}01239\ \ \ \ \ \ \ success\_message\ =\ \textcolor{stringliteral}{"{}MQTT\ configuration\ saved.\ Client\ reinit\ failed\ (will\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01240}01240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}reconnect\ on\ next\ WiFi\ connection)."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01241}01241\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01242}01242\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01243}01243\ \ \ \ \ success\_message\ =\ \textcolor{stringliteral}{"{}MQTT\ configuration\ saved.\ Client\ will\ reconnect\ with\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01244}01244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}new\ settings\ on\ next\ WiFi\ connection."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01245}01245\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01246}01246\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01247}01247\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01248}01248\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01249}01249\ \ \ \textcolor{keywordtype}{char}\ response[256];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01250}01250\ \ \ snprintf(response,\ \textcolor{keyword}{sizeof}(response),\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01251}01251\ \ \ \ \ \ \ \ \ \ \ \ success\_message);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01252}01252\ \ \ httpd\_resp\_send(req,\ response,\ strlen(response));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01253}01253\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01254}01254\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01255}01255\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01256}01256\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01257}01257\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01258}01258\ \textcolor{comment}{//\ DEMO\ MODE\ API\ HANDLERS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01259}01259\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01260}01260\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01261}\mbox{\hyperlink{web__server__task_8c_aa2b42e517ee6eb9665e1d10deb00c4ad}{01261}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aa2b42e517ee6eb9665e1d10deb00c4ad}{http\_post\_settings\_brightness\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01262}01262\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/settings/brightness"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01263}01263\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01264}01264\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01265}01265\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01266}01266\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ locked\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01267}01267\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01268}01268\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01269}01269\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01270}01270\ \ \ \textcolor{keywordtype}{char}\ content[100];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01271}01271\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01272}01272\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01273}01273\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01274}01274\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}No\ data"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01275}01275\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01276}01276\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01277}01277\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01278}01278\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01279}01279\ \ \ \textcolor{comment}{//\ Parse\ "{}brightness"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01280}01280\ \ \ \textcolor{keywordtype}{int}\ brightness\_val\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01281}01281\ \ \ \textcolor{keywordtype}{char}\ *ptr\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}brightness\(\backslash\)"{}:"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01282}01282\ \ \ \textcolor{keywordflow}{if}\ (ptr)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01283}01283\ \ \ \ \ \textcolor{keywordflow}{if}\ (sscanf(ptr,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}brightness\(\backslash\)"{}:\%d"{}},\ \&brightness\_val)\ ==\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01284}01284\ \ \ \ \ \ \ \textcolor{comment}{//\ Validovat}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01285}01285\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (brightness\_val\ <\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01286}01286\ \ \ \ \ \ \ \ \ brightness\_val\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01287}01287\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (brightness\_val\ >\ 100)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01288}01288\ \ \ \ \ \ \ \ \ brightness\_val\ =\ 100;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01289}01289\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01290}01290\ \ \ \ \ \ \ \textcolor{comment}{//\ 1.\ Nastavit\ LED\ driver\ hned}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01291}01291\ \ \ \ \ \ \ \mbox{\hyperlink{led__task_8h_aba7d182926787e311733fb41353c196e}{led\_set\_brightness\_global}}((uint8\_t)brightness\_val);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01292}01292\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01293}01293\ \ \ \ \ \ \ \textcolor{comment}{//\ 2.\ Ulozit\ do\ configu\ (load-\/modify-\/save)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01294}01294\ \ \ \ \ \ \ \mbox{\hyperlink{structsystem__config__t}{system\_config\_t}}\ config;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01295}01295\ \ \ \ \ \ \ \textcolor{comment}{//\ Default\ init\ v\ pripade\ chyby\ loadu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01296}01296\ \ \ \ \ \ \ config.\mbox{\hyperlink{structsystem__config__t_a05bbd482d93891e6ed1ec8d1068309d7}{brightness\_level}}\ =\ 50;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01297}01297\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01298}01298\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{config__manager_8c_a75038f5476c578ca0c192468d004160c}{config\_load\_from\_nvs}}(\&config)\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01299}01299\ \ \ \ \ \ \ \ \ config.\mbox{\hyperlink{structsystem__config__t_a05bbd482d93891e6ed1ec8d1068309d7}{brightness\_level}}\ =\ (uint8\_t)brightness\_val;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01300}01300\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{config__manager_8c_a24aceb1224555fd605ab85c9b0842357}{config\_save\_to\_nvs}}(\&config);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01301}01301\ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01302}01302\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Config\ neexistuje,\ vytvorit\ novy\ s\ defaulty\ a\ novym\ jasem}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01303}01303\ \ \ \ \ \ \ \ \ config.\mbox{\hyperlink{structsystem__config__t_a05bbd482d93891e6ed1ec8d1068309d7}{brightness\_level}}\ =\ (uint8\_t)brightness\_val;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01304}01304\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ostatni\ defaulty\ (pokud\ config\_load\ selhal,\ config\ struct\ je}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01305}01305\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ nedefinovany,\ ale\ my\ ukladame\ jen\ brightness\ do\ NVS\ v\ teto\ verzi}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01306}01306\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ config\_manageru?\ Ne,\ config\_manager\ uklada\ celou\ struct?}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01307}01307\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ config\_save\_to\_nvs\ uklada\ key-\/value\ pairs.\ Takze\ je\ to\ bezpecne.}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01308}01308\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{config__manager_8c_a24aceb1224555fd605ab85c9b0842357}{config\_save\_to\_nvs}}(\&config);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01309}01309\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01310}01310\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01311}01311\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ab17ad7844a24ac3ce03f648f18a3c976}{cached\_brightness}}\ =\ (uint8\_t)brightness\_val;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01312}01312\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a10437ead7390b9e656788a7546bb15b2}{cached\_brightness\_valid}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01313}01313\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Brightness\ updated\ to\ \%d\%\%\ via\ Web\ UI"{}},\ brightness\_val);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01314}01314\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01315}01315\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01316}01316\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01317}01317\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01318}01318\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01319}01319\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01320}01320\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01321}01321\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01322}\mbox{\hyperlink{web__server__task_8c_a94ab4e3ed0c9d94e819d7e4e9e66b9d8}{01322}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a94ab4e3ed0c9d94e819d7e4e9e66b9d8}{http\_post\_demo\_config\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01323}01323\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/demo/config"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01324}01324\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01325}01325\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01326}01326\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01327}01327\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ locked\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01328}01328\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01329}01329\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01330}01330\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01331}01331\ \ \ \textcolor{keywordtype}{char}\ content[100];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01332}01332\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01333}01333\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01334}01334\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01335}01335\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}No\ data"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01336}01336\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01337}01337\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01338}01338\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01339}01339\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01340}01340\ \ \ \textcolor{comment}{//\ Parse\ "{}enabled"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01341}01341\ \ \ \textcolor{keywordtype}{bool}\ enabled\ =\ (strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}enabled\(\backslash\)"{}:true"{}})\ !=\ NULL)\ ||}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01342}01342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}enabled\(\backslash\)"{}:\ true"{}})\ !=\ NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01343}01343\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01344}01344\ \ \ \textcolor{comment}{//\ Parse\ "{}speed\_ms"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01345}01345\ \ \ \textcolor{keywordtype}{char}\ *speed\_ptr\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}speed\_ms\(\backslash\)"{}:"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01346}01346\ \ \ \textcolor{keywordflow}{if}\ (speed\_ptr)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01347}01347\ \ \ \ \ \textcolor{keywordtype}{int}\ speed\_val;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01348}01348\ \ \ \ \ \textcolor{keywordflow}{if}\ (sscanf(speed\_ptr,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}speed\_ms\(\backslash\)"{}:\%d"{}},\ \&speed\_val)\ ==\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01349}01349\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a570c98f23cd91c36ce62964733732cdf}{set\_demo\_speed\_ms}}((uint32\_t)speed\_val);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01350}01350\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01351}01351\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01352}01352\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01353}01353\ \ \ \mbox{\hyperlink{web__server__task_8c_a6e05201e522856e3cd984bade768be7e}{toggle\_demo\_mode}}(enabled);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01354}01354\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01355}01355\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01356}01356\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01357}01357\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01358}01358\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01359}01359\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01360}\mbox{\hyperlink{web__server__task_8c_a35259616c06dac2e639ca26124109c70}{01360}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a35259616c06dac2e639ca26124109c70}{http\_post\_demo\_start\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01361}01361\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/demo/start"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01362}01362\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01363}01363\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01364}01364\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01365}01365\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ locked\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01366}01366\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01367}01367\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01368}01368\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01369}01369\ \ \ \mbox{\hyperlink{web__server__task_8c_a6e05201e522856e3cd984bade768be7e}{toggle\_demo\_mode}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01370}01370\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01371}01371\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01372}01372\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Demo\ started\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01373}01373\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01374}01374\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01375}01375\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01376}\mbox{\hyperlink{web__server__task_8c_a1b2ca6e53cae11465e829b142b4ee049}{01376}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1b2ca6e53cae11465e829b142b4ee049}{http\_get\_demo\_status\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01377}01377\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/demo/status"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01378}01378\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01379}01379\ \ \ \textcolor{keywordtype}{bool}\ enabled\ =\ \mbox{\hyperlink{web__server__task_8c_ad190bb08e29e63b6f04a3715dae88706}{is\_demo\_mode\_enabled}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01380}01380\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01381}01381\ \ \ \textcolor{keywordtype}{char}\ resp\_str[64];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01382}01382\ \ \ snprintf(resp\_str,\ \textcolor{keyword}{sizeof}(resp\_str),\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}enabled\(\backslash\)"{}:\%s\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01383}01383\ \ \ \ \ \ \ \ \ \ \ \ enabled\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01384}01384\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01385}01385\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01386}01386\ \ \ httpd\_resp\_send(req,\ resp\_str,\ strlen(resp\_str));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01387}01387\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01388}01388\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01389}01389\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01390}01390\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01391}01391\ \textcolor{comment}{//\ HTTP\ SERVER\ SETUP}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01392}01392\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01393}01393\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01410}\mbox{\hyperlink{web__server__task_8c_a336ec184b985a0af307c5ad81f06ae9e}{01410}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a336ec184b985a0af307c5ad81f06ae9e}{start\_http\_server}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01411}01411\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01412}01412\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}HTTP\ server\ already\ running"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01413}01413\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01414}01414\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01415}01415\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01416}01416\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Starting\ HTTP\ server..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01417}01417\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01418}01418\ \ \ \textcolor{comment}{//\ Konfigurovat\ HTTP\ server}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01419}01419\ \ \ httpd\_config\_t\ config\ =\ HTTPD\_DEFAULT\_CONFIG();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01420}01420\ \ \ config.server\_port\ =\ \mbox{\hyperlink{web__server__task_8c_a4f905ddd4da1a3e205a8935f4babb25b}{HTTP\_SERVER\_PORT}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01421}01421\ \ \ config.max\_uri\_handlers\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01422}01422\ \ \ \ \ \ \ 32;\ \textcolor{comment}{//\ Increased\ to\ 32\ to\ accommodate\ all\ endpoints\ (currently\ \string~25)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01423}01423\ \ \ config.max\_open\_sockets\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01424}01424\ \ \ \ \ \ \ 10;\ \textcolor{comment}{//\ LWIP\_MAX\_SOCKETS(16)\ -\/\ HTTP\_INTERNAL(3)\ -\/\ MQTT(1)\ -\/\ SYSTEM(2)\ =\ 10}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01425}01425\ \ \ config.lru\_purge\_enable\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ CRITICAL:\ Disabled\ to\ prevent\ socket}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01426}01426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ closure\ during\ chunked\ transfer}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01427}01427\ \ \ config.recv\_wait\_timeout\ =\ 10;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01428}01428\ \ \ config.send\_wait\_timeout\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01429}01429\ \ \ \ \ \ \ 3000;\ \textcolor{comment}{//\ 3\ seconds\ timeout\ for\ reliable\ chunked\ transfer\ (8\ chunks,\ \string~250ms}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01430}01430\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ transfer\ time\ +\ network\ overhead)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01431}01431\ \ \ config.max\_resp\_headers\ =\ 8;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01432}01432\ \ \ config.backlog\_conn\ =\ 5;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01433}01433\ \ \ config.stack\_size\ =\ 8192;\ \textcolor{comment}{//\ Zvysena\ velikost\ stacku\ pro\ HTTP\ server\ task}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01434}01434\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01435}01435\ \ \ \textcolor{comment}{//\ Spustit\ HTTP\ server}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01436}01436\ \ \ esp\_err\_t\ ret\ =\ httpd\_start(\&\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&config);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01437}01437\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01438}01438\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ start\ HTTP\ server:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01439}01439\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01440}01440\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01441}01441\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01442}01442\ \ \ \textcolor{comment}{//\ Registrovat\ URI\ handlery}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01443}01443\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Registering\ URI\ handlers..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01444}01444\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01445}01445\ \ \ \textcolor{comment}{//\ Handler\ pro\ Chess\ JavaScript\ soubor}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01446}01446\ \ \ httpd\_uri\_t\ chess\_js\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/chess\_app.js"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01447}01447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01448}01448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_afeadcd80458be0b8f189b25986dc9e72}{http\_get\_chess\_js\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01449}01449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01450}01450\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&chess\_js\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01451}01451\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01452}01452\ \ \ \textcolor{comment}{//\ Handler\ pro\ testovaci\ stranku\ (minimalni\ timer\ test)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01453}01453\ \ \ httpd\_uri\_t\ test\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/test"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01454}01454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01455}01455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_ae7ac8a7695f85cdf9c15b8045b2813b3}{http\_get\_test\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01456}01456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01457}01457\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&test\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01458}01458\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01459}01459\ \ \ \textcolor{comment}{//\ Handler\ pro\ root\ (HTML\ stranka)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01460}01460\ \ \ httpd\_uri\_t\ root\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01461}01461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01462}01462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_ac4be9f5032c10525d0b61493e402b758}{http\_get\_root\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01463}01463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01464}01464\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&root\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01465}01465\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01466}01466\ \ \ \textcolor{comment}{//\ Handlery\ pro\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01467}01467\ \ \ httpd\_uri\_t\ board\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/board"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01468}01468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01469}01469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a1df4df74a1d4c242f385b8288f5243d4}{http\_get\_board\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01470}01470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01471}01471\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&board\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01472}01472\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01473}01473\ \ \ httpd\_uri\_t\ status\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/status"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01474}01474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01475}01475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_abe969da6ebebc1b67cb06e9fc8bf3125}{http\_get\_status\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01476}01476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01477}01477\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&status\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01478}01478\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01479}01479\ \ \ httpd\_uri\_t\ history\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/history"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01480}01480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01481}01481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_ad3a55001d3de8d4f584d7c64bed5f13d}{http\_get\_history\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01482}01482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01483}01483\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&history\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01484}01484\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01485}01485\ \ \ httpd\_uri\_t\ captured\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/captured"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01486}01486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01487}01487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a97ff386657b49592624586a42a5f38e4}{http\_get\_captured\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01488}01488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01489}01489\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&captured\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01490}01490\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01491}01491\ \ \ httpd\_uri\_t\ advantage\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/advantage"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01492}01492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01493}01493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_aeac0e653e9a5ab503812d90dac9623d5}{http\_get\_advantage\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01494}01494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01495}01495\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&advantage\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01496}01496\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01497}01497\ \ \ \textcolor{comment}{//\ Handlery\ pro\ Timer\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01498}01498\ \ \ httpd\_uri\_t\ timer\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/timer"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01499}01499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01500}01500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_ab7d5385d7f569007c56c2c7a7fa7d6c3}{http\_get\_timer\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01501}01501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01502}01502\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&timer\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01503}01503\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01504}01504\ \ \ \textcolor{comment}{//\ Handler\ pro\ favicon.ico\ (silence\ 404\ warnings)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01505}01505\ \ \ httpd\_uri\_t\ favicon\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/favicon.ico"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01506}01506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01507}01507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a9c15047ba3df7b2591894a68c0d80923}{http\_get\_favicon\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01508}01508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01509}01509\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&favicon\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01510}01510\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01511}01511\ \ \ httpd\_uri\_t\ timer\_config\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/timer/config"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01512}01512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01513}01513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a475710334bf70a033c8877844b4becf7}{http\_post\_timer\_config\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01514}01514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01515}01515\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&timer\_config\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01516}01516\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01517}01517\ \ \ httpd\_uri\_t\ settings\_brightness\_uri\ =\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01518}01518\ \ \ \ \ \ \ .uri\ =\ \textcolor{stringliteral}{"{}/api/settings/brightness"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01519}01519\ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01520}01520\ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_aa2b42e517ee6eb9665e1d10deb00c4ad}{http\_post\_settings\_brightness\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01521}01521\ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01522}01522\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&settings\_brightness\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01523}01523\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01524}01524\ \ \ httpd\_uri\_t\ timer\_pause\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/timer/pause"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01525}01525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01526}01526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a908aa1beee83594820b7c14d65c18278}{http\_post\_timer\_pause\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01527}01527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01528}01528\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&timer\_pause\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01529}01529\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01530}01530\ \ \ httpd\_uri\_t\ timer\_resume\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/timer/resume"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01531}01531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01532}01532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a25c5ac166fb8596946684e3e3f9e0202}{http\_post\_timer\_resume\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01533}01533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01534}01534\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&timer\_resume\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01535}01535\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01536}01536\ \ \ httpd\_uri\_t\ timer\_reset\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/timer/reset"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01537}01537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01538}01538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a3500d692620d566066b284e7678946c6}{http\_post\_timer\_reset\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01539}01539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01540}01540\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&timer\_reset\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01541}01541\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01542}01542\ \ \ \textcolor{comment}{//\ Handlery\ pro\ WiFi\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01543}01543\ \ \ httpd\_uri\_t\ wifi\_config\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/wifi/config"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01544}01544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01545}01545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a6493232eb46ff49eb44d894c8c4a1daf}{http\_post\_wifi\_config\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01546}01546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01547}01547\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&wifi\_config\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01548}01548\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01549}01549\ \ \ httpd\_uri\_t\ wifi\_connect\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/wifi/connect"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01550}01550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01551}01551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a3d0bd2243c20416d59e0fba4fcd733a6}{http\_post\_wifi\_connect\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01552}01552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01553}01553\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&wifi\_connect\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01554}01554\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01555}01555\ \ \ httpd\_uri\_t\ wifi\_disconnect\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/wifi/disconnect"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01556}01556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01557}01557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01558}01558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a1e666336ebbd7c13672804089a310f19}{http\_post\_wifi\_disconnect\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01559}01559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01560}01560\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&wifi\_disconnect\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01561}01561\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01562}01562\ \ \ httpd\_uri\_t\ wifi\_clear\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/wifi/clear"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01563}01563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01564}01564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a55bff9badf4ff599d4b2a8e272f9f318}{http\_post\_wifi\_clear\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01565}01565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01566}01566\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&wifi\_clear\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01567}01567\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01568}01568\ \ \ httpd\_uri\_t\ wifi\_status\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/wifi/status"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01569}01569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01570}01570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_aedaea596294dea3bc9a8670d696e8290}{http\_get\_wifi\_status\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01571}01571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01572}01572\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&wifi\_status\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01573}01573\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01574}01574\ \ \ \textcolor{comment}{//\ Handler\ pro\ web\ lock\ status}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01575}01575\ \ \ httpd\_uri\_t\ web\_lock\_status\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/web/lock-\/status"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01576}01576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01577}01577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01578}01578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a860d44d17a7928a2ad3d09628635dd31}{http\_get\_web\_lock\_status\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01579}01579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01580}01580\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&web\_lock\_status\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01581}01581\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01582}01582\ \ \ \textcolor{comment}{//\ Handlery\ pro\ Demo\ Mode}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01583}01583\ \ \ httpd\_uri\_t\ demo\_config\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/demo/config"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01584}01584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01585}01585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a94ab4e3ed0c9d94e819d7e4e9e66b9d8}{http\_post\_demo\_config\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01586}01586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01587}01587\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&demo\_config\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01588}01588\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01589}01589\ \ \ httpd\_uri\_t\ demo\_start\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/demo/start"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01590}01590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01591}01591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a35259616c06dac2e639ca26124109c70}{http\_post\_demo\_start\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01592}01592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01593}01593\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&demo\_start\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01594}01594\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01595}01595\ \ \ httpd\_uri\_t\ demo\_status\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/demo/status"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01596}01596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01597}01597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a1b2ca6e53cae11465e829b142b4ee049}{http\_get\_demo\_status\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01598}01598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01599}01599\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&demo\_status\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01600}01600\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01601}01601\ \ \ \textcolor{comment}{//\ Handler\ pro\ Tahy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01602}01602\ \ \ httpd\_uri\_t\ move\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/move"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01603}01603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01604}01604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_aeb0c7739faebc37cc1a058f796ba24e9}{http\_post\_game\_move\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01605}01605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01606}01606\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&move\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01607}01607\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01608}01608\ \ \ \textcolor{comment}{//\ Handler\ pro\ Virtual\ Actions\ (Remote\ Control)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01609}01609\ \ \ httpd\_uri\_t\ virtual\_action\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/game/virtual\_action"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01610}01610\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01611}01611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01612}01612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_af36e989f916f7fc74dfbe1bbf52b3869}{http\_post\_game\_virtual\_action\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01613}01613\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01614}01614\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&virtual\_action\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01615}01615\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01616}01616\ \ \ \textcolor{comment}{//\ Handler\ pro\ New\ Game}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01617}01617\ \ \ httpd\_uri\_t\ new\_game\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/game/new"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01618}01618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01619}01619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_aa9ed8d6dbc130fd18b7d409f4f742189}{http\_post\_game\_new\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01620}01620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01621}01621\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&new\_game\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01622}01622\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01623}01623\ \ \ \textcolor{comment}{//\ Handler\ pro\ Hint\ highlight\ (LED)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01624}01624\ \ \ httpd\_uri\_t\ hint\_highlight\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/game/hint\_highlight"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01625}01625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01626}01626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_afe04c688d88ea0650555b298507ea154}{http\_post\_game\_hint\_highlight\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01627}01627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01628}01628\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&hint\_highlight\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01629}01629\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01630}01630\ \ \ \textcolor{comment}{//\ Handlery\ pro\ MQTT\ API}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01631}01631\ \ \ httpd\_uri\_t\ mqtt\_status\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/mqtt/status"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01632}01632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_GET,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01633}01633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a540c54cb24f48beccd6d626d89d25267}{http\_get\_mqtt\_status\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01634}01634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01635}01635\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&mqtt\_status\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01636}01636\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01637}01637\ \ \ httpd\_uri\_t\ mqtt\_config\_uri\ =\ \{.uri\ =\ \textcolor{stringliteral}{"{}/api/mqtt/config"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01638}01638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .method\ =\ HTTP\_POST,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01639}01639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .handler\ =\ \mbox{\hyperlink{web__server__task_8c_a93314f062ff3d38822815ee5f6c2761d}{http\_post\_mqtt\_config\_handler}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01640}01640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .user\_ctx\ =\ NULL\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01641}01641\ \ \ httpd\_register\_uri\_handler(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}},\ \&mqtt\_config\_uri);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01642}01642\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01643}01643\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}HTTP\ server\ started\ successfully\ on\ port\ \%d"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01644}01644\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a4f905ddd4da1a3e205a8935f4babb25b}{HTTP\_SERVER\_PORT}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01645}01645\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01646}01646\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01647}01647\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01648}01648\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01658}\mbox{\hyperlink{web__server__task_8c_a12a90512dcfbad1de2475bba47af2c18}{01658}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a12a90512dcfbad1de2475bba47af2c18}{stop\_http\_server}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01659}01659\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01660}01660\ \ \ \ \ httpd\_stop(\mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01661}01661\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a19b0be42f085a9e121651e3a21813ce8}{httpd\_handle}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01662}01662\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}HTTP\ server\ stopped"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01663}01663\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01664}01664\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01665}01665\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01666}01666\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01667}01667\ \textcolor{comment}{//\ REST\ API\ HANDLERS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01668}01668\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01669}01669\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01670}\mbox{\hyperlink{web__server__task_8c_a1df4df74a1d4c242f385b8288f5243d4}{01670}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1df4df74a1d4c242f385b8288f5243d4}{http\_get\_board\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01671}01671\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/board"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01672}01672\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01673}01673\ \ \ \textcolor{comment}{//\ Ziskat\ stav\ sachovnice\ z\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01674}01674\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_a6199d3c51c2ba715c27b7be7428c61b7}{game\_get\_board\_json}}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01675}01675\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01676}01676\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01677}01677\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ board\ state"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01678}01678\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01679}01679\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01680}01680\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01681}01681\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01682}01682\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ strlen(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01683}01683\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01684}01684\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01685}01685\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01686}01686\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01687}\mbox{\hyperlink{web__server__task_8c_abe969da6ebebc1b67cb06e9fc8bf3125}{01687}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_abe969da6ebebc1b67cb06e9fc8bf3125}{http\_get\_status\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01688}01688\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/status"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01689}01689\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01690}01690\ \ \ \textcolor{comment}{//\ Ziskat\ stav\ hry\ z\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01691}01691\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_abdf3ba446d87db43c26b6c51275a521e}{game\_get\_status\_json}}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01692}01692\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01693}01693\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01694}01694\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ game\ status"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01695}01695\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01696}01696\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01697}01697\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01698}01698\ \ \ \textcolor{comment}{//\ INJECT\ WEB\ STATUS\ FIELDS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01699}01699\ \ \ \textcolor{comment}{//\ Game\ task\ doesn't\ know\ about\ web\ lock\ or\ wifi,\ so\ we\ add\ it\ here.}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01700}01700\ \ \ \textcolor{comment}{//\ Brightness:\ pouzit\ cache\ (nepristupovat\ k\ NVS\ na\ kazdy\ request\ â€“\ stabilita)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01701}01701\ \ \ \textcolor{keywordtype}{char}\ *last\_brace\ =\ strrchr(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{charliteral}{'\}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01702}01702\ \ \ \textcolor{keywordflow}{if}\ (last\_brace)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01703}01703\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ remaining\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}})\ -\/\ (\textcolor{keywordtype}{size\_t})(last\_brace\ -\/\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01704}01704\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{ha__light__task_8c_a4313c9563516f94387762ab05763456b}{b}}\ =\ \mbox{\hyperlink{web__server__task_8c_a10437ead7390b9e656788a7546bb15b2}{cached\_brightness\_valid}}\ ?\ \mbox{\hyperlink{web__server__task_8c_ab17ad7844a24ac3ce03f648f18a3c976}{cached\_brightness}}\ :\ 50;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01705}01705\ \ \ \ \ snprintf(last\_brace,\ remaining,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01706}01706\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{},\(\backslash\)"{}web\_locked\(\backslash\)"{}:\%s,\(\backslash\)"{}internet\_connected\(\backslash\)"{}:\%s,\(\backslash\)"{}brightness\(\backslash\)"{}:\%d\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01707}01707\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}()\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01708}01708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}}\ ?\ \textcolor{stringliteral}{"{}true"{}}\ :\ \textcolor{stringliteral}{"{}false"{}},\ (\textcolor{keywordtype}{int})\mbox{\hyperlink{ha__light__task_8c_a4313c9563516f94387762ab05763456b}{b}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01709}01709\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01710}01710\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01711}01711\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01712}01712\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ strlen(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01713}01713\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01714}01714\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01715}01715\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01716}01716\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01717}\mbox{\hyperlink{web__server__task_8c_ad3a55001d3de8d4f584d7c64bed5f13d}{01717}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ad3a55001d3de8d4f584d7c64bed5f13d}{http\_get\_history\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01718}01718\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/history"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01719}01719\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01720}01720\ \ \ \textcolor{comment}{//\ Ziskat\ historii\ tahu\ z\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01721}01721\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_a5d08ec12c99532e3819abb072385a921}{game\_get\_history\_json}}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01722}01722\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01723}01723\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01724}01724\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ move\ history"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01725}01725\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01726}01726\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01727}01727\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01728}01728\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01729}01729\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ strlen(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01730}01730\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01731}01731\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01732}01732\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01733}01733\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01734}\mbox{\hyperlink{web__server__task_8c_a97ff386657b49592624586a42a5f38e4}{01734}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a97ff386657b49592624586a42a5f38e4}{http\_get\_captured\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01735}01735\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/captured"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01736}01736\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01737}01737\ \ \ \textcolor{comment}{//\ Ziskat\ sebrane\ figurky\ z\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01738}01738\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_aa442a40b76d56106f726f76bc210b84e}{game\_get\_captured\_json}}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01739}01739\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01740}01740\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01741}01741\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ captured\ pieces"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01742}01742\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01743}01743\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01744}01744\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01745}01745\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01746}01746\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ strlen(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01747}01747\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01748}01748\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01749}01749\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01750}01750\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01751}\mbox{\hyperlink{web__server__task_8c_aeac0e653e9a5ab503812d90dac9623d5}{01751}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aeac0e653e9a5ab503812d90dac9623d5}{http\_get\_advantage\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01752}01752\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/advantage"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01753}01753\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01754}01754\ \ \ \textcolor{comment}{//\ Ziskat\ historii\ material\ advantage\ z\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01755}01755\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_a8aacf784d572f6de13c441c564d8037e}{game\_get\_advantage\_json}}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01756}01756\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01757}01757\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01758}01758\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ advantage\ history"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01759}01759\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01760}01760\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01761}01761\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01762}01762\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01763}01763\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}},\ strlen(\mbox{\hyperlink{web__server__task_8c_ab9623bd189e3125138776d88fc5d35ff}{json\_buffer}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01764}01764\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01765}01765\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01766}01766\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01767}01767\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01768}01768\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01769}01769\ \textcolor{comment}{//\ TIMER\ API\ HANDLERS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01770}01770\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01771}01771\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01772}\mbox{\hyperlink{web__server__task_8c_ab7d5385d7f569007c56c2c7a7fa7d6c3}{01772}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ab7d5385d7f569007c56c2c7a7fa7d6c3}{http\_get\_timer\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01773}01773\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/timer"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01774}01774\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01775}01775\ \ \ \textcolor{comment}{//\ Ziskat\ stav\ timeru\ z\ game\ tasku\ pouzitim\ lokalniho\ bufferu\ pro\ zabraneni}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01776}01776\ \ \ \textcolor{comment}{//\ race\ conditions\ s\ jinymi\ endpointy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01777}01777\ \ \ \textcolor{keywordtype}{char}\ local\_json[\mbox{\hyperlink{web__server__task_8c_a2e4ba70a12e464d5b5278c18d28355f8}{JSON\_BUFFER\_SIZE}}];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01778}01778\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{game__task_8c_a4373558ca8d873f8a649ab8436720807}{game\_get\_timer\_json}}(local\_json,\ \textcolor{keyword}{sizeof}(local\_json));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01779}01779\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01780}01780\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01781}01781\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ timer\ state"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01782}01782\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01783}01783\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01784}01784\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01785}01785\ \ \ \textcolor{comment}{//\ Zabranit\ cachovani\ timer\ odpovedi\ v\ prohlizeci}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01786}01786\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Cache-\/Control"{}},\ \textcolor{stringliteral}{"{}no-\/store"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01787}01787\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01788}01788\ \ \ httpd\_resp\_send(req,\ local\_json,\ strlen(local\_json));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01789}01789\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01790}01790\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01791}01791\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01792}01792\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01793}\mbox{\hyperlink{web__server__task_8c_a475710334bf70a033c8877844b4becf7}{01793}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a475710334bf70a033c8877844b4becf7}{http\_post\_timer\_config\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01794}01794\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/timer/config"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01795}01795\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01796}01796\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01797}01797\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01798}01798\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Timer\ config\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01799}01799\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01800}01800\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01801}01801\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01802}01802\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01803}01803\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01804}01804\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01805}01805\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01806}01806\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01807}01807\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01808}01808\ \ \ \textcolor{comment}{//\ Precist\ JSON\ data}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01809}01809\ \ \ \textcolor{keywordtype}{char}\ content[256];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01810}01810\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01811}01811\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01812}01812\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01813}01813\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}No\ data\ received"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01814}01814\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01815}01815\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01816}01816\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01817}01817\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01818}01818\ \ \ \textcolor{comment}{//\ Parsovat\ JSON\ a\ odeslat\ prikaz\ do\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01819}01819\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01820}01820\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a0ba09395c8b55913ce75adb28ac19003}{GAME\_CMD\_SET\_TIME\_CONTROL}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01821}01821\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01822}01822\ \ \ \textcolor{comment}{//\ Vylepsene\ JSON\ parsovani\ pouzitim\ sscanf\ pro\ spolehlivejsi\ parsovani}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01823}01823\ \ \ \textcolor{comment}{//\ Nejprve\ najit\ pole\ "{}type"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01824}01824\ \ \ \textcolor{keywordtype}{char}\ *type\_str\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}type\(\backslash\)"{}:"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01825}01825\ \ \ \textcolor{keywordflow}{if}\ (type\_str\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01826}01826\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01827}01827\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Missing\ 'type'\ field"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01828}01828\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01829}01829\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01830}01830\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01831}01831\ \ \ \textcolor{comment}{//\ Parsovat\ hodnotu\ type}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01832}01832\ \ \ \textcolor{keywordtype}{int}\ type\_value;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01833}01833\ \ \ \textcolor{keywordflow}{if}\ (sscanf(type\_str,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}type\(\backslash\)"{}:\%d"{}},\ \&type\_value)\ !=\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01834}01834\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01835}01835\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Invalid\ type\ value"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01836}01836\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01837}01837\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01838}01838\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01839}01839\ \ \ \textcolor{keywordflow}{if}\ (type\_value\ <\ 0\ ||\ type\_value\ >\ 14)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01840}01840\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01841}01841\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Type\ out\ of\ range\ (0-\/14)"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01842}01842\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01843}01843\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01844}01844\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01845}01845\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a2e078f65d1fab8a9ebd51547cd733fd9}{timer\_data}}.\mbox{\hyperlink{structchess__move__command__t_ae05888f64383039d1414ffa36ae22aa9}{timer\_config}}.\mbox{\hyperlink{structchess__move__command__t_a19b5d713be6ea325b1121180f0382263}{time\_control\_type}}\ =\ (uint8\_t)type\_value;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01846}01846\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01847}01847\ \ \ \textcolor{comment}{//\ Parsovat\ vlastni\ casove\ hodnoty\ pokud\ je\ type\ CUSTOM}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01848}01848\ \ \ \textcolor{keywordflow}{if}\ (type\_value\ ==\ 14)\ \{\ \textcolor{comment}{//\ TIME\_CONTROL\_CUSTOM}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01849}01849\ \ \ \ \ \textcolor{keywordtype}{char}\ *minutes\_str\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}custom\_minutes\(\backslash\)"{}:"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01850}01850\ \ \ \ \ \textcolor{keywordtype}{char}\ *increment\_str\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}custom\_increment\(\backslash\)"{}:"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01851}01851\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01852}01852\ \ \ \ \ \textcolor{keywordflow}{if}\ (minutes\_str)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01853}01853\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ minutes;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01854}01854\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sscanf(minutes\_str,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}custom\_minutes\(\backslash\)"{}:\%d"{}},\ \&minutes)\ ==\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01855}01855\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (minutes\ >=\ 1\ \&\&\ minutes\ <=\ 180)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01856}01856\ \ \ \ \ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a2e078f65d1fab8a9ebd51547cd733fd9}{timer\_data}}.\mbox{\hyperlink{structchess__move__command__t_ae05888f64383039d1414ffa36ae22aa9}{timer\_config}}.\mbox{\hyperlink{structchess__move__command__t_ab1469d3613ac521e6521da4c7fabad75}{custom\_minutes}}\ =\ (uint32\_t)minutes;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01857}01857\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01858}01858\ \ \ \ \ \ \ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01859}01859\ \ \ \ \ \ \ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Minutes\ must\ be\ 1-\/180"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01860}01860\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01861}01861\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01862}01862\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01863}01863\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01864}01864\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01865}01865\ \ \ \ \ \textcolor{keywordflow}{if}\ (increment\_str)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01866}01866\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ increment;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01867}01867\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sscanf(increment\_str,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}custom\_increment\(\backslash\)"{}:\%d"{}},\ \&increment)\ ==\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01868}01868\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (increment\ >=\ 0\ \&\&\ increment\ <=\ 60)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01869}01869\ \ \ \ \ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a2e078f65d1fab8a9ebd51547cd733fd9}{timer\_data}}.\mbox{\hyperlink{structchess__move__command__t_ae05888f64383039d1414ffa36ae22aa9}{timer\_config}}.\mbox{\hyperlink{structchess__move__command__t_aa66efcd3b24e2c130ede000aca79466d}{custom\_increment}}\ =\ (uint32\_t)increment;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01870}01870\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01871}01871\ \ \ \ \ \ \ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01872}01872\ \ \ \ \ \ \ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Increment\ must\ be\ 0-\/60"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01873}01873\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01874}01874\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01875}01875\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01876}01876\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01877}01877\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01878}01878\ \ \ \ \ \textcolor{comment}{//\ Overit\ ze\ byly\ poskytnuty\ vlastni\ hodnoty}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01879}01879\ \ \ \ \ \textcolor{keywordflow}{if}\ (minutes\_str\ ==\ NULL\ ||\ increment\_str\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01880}01880\ \ \ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01881}01881\ \ \ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Custom\ time\ control\ requires\ minutes\ and\ increment"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01882}01882\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01883}01883\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01884}01884\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01885}01885\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01886}01886\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01887}01887\ \ \ \textcolor{comment}{//\ Odeslat\ prikaz\ do\ game\ tasku}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01888}01888\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01889}01889\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01890}01890\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ set\ time\ control"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01891}01891\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01892}01892\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01893}01893\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01894}01894\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01895}01895\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Time\ control\ set\ successfully"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01896}01896\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01897}01897\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01898}01898\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01899}01899\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01900}\mbox{\hyperlink{web__server__task_8c_a908aa1beee83594820b7c14d65c18278}{01900}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a908aa1beee83594820b7c14d65c18278}{http\_post\_timer\_pause\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01901}01901\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/timer/pause"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01902}01902\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01903}01903\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01904}01904\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01905}01905\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Timer\ pause\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01906}01906\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01907}01907\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01908}01908\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01909}01909\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01910}01910\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01911}01911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01912}01912\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01913}01913\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01914}01914\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01915}01915\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01916}01916\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a04714aa90de7f3ace2585fe01cf67659}{GAME\_CMD\_PAUSE\_TIMER}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01917}01917\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01918}01918\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01919}01919\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01920}01920\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ pause\ timer"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01921}01921\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01922}01922\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01923}01923\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01924}01924\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01925}01925\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Timer\ paused"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01926}01926\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01927}01927\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01928}01928\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01929}01929\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01930}\mbox{\hyperlink{web__server__task_8c_a25c5ac166fb8596946684e3e3f9e0202}{01930}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a25c5ac166fb8596946684e3e3f9e0202}{http\_post\_timer\_resume\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01931}01931\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/timer/resume"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01932}01932\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01933}01933\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01934}01934\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01935}01935\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Timer\ resume\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01936}01936\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01937}01937\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01938}01938\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01939}01939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01940}01940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01941}01941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01942}01942\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01943}01943\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01944}01944\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01945}01945\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01946}01946\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a19a04a30f9a17d5a85cd43db2b1e298a}{GAME\_CMD\_RESUME\_TIMER}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01947}01947\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01948}01948\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01949}01949\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01950}01950\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ resume\ timer"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01951}01951\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01952}01952\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01953}01953\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01954}01954\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01955}01955\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Timer\ resumed"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01956}01956\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01957}01957\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01958}01958\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01959}01959\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01960}\mbox{\hyperlink{web__server__task_8c_a3500d692620d566066b284e7678946c6}{01960}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a3500d692620d566066b284e7678946c6}{http\_post\_timer\_reset\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01961}01961\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/timer/reset"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01962}01962\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01963}01963\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01964}01964\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01965}01965\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Timer\ reset\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01966}01966\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01967}01967\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01968}01968\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01969}01969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01970}01970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01971}01971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01972}01972\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01973}01973\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01974}01974\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01975}01975\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01976}01976\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4aee7fca1d1758d39255d3b023f569313d}{GAME\_CMD\_RESET\_TIMER}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01977}01977\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01978}01978\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01979}01979\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01980}01980\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ reset\ timer"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01981}01981\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01982}01982\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01983}01983\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01984}01984\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01985}01985\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Timer\ reset"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01986}01986\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01987}01987\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01988}01988\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01989}01989\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01990}01990\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01991}01991\ \textcolor{comment}{//\ VIRTUAL\ GAME\ ACTIONS\ (REMOTE\ CONTROL)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01992}01992\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l01993}01993\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02005}\mbox{\hyperlink{web__server__task_8c_aeb0c7739faebc37cc1a058f796ba24e9}{02005}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aeb0c7739faebc37cc1a058f796ba24e9}{http\_post\_game\_move\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02006}02006\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/move"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02007}02007\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02008}02008\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02009}02009\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02010}02010\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Move\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02011}02011\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02012}02012\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02013}02013\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02014}02014\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02015}02015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02016}02016\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02017}02017\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02018}02018\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02019}02019\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02020}02020\ \ \ \textcolor{comment}{//\ Precist\ JSON\ data}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02021}02021\ \ \ \textcolor{keywordtype}{char}\ content[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02022}02022\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02023}02023\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02024}02024\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02025}02025\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}No\ data\ received"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02026}02026\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02027}02027\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02028}02028\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02029}02029\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02030}02030\ \ \ \textcolor{comment}{//\ Jednoduchy\ JSON\ parser}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02031}02031\ \ \ \textcolor{keywordtype}{char}\ from[8]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02032}02032\ \ \ \textcolor{keywordtype}{char}\ to[8]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02033}02033\ \ \ \textcolor{keywordtype}{char}\ promotion[4]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02034}02034\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02035}02035\ \ \ \textcolor{comment}{//\ Najit\ "{}from"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02036}02036\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *from\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}from\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02037}02037\ \ \ \textcolor{keywordflow}{if}\ (from\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02038}02038\ \ \ \ \ from\_start\ =\ strchr(from\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02039}02039\ \ \ \ \ \textcolor{keywordflow}{if}\ (from\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02040}02040\ \ \ \ \ \ \ from\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02041}02041\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*from\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *from\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02042}02042\ \ \ \ \ \ \ \ \ from\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02043}02043\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *from\_end\ =\ strchr(from\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02044}02044\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (from\_end\ !=\ NULL\ \&\&\ from\_end\ >\ from\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02045}02045\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ from\_end\ -\/\ from\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02046}02046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(from))}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02047}02047\ \ \ \ \ \ \ \ \ \ \ strncpy(from,\ from\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02048}02048\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02049}02049\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02050}02050\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02051}02051\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02052}02052\ \ \ \textcolor{comment}{//\ Najit\ "{}to"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02053}02053\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *to\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}to\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02054}02054\ \ \ \textcolor{keywordflow}{if}\ (to\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02055}02055\ \ \ \ \ to\_start\ =\ strchr(to\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02056}02056\ \ \ \ \ \textcolor{keywordflow}{if}\ (to\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02057}02057\ \ \ \ \ \ \ to\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02058}02058\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*to\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *to\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02059}02059\ \ \ \ \ \ \ \ \ to\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02060}02060\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *to\_end\ =\ strchr(to\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02061}02061\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (to\_end\ !=\ NULL\ \&\&\ to\_end\ >\ to\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02062}02062\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ to\_end\ -\/\ to\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02063}02063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(to))}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02064}02064\ \ \ \ \ \ \ \ \ \ \ strncpy(to,\ to\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02065}02065\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02066}02066\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02067}02067\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02068}02068\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02069}02069\ \ \ \textcolor{comment}{//\ Najit\ "{}promotion"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02070}02070\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *promo\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}promotion\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02071}02071\ \ \ \textcolor{keywordflow}{if}\ (promo\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02072}02072\ \ \ \ \ promo\_start\ =\ strchr(promo\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02073}02073\ \ \ \ \ \textcolor{keywordflow}{if}\ (promo\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02074}02074\ \ \ \ \ \ \ promo\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02075}02075\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*promo\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *promo\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02076}02076\ \ \ \ \ \ \ \ \ promo\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02077}02077\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *promo\_end\ =\ strchr(promo\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02078}02078\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (promo\_end\ !=\ NULL\ \&\&\ promo\_end\ >\ promo\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02079}02079\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ promo\_end\ -\/\ promo\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02080}02080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(promotion))}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02081}02081\ \ \ \ \ \ \ \ \ \ \ strncpy(promotion,\ promo\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02082}02082\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02083}02083\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02084}02084\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02085}02085\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02086}02086\ \ \ \textcolor{keywordflow}{if}\ (strlen(from)\ ==\ 0\ ||\ strlen(to)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02087}02087\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02088}02088\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02089}02089\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02090}02090\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Missing\ 'from'\ or\ 'to'\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02091}02091\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02092}02092\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02093}02093\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02094}02094\ \ \ \textcolor{comment}{//\ VALIDACE\ PROMOCE:\ Zkontrolovat\ zda\ je\ cÃ­l\ na\ promotion\ rank}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02095}02095\ \ \ \textcolor{comment}{//\ Promotion\ rank:\ 1.\ Å™Ã¡dek\ (rank\ 1)\ pro\ ÄernÃ©,\ 8.\ Å™Ã¡dek\ (rank\ 8)\ pro\ bÃ­lÃ©}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02096}02096\ \ \ \textcolor{keywordtype}{bool}\ is\_promotion\_rank\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02097}02097\ \ \ \textcolor{keywordflow}{if}\ (strlen(to)\ >=\ 2)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02098}02098\ \ \ \ \ \textcolor{keywordtype}{char}\ rank\ =\ to[1];\ \textcolor{comment}{//\ DruhÃ½\ znak\ je\ rank\ (1-\/8)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02099}02099\ \ \ \ \ \textcolor{keywordflow}{if}\ (rank\ ==\ \textcolor{charliteral}{'1'}\ ||\ rank\ ==\ \textcolor{charliteral}{'8'})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02100}02100\ \ \ \ \ \ \ is\_promotion\_rank\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02101}02101\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02102}02102\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02103}02103\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02104}02104\ \ \ \textcolor{comment}{//\ VALIDACE:\ Pokud\ je\ to\ promoce,\ promotion\ parametr\ je\ povinnÃ½}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02105}02105\ \ \ \textcolor{keywordflow}{if}\ (is\_promotion\_rank\ \&\&\ strlen(promotion)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02106}02106\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02107}02107\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02108}02108\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02109}02109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Promotion\ required\ for\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02110}02110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}move\ to\ promotion\ rank\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02111}02111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02112}02112\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02113}02113\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02114}02114\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02115}02115\ \ \ \textcolor{comment}{//\ VAROVÃNÃ:\ Pokud\ to\ nenÃ­\ promoce,\ ale\ promotion\ parametr\ je\ poskytnut}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02116}02116\ \ \ \textcolor{keywordflow}{if}\ (!is\_promotion\_rank\ \&\&\ strlen(promotion)\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02117}02117\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02118}02118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Promotion\ parameter\ provided\ for\ non-\/promotion\ move\ \%s-\/>\%s,\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02119}02119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ignoring"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02120}02120\ \ \ \ \ \ \ \ \ \ \ \ \ \ from,\ to);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02121}02121\ \ \ \ \ \textcolor{comment}{//\ Ignorovat\ promotion\ parametr,\ ale\ pokraÄovat}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02122}02122\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02123}02123\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02124}02124\ \ \ \textcolor{comment}{//\ Pripravit\ command\ pro\ game\ task}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02125}02125\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02126}02126\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4aac9a76d6ee39f51d9053539f833fa9e7}{GAME\_CMD\_MOVE}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02127}02127\ \ \ strncpy(cmd.\mbox{\hyperlink{structchess__move__command__t_a51b8eb6617ef0642c722008827f2d3d1}{from\_notation}},\ from,\ \textcolor{keyword}{sizeof}(cmd.\mbox{\hyperlink{structchess__move__command__t_a51b8eb6617ef0642c722008827f2d3d1}{from\_notation}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02128}02128\ \ \ strncpy(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}},\ to,\ \textcolor{keyword}{sizeof}(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02129}02129\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02130}02130\ \ \ \textcolor{comment}{//\ Zpracovat\ promotion\ choice\ (pouze\ pokud\ je\ to\ skuteÄnÄ›\ promoce)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02131}02131\ \ \ \textcolor{keywordflow}{if}\ (is\_promotion\_rank\ \&\&\ strlen(promotion)\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02132}02132\ \ \ \ \ \textcolor{keywordflow}{if}\ (strcasecmp(promotion,\ \textcolor{stringliteral}{"{}Q"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02133}02133\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02134}02134\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(promotion,\ \textcolor{stringliteral}{"{}R"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02135}02135\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237a86adcf7f4dd13fe13c310740b684fd85}{PROMOTION\_ROOK}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02136}02136\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(promotion,\ \textcolor{stringliteral}{"{}B"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02137}02137\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237af76338fd133ad75d03265525fab6a060}{PROMOTION\_BISHOP}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02138}02138\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(promotion,\ \textcolor{stringliteral}{"{}N"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02139}02139\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237a38e92903ca7d679f019bbc0895c00910}{PROMOTION\_KNIGHT}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02140}02140\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02141}02141\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02142}02142\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_promotion\_rank)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02143}02143\ \ \ \ \ \textcolor{comment}{//\ Promoce\ bez\ promotion\ parametru\ -\/\ mÄ›lo\ by\ bÃ½t\ zachyceno\ vÃ½Å¡e,\ ale\ pro}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02144}02144\ \ \ \ \ \textcolor{comment}{//\ jistotu}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02145}02145\ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};\ \textcolor{comment}{//\ Default\ fallback}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02146}02146\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02147}02147\ \ \ \ \ \textcolor{comment}{//\ NenÃ­\ to\ promoce\ -\/\ promotion\_choice\ nenÃ­\ relevantnÃ­}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02148}02148\ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};\ \textcolor{comment}{//\ Default\ (nebude\ pouÅ¾ito)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02149}02149\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02150}02150\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02151}02151\ \ \ \textcolor{comment}{//\ Odeslat\ do\ fronty}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02152}02152\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02153}02153\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02154}02154\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Game\ queue\ not\ available"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02155}02155\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02156}02156\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02157}02157\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02158}02158\ \ \ \textcolor{comment}{//\ Synchronous\ Verification\ Setup}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02159}02159\ \ \ \textcolor{comment}{//\ Create\ a\ temporary\ queue\ to\ receive\ the\ validation\ result}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02160}02160\ \ \ \textcolor{comment}{//\ This\ allows\ us\ to\ return\ 400\ Bad\ Request\ if\ the\ move\ is\ invalid}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02161}02161\ \ \ QueueHandle\_t\ response\_queue\ =\ xQueueCreate(1,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structgame__response__t}{game\_response\_t}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02162}02162\ \ \ \textcolor{keywordflow}{if}\ (response\_queue\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02163}02163\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ create\ response\ queue"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02164}02164\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02165}02165\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ create\ response\ queue"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02166}02166\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02167}02167\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02168}02168\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a750e92bc6c9a40c005e3e48947dd10b5}{response\_queue}}\ =\ response\_queue;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02169}02169\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02170}02170\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02171}02171\ \ \ \ \ vQueueDelete(response\_queue);\ \textcolor{comment}{//\ Cleanup}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02172}02172\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02173}02173\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ queue\ move"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02174}02174\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02175}02175\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02176}02176\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02177}02177\ \ \ \textcolor{comment}{//\ Wait\ for\ response\ (validation\ result)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02178}02178\ \ \ \mbox{\hyperlink{structgame__response__t}{game\_response\_t}}\ response;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02179}02179\ \ \ \textcolor{comment}{//\ 500ms\ timeout\ should\ be\ enough\ for\ simple\ validation}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02180}02180\ \ \ \textcolor{keywordflow}{if}\ (xQueueReceive(response\_queue,\ \&response,\ pdMS\_TO\_TICKS(1000))\ ==\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02181}02181\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ move\ was\ successful}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02182}02182\ \ \ \ \ \textcolor{keywordflow}{if}\ (response.\mbox{\hyperlink{structgame__response__t_a3002d679599149eb947d042adf7d28a3}{type}}\ ==\ \mbox{\hyperlink{chess__types_8h_a03211d5ca1b7406c1cb6ab6851e79502a39ae193ecb15c805e19efa3c004cda8b}{GAME\_RESPONSE\_ERROR}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02183}02183\ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âŒ\ Move\ rejected\ by\ game\ task:\ \%s"{}},\ response.\mbox{\hyperlink{structgame__response__t_a1b9907db84187372f7e5df9135e8d522}{data}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02184}02184\ \ \ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02185}02185\ \ \ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02186}02186\ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ error\_json[256];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02187}02187\ \ \ \ \ \ \ snprintf(error\_json,\ \textcolor{keyword}{sizeof}(error\_json),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02188}02188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{}\}"{}},\ response.\mbox{\hyperlink{structgame__response__t_a1b9907db84187372f7e5df9135e8d522}{data}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02189}02189\ \ \ \ \ \ \ httpd\_resp\_send(req,\ error\_json,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02190}02190\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02191}02191\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âœ…\ Move\ accepted\ by\ game\ task"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02192}02192\ \ \ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02193}02193\ \ \ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02194}02194\ \ \ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Move\ processed\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02195}02195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02196}02196\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02197}02197\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02198}02198\ \ \ \ \ \textcolor{comment}{//\ Timeout\ -\/\ treat\ as\ success\ (async\ fallback)\ or\ error?}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02199}02199\ \ \ \ \ \textcolor{comment}{//\ Let's\ treat\ as\ partial\ success\ but\ log\ warning}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02200}02200\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âš ï¸\ Move\ validation\ timed\ out"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02201}02201\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}202\ Accepted"{}});\ \textcolor{comment}{//\ Accepted\ but\ not\ verified\ yet}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02202}02202\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02203}02203\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02204}02204\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Move\ queued\ (timeout)\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02205}02205\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02206}02206\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02207}02207\ \ \ \textcolor{comment}{//\ Cleanup\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02208}02208\ \ \ vQueueDelete(response\_queue);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02209}02209\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02210}02210\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02211}02211\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02223}\mbox{\hyperlink{web__server__task_8c_af36e989f916f7fc74dfbe1bbf52b3869}{02223}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_af36e989f916f7fc74dfbe1bbf52b3869}{http\_post\_game\_virtual\_action\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02224}02224\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/game/virtual\_action"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02225}02225\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02226}02226\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02227}02227\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02228}02228\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Virtual\ action\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02229}02229\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02230}02230\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02231}02231\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02232}02232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02233}02233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02234}02234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02235}02235\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02236}02236\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02237}02237\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02238}02238\ \ \ \textcolor{comment}{//\ Nacist\ JSON\ z\ request\ body}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02239}02239\ \ \ \textcolor{keywordtype}{char}\ content[128]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02240}02240\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02241}02241\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02242}02242\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02243}02243\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02244}02244\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}No\ data\ received\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02245}02245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02246}02246\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02247}02247\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02248}02248\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02249}02249\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02250}02250\ \ \ \textcolor{comment}{//\ Jednoduchy\ JSON\ parser}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02251}02251\ \ \ \textcolor{keywordtype}{char}\ action[16]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02252}02252\ \ \ \textcolor{keywordtype}{char}\ square[8]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02253}02253\ \ \ \textcolor{keywordtype}{char}\ choice[4]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02254}02254\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02255}02255\ \ \ \textcolor{comment}{//\ Najit\ "{}action"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02256}02256\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *action\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}action\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02257}02257\ \ \ \textcolor{keywordflow}{if}\ (action\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02258}02258\ \ \ \ \ action\_start\ =\ strchr(action\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02259}02259\ \ \ \ \ \textcolor{keywordflow}{if}\ (action\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02260}02260\ \ \ \ \ \ \ action\_start++;\ \textcolor{comment}{//\ Preskocit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02261}02261\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*action\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *action\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02262}02262\ \ \ \ \ \ \ \ \ action\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02263}02263\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *action\_end\ =\ strchr(action\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02264}02264\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (action\_end\ !=\ NULL\ \&\&\ action\_end\ >\ action\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02265}02265\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ action\_end\ -\/\ action\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02266}02266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(action))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02267}02267\ \ \ \ \ \ \ \ \ \ \ strncpy(action,\ action\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02268}02268\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02269}02269\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02270}02270\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02271}02271\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02272}02272\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02273}02273\ \ \ \textcolor{comment}{//\ Najit\ "{}square"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02274}02274\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *square\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}square\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02275}02275\ \ \ \textcolor{keywordflow}{if}\ (square\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02276}02276\ \ \ \ \ square\_start\ =\ strchr(square\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02277}02277\ \ \ \ \ \textcolor{keywordflow}{if}\ (square\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02278}02278\ \ \ \ \ \ \ square\_start++;\ \textcolor{comment}{//\ Preskocit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02279}02279\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*square\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *square\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02280}02280\ \ \ \ \ \ \ \ \ square\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02281}02281\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *square\_end\ =\ strchr(square\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02282}02282\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (square\_end\ !=\ NULL\ \&\&\ square\_end\ >\ square\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02283}02283\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ square\_end\ -\/\ square\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02284}02284\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(square))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02285}02285\ \ \ \ \ \ \ \ \ \ \ strncpy(square,\ square\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02286}02286\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02287}02287\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02288}02288\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02289}02289\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02290}02290\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02291}02291\ \ \ \textcolor{comment}{//\ Najit\ "{}choice"{}\ (pro\ promotion)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02292}02292\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *choice\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}choice\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02293}02293\ \ \ \textcolor{keywordflow}{if}\ (choice\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02294}02294\ \ \ \ \ choice\_start\ =\ strchr(choice\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02295}02295\ \ \ \ \ \textcolor{keywordflow}{if}\ (choice\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02296}02296\ \ \ \ \ \ \ choice\_start++;\ \textcolor{comment}{//\ Preskocit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02297}02297\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*choice\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *choice\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02298}02298\ \ \ \ \ \ \ \ \ choice\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02299}02299\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *choice\_end\ =\ strchr(choice\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02300}02300\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (choice\_end\ !=\ NULL\ \&\&\ choice\_end\ >\ choice\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02301}02301\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ choice\_end\ -\/\ choice\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02302}02302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(choice))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02303}02303\ \ \ \ \ \ \ \ \ \ \ strncpy(choice,\ choice\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02304}02304\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02305}02305\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02306}02306\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02307}02307\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02308}02308\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02309}02309\ \ \ \textcolor{comment}{//\ Validace}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02310}02310\ \ \ \textcolor{keywordflow}{if}\ (strlen(action)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02311}02311\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02312}02312\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02313}02313\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Missing\ action\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02314}02314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02315}02315\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02316}02316\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02317}02317\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02318}02318\ \ \ \textcolor{comment}{//\ Pripravit\ command\ pro\ game\ task}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02319}02319\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02320}02320\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02321}02321\ \ \ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}pickup"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02322}02322\ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a745816733d012d70b4bda9d2fdac7892}{GAME\_CMD\_PICKUP}};\ \textcolor{comment}{//\ UP\ command}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02323}02323\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}drop"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02324}02324\ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4aecfd44979b16dd3a0a3054c1eeda3102}{GAME\_CMD\_DROP}};\ \textcolor{comment}{//\ DOWN\ command}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02325}02325\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}promote"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02326}02326\ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a555e98c01f0511c7d341e43169c820da}{GAME\_CMD\_PROMOTION}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02327}02327\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02328}02328\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02329}02329\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02330}02330\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Invalid\ action\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02331}02331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02332}02332\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02333}02333\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02334}02334\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02335}02335\ \ \ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}pickup"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02336}02336\ \ \ \ \ \textcolor{comment}{//\ PICKUP:\ source\ square\ goes\ in\ from\_notation}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02337}02337\ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(square)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02338}02338\ \ \ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02339}02339\ \ \ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Missing\ square\ for\ pickup\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02340}02340\ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02341}02341\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02342}02342\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02343}02343\ \ \ \ \ strncpy(cmd.\mbox{\hyperlink{structchess__move__command__t_a51b8eb6617ef0642c722008827f2d3d1}{from\_notation}},\ square,\ \textcolor{keyword}{sizeof}(cmd.\mbox{\hyperlink{structchess__move__command__t_a51b8eb6617ef0642c722008827f2d3d1}{from\_notation}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02344}02344\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}drop"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02345}02345\ \ \ \ \ \textcolor{comment}{//\ DROP:\ destination\ square\ goes\ in\ to\_notation}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02346}02346\ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(square)\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02347}02347\ \ \ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02348}02348\ \ \ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Missing\ square\ for\ drop\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02349}02349\ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02350}02350\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02351}02351\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02352}02352\ \ \ \ \ strncpy(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}},\ square,\ \textcolor{keyword}{sizeof}(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02353}02353\ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(action,\ \textcolor{stringliteral}{"{}promote"{}})\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02354}02354\ \ \ \ \ \textcolor{comment}{//\ PROMOTE:\ choice\ goes\ into\ promotion\_choice}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02355}02355\ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(choice)\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02356}02356\ \ \ \ \ \ \ strcpy(choice,\ \textcolor{stringliteral}{"{}Q"{}});\ \textcolor{comment}{//\ Default\ to\ Queen}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02357}02357\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02358}02358\ \ \ \ \ \textcolor{keywordflow}{if}\ (strcasecmp(choice,\ \textcolor{stringliteral}{"{}Q"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02359}02359\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02360}02360\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(choice,\ \textcolor{stringliteral}{"{}R"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02361}02361\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237a86adcf7f4dd13fe13c310740b684fd85}{PROMOTION\_ROOK}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02362}02362\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(choice,\ \textcolor{stringliteral}{"{}B"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02363}02363\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237af76338fd133ad75d03265525fab6a060}{PROMOTION\_BISHOP}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02364}02364\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcasecmp(choice,\ \textcolor{stringliteral}{"{}N"{}})\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02365}02365\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237a38e92903ca7d679f019bbc0895c00910}{PROMOTION\_KNIGHT}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02366}02366\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02367}02367\ \ \ \ \ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_ae6e4449e8345fed34c9c685eba9f1363}{promotion\_choice}}\ =\ \mbox{\hyperlink{chess__types_8h_a1b67a105371c4a0066f77f3fa12ad237ace7ae3bfdb598aeffb32c01d08805045}{PROMOTION\_QUEEN}};\ \textcolor{comment}{//\ Fallback}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02368}02368\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02369}02369\ \ \ \ \ \textcolor{comment}{//\ Optional\ square}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02370}02370\ \ \ \ \ \textcolor{keywordflow}{if}\ (strlen(square)\ >\ 0)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02371}02371\ \ \ \ \ \ \ strncpy(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}},\ square,\ \textcolor{keyword}{sizeof}(cmd.\mbox{\hyperlink{structchess__move__command__t_a3396c5f2d92b68852cb9fcf6e79500fc}{to\_notation}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02372}02372\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02373}02373\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02374}02374\ \ \ \textcolor{comment}{//\ Odeslat\ do\ fronty}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02375}02375\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02376}02376\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02377}02377\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ send\ command"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02378}02378\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02379}02379\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02380}02380\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02381}02381\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02382}02382\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02383}02383\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Action\ processed\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02384}02384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02385}02385\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02386}02386\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02387}02387\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02388}02388\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02400}\mbox{\hyperlink{web__server__task_8c_aa9ed8d6dbc130fd18b7d409f4f742189}{02400}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aa9ed8d6dbc130fd18b7d409f4f742189}{http\_post\_game\_new\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02401}02401\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/game/new"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02402}02402\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02403}02403\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02404}02404\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02405}02405\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}New\ game\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02406}02406\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02407}02407\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02408}02408\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02409}02409\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ locked\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02410}02410\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02411}02411\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02412}02412\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02413}02413\ \ \ \textcolor{comment}{//\ VytvoÅ™it\ NEW\_GAME\ pÅ™Ã­kaz}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02414}02414\ \ \ \mbox{\hyperlink{structchess__move__command__t}{chess\_move\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02415}02415\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a87f810beeb0b0322d2b99c87d5a7c91c}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_ade7744437207164be6ca650b128bd9e4a9cdd3824f45d61a774ab6868e898e1c0}{GAME\_CMD\_NEW\_GAME}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02416}02416\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a431384d6ef7f4db67d9a0946a7211ef1}{player}}\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NeznÃ¡mÃ©}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02417}02417\ \ \ cmd.\mbox{\hyperlink{structchess__move__command__t_a750e92bc6c9a40c005e3e48947dd10b5}{response\_queue}}\ =\ NULL;\ \textcolor{comment}{//\ Web\ nepotÅ™ebuje\ response}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02418}02418\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02419}02419\ \ \ \textcolor{comment}{//\ Odeslat\ do\ fronty}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02420}02420\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02421}02421\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Game\ command\ queue\ not\ available"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02422}02422\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02423}02423\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02424}02424\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02425}02425\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Queue\ not\ available\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02426}02426\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02427}02427\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02428}02428\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02429}02429\ \ \ \textcolor{keywordflow}{if}\ (xQueueSend(\mbox{\hyperlink{freertos__chess_8c_a4ed770cbe46604586e494bae84b62304}{game\_command\_queue}},\ \&cmd,\ pdMS\_TO\_TICKS(100))\ !=\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02430}02430\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ send\ NEW\_GAME\ command\ to\ queue"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02431}02431\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02432}02432\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02433}02433\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02434}02434\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Failed\ to\ send\ command\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02435}02435\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02436}02436\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02437}02437\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02438}02438\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âœ…\ NEW\_GAME\ command\ sent\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02439}02439\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02440}02440\ \ \ \textcolor{comment}{//\ OdpovÄ›dÄ›t\ ÃºspÄ›chem}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02441}02441\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02442}02442\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02443}02443\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}New\ game\ started\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02444}02444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02445}02445\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02446}02446\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02447}02447\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02448}02448\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02455}\mbox{\hyperlink{web__server__task_8c_afe04c688d88ea0650555b298507ea154}{02455}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_afe04c688d88ea0650555b298507ea154}{http\_post\_game\_hint\_highlight\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02456}02456\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/game/hint\_highlight"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02457}02457\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02458}02458\ \ \ \textcolor{keywordtype}{char}\ buf[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02459}02459\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ buf,\ \textcolor{keyword}{sizeof}(buf)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02460}02460\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02461}02461\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02462}02462\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02463}02463\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}No\ body\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02464}02464\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02465}02465\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02466}02466\ \ \ buf[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02467}02467\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02468}02468\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *p\_from\ =\ strstr(buf,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}from\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02469}02469\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *p\_to\ =\ strstr(buf,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}to\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02470}02470\ \ \ \textcolor{keywordflow}{if}\ (!p\_from\ ||\ !p\_to)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02471}02471\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02472}02472\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02473}02473\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Missing\ from/to\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02474}02474\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02475}02475\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02476}02476\ \ \ \textcolor{comment}{/*\ Find\ value\ after\ "{}from"{}:\ skip\ to\ next\ "{}\ and\ take\ 2\ chars\ */}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02477}02477\ \ \ p\_from\ +=\ 6;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02478}02478\ \ \ \textcolor{keywordflow}{while}\ (*p\_from\ \&\&\ *p\_from\ !=\ \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02479}02479\ \ \ \ \ p\_from++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02480}02480\ \ \ \textcolor{keywordflow}{if}\ (*p\_from\ ==\ \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02481}02481\ \ \ \ \ p\_from++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02482}02482\ \ \ p\_to\ +=\ 4;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02483}02483\ \ \ \textcolor{keywordflow}{while}\ (*p\_to\ \&\&\ *p\_to\ !=\ \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02484}02484\ \ \ \ \ p\_to++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02485}02485\ \ \ \textcolor{keywordflow}{if}\ (*p\_to\ ==\ \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02486}02486\ \ \ \ \ p\_to++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02487}02487\ \ \ \textcolor{keywordflow}{if}\ (!*p\_from\ ||\ !*p\_to\ ||\ !p\_from[1]\ ||\ !p\_to[1])\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02488}02488\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02489}02489\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02490}02490\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Invalid\ JSON\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02491}02491\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02492}02492\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02493}02493\ \ \ \textcolor{keywordtype}{char}\ from\_sq[3]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02494}02494\ \ \ \textcolor{keywordtype}{char}\ to\_sq[3]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02495}02495\ \ \ from\_sq[0]\ =\ (char)((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})p\_from[0]\ <=\ \textcolor{charliteral}{'Z'}\ ?\ p\_from[0]\ +\ 32\ :\ p\_from[0]);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02496}02496\ \ \ from\_sq[1]\ =\ p\_from[1];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02497}02497\ \ \ to\_sq[0]\ =\ (char)((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})p\_to[0]\ <=\ \textcolor{charliteral}{'Z'}\ ?\ p\_to[0]\ +\ 32\ :\ p\_to[0]);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02498}02498\ \ \ to\_sq[1]\ =\ p\_to[1];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02499}02499\ \ \ \textcolor{keywordflow}{if}\ (from\_sq[0]\ <\ \textcolor{charliteral}{'a'}\ ||\ from\_sq[0]\ >\ \textcolor{charliteral}{'h'}\ ||\ from\_sq[1]\ <\ \textcolor{charliteral}{'1'}\ ||\ from\_sq[1]\ >\ \textcolor{charliteral}{'8'}\ ||}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02500}02500\ \ \ \ \ \ \ to\_sq[0]\ <\ \textcolor{charliteral}{'a'}\ ||\ to\_sq[0]\ >\ \textcolor{charliteral}{'h'}\ ||\ to\_sq[1]\ <\ \textcolor{charliteral}{'1'}\ ||\ to\_sq[1]\ >\ \textcolor{charliteral}{'8'})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02501}02501\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02502}02502\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02503}02503\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Invalid\ square\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02504}02504\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02505}02505\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02506}02506\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02507}02507\ \ \ uint8\_t\ from\_led\ =\ \mbox{\hyperlink{led__mapping_8h_ac190470b2f78837d3df987b0951264dd}{chess\_notation\_to\_led\_index}}(from\_sq);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02508}02508\ \ \ uint8\_t\ to\_led\ =\ \mbox{\hyperlink{led__mapping_8h_ac190470b2f78837d3df987b0951264dd}{chess\_notation\_to\_led\_index}}(to\_sq);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02509}02509\ \ \ \textcolor{keywordflow}{if}\ (from\_led\ >=\ 64\ ||\ to\_led\ >=\ 64)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02510}02510\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02511}02511\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02512}02512\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}error\(\backslash\)"{}:\(\backslash\)"{}Bad\ notation\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02513}02513\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02514}02514\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02515}02515\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02516}02516\ \ \ \mbox{\hyperlink{structled__command__t}{led\_command\_t}}\ cmd\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02517}02517\ \ \ cmd.\mbox{\hyperlink{structled__command__t_a7665b1fa37b249a3377af43862c1040b}{type}}\ =\ \mbox{\hyperlink{chess__types_8h_a4b9c35d83af38787d5601d9c2443a66daf9dfd49be96d73059bdcf3f4e30c42dc}{LED\_CMD\_HIGHLIGHT\_HINT}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02518}02518\ \ \ cmd.\mbox{\hyperlink{structled__command__t_ae1ef770e3412d70be11bb43b7d2736ee}{led\_index}}\ =\ from\_led;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02519}02519\ \ \ cmd.\mbox{\hyperlink{structled__command__t_a8fb54529dc345b2f804899e68a519163}{data}}\ =\ (\textcolor{keywordtype}{void}\ *)\&to\_led;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02520}02520\ \ \ \mbox{\hyperlink{led__task_8h_a85578cf6b1c0acb68c6278c9cd1a4f26}{led\_execute\_command\_new}}(\&cmd);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02521}02521\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Hint\ highlight\ sent:\ \%s\ -\/>\ \%s\ (LED\ \%u\ -\/>\ \%u)"{}},\ from\_sq,\ to\_sq,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02522}02522\ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{unsigned})from\_led,\ (\textcolor{keywordtype}{unsigned})to\_led);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02523}02523\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02524}02524\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02525}02525\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02526}02526\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02527}02527\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02528}02528\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02529}02529\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02530}02530\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02531}02531\ \textcolor{comment}{//\ WIFI\ API\ HANDLERS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02532}02532\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02533}02533\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02546}\mbox{\hyperlink{web__server__task_8c_a6493232eb46ff49eb44d894c8c4a1daf}{02546}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a6493232eb46ff49eb44d894c8c4a1daf}{http\_post\_wifi\_config\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02547}02547\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/wifi/config"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02548}02548\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02549}02549\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02550}02550\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02551}02551\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ config\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02552}02552\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02553}02553\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02554}02554\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02555}02555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02556}02556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02557}02557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02558}02558\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02559}02559\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02560}02560\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02561}02561\ \ \ \textcolor{comment}{//\ Nacist\ JSON\ z\ request\ body}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02562}02562\ \ \ \textcolor{keywordtype}{char}\ content[256]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02563}02563\ \ \ \textcolor{keywordtype}{int}\ ret\ =\ httpd\_req\_recv(req,\ content,\ \textcolor{keyword}{sizeof}(content)\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02564}02564\ \ \ \textcolor{keywordflow}{if}\ (ret\ <=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02565}02565\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02566}02566\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02567}02567\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}No\ data\ received\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02568}02568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02569}02569\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02570}02570\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02571}02571\ \ \ content[ret]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02572}02572\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02573}02573\ \ \ \textcolor{comment}{//\ Jednoduchy\ JSON\ parser\ (hleda\ "{}ssid"{}\ a\ "{}password"{})}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02574}02574\ \ \ \textcolor{keywordtype}{char}\ ssid[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02575}02575\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[65]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02576}02576\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02577}02577\ \ \ \textcolor{comment}{//\ Najit\ "{}ssid"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02578}02578\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *ssid\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}ssid\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02579}02579\ \ \ \textcolor{keywordflow}{if}\ (ssid\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02580}02580\ \ \ \ \ ssid\_start\ =\ strchr(ssid\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02581}02581\ \ \ \ \ \textcolor{keywordflow}{if}\ (ssid\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02582}02582\ \ \ \ \ \ \ ssid\_start++;\ \textcolor{comment}{//\ Preskocit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02583}02583\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*ssid\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *ssid\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02584}02584\ \ \ \ \ \ \ \ \ ssid\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02585}02585\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *ssid\_end\ =\ strchr(ssid\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02586}02586\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ssid\_end\ !=\ NULL\ \&\&\ ssid\_end\ >\ ssid\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02587}02587\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ ssid\_end\ -\/\ ssid\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02588}02588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(ssid))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02589}02589\ \ \ \ \ \ \ \ \ \ \ strncpy(ssid,\ ssid\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02590}02590\ \ \ \ \ \ \ \ \ \ \ ssid[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02591}02591\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02592}02592\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02593}02593\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02594}02594\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02595}02595\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02596}02596\ \ \ \textcolor{comment}{//\ Najit\ "{}password"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02597}02597\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *password\_start\ =\ strstr(content,\ \textcolor{stringliteral}{"{}\(\backslash\)"{}password\(\backslash\)"{}"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02598}02598\ \ \ \textcolor{keywordflow}{if}\ (password\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02599}02599\ \ \ \ \ password\_start\ =\ strchr(password\_start,\ \textcolor{charliteral}{':'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02600}02600\ \ \ \ \ \textcolor{keywordflow}{if}\ (password\_start\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02601}02601\ \ \ \ \ \ \ password\_start++;\ \textcolor{comment}{//\ Preskocit\ ':'}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02602}02602\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*password\_start\ ==\ \textcolor{charliteral}{'\ '}\ ||\ *password\_start\ ==\ \textcolor{charliteral}{'\(\backslash\)"{}'})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02603}02603\ \ \ \ \ \ \ \ \ password\_start++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02604}02604\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *password\_end\ =\ strchr(password\_start,\ \textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02605}02605\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (password\_end\ !=\ NULL\ \&\&\ password\_end\ >\ password\_start)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02606}02606\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ password\_end\ -\/\ password\_start;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02607}02607\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ <\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}))\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02608}02608\ \ \ \ \ \ \ \ \ \ \ strncpy(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ password\_start,\ len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02609}02609\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[len]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02610}02610\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02611}02611\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02612}02612\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02613}02613\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02614}02614\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02615}02615\ \ \ \textcolor{comment}{//\ Validovat\ SSID}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02616}02616\ \ \ \textcolor{keywordtype}{size\_t}\ ssid\_len\ =\ strlen(ssid);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02617}02617\ \ \ \textcolor{keywordtype}{size\_t}\ password\_len\ =\ strlen(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02618}02618\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02619}02619\ \ \ \textcolor{keywordflow}{if}\ (ssid\_len\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02620}02620\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02621}02621\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02622}02622\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}SSID\ is\ required\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02623}02623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02624}02624\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02625}02625\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02626}02626\ \ \ \textcolor{keywordflow}{if}\ (ssid\_len\ >\ 32)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02627}02627\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02628}02628\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02629}02629\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02630}02630\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02631}02631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}SSID\ must\ be\ 1-\/32\ characters\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02632}02632\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(current:\ \%zu)\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02633}02633\ \ \ \ \ \ \ \ \ \ \ \ \ \ ssid\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02634}02634\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02635}02635\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02636}02636\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02637}02637\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02638}02638\ \ \ \textcolor{comment}{//\ Validovat\ password}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02639}02639\ \ \ \textcolor{keywordflow}{if}\ (password\_len\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02640}02640\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02641}02641\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02642}02642\ \ \ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02643}02643\ \ \ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Password\ is\ required\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02644}02644\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02645}02645\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02646}02646\ \ \ \textcolor{keywordflow}{if}\ (password\_len\ >\ 64)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02647}02647\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02648}02648\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02649}02649\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02650}02650\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02651}02651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Password\ must\ be\ 1-\/64\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02652}02652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}characters\ (current:\ \%zu)\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02653}02653\ \ \ \ \ \ \ \ \ \ \ \ \ \ password\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02654}02654\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02655}02655\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02656}02656\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02657}02657\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02658}02658\ \ \ \textcolor{comment}{//\ Ulozit\ do\ NVS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02659}02659\ \ \ esp\_err\_t\ err\ =\ \mbox{\hyperlink{web__server__task_8c_acc62bf6d95aba71aede977266f96e962}{wifi\_save\_config\_to\_nvs}}(ssid,\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02660}02660\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02661}02661\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02662}02662\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02663}02663\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02664}02664\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02665}02665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Failed\ to\ save:\ \%s\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02666}02666\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(err));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02667}02667\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02668}02668\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02669}02669\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02670}02670\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02671}02671\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02672}02672\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02673}02673\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}WiFi\ config\ saved\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02674}02674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02675}02675\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02676}02676\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02677}02677\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02678}02678\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02690}\mbox{\hyperlink{web__server__task_8c_a3d0bd2243c20416d59e0fba4fcd733a6}{02690}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a3d0bd2243c20416d59e0fba4fcd733a6}{http\_post\_wifi\_connect\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02691}02691\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/wifi/connect"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02692}02692\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02693}02693\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02694}02694\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02695}02695\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ connect\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02696}02696\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02697}02697\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02698}02698\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02699}02699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02700}02700\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02701}02701\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02702}02702\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02703}02703\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02704}02704\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02705}02705\ \ \ \textcolor{comment}{//\ Zkontrolovat,\ zda\ existuje\ konfigurace}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02706}02706\ \ \ \textcolor{keywordtype}{char}\ ssid[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02707}02707\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[65]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02708}02708\ \ \ esp\_err\_t\ load\_ret\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02709}02709\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a0915923195ef83ed0a4a8ab10cfe3d24}{wifi\_load\_config\_from\_nvs}}(ssid,\ \textcolor{keyword}{sizeof}(ssid),\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02710}02710\ \ \ \textcolor{keywordflow}{if}\ (load\_ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02711}02711\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}400\ Bad\ Request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02712}02712\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02713}02713\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02714}02714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}No\ WiFi\ configuration\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02715}02715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}found.\ Please\ save\ SSID\ and\ password\ first.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02716}02716\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02717}02717\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02718}02718\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02719}02719\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02720}02720\ \ \ esp\_err\_t\ err\ =\ \mbox{\hyperlink{web__server__task_8c_ad3bda523e632b9d3152cdd73fe9d8d4c}{wifi\_connect\_sta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02721}02721\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02722}02722\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02723}02723\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02724}02724\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[256];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02725}02725\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *user\_message\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02726}02726\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02727}02727\ \ \ \ \ \textcolor{comment}{//\ Prevest\ ESP\ error\ kody\ na\ uzivatelsky\ pristupne\ zpravy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02728}02728\ \ \ \ \ \textcolor{keywordflow}{if}\ (err\ ==\ ESP\_ERR\_INVALID\_STATE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02729}02729\ \ \ \ \ \ \ user\_message\ =\ \textcolor{stringliteral}{"{}Connection\ already\ in\ progress.\ Please\ wait..."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02730}02730\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (err\ ==\ ESP\_ERR\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02731}02731\ \ \ \ \ \ \ user\_message\ =\ \textcolor{stringliteral}{"{}Network\ not\ found.\ Please\ check\ SSID\ and\ ensure\ the\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02732}02732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}network\ is\ in\ range."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02733}02733\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (err\ ==\ ESP\_ERR\_INVALID\_RESPONSE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02734}02734\ \ \ \ \ \ \ user\_message\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02735}02735\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Authentication\ failed.\ Please\ check\ password\ and\ try\ again."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02736}02736\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (err\ ==\ ESP\_ERR\_TIMEOUT)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02737}02737\ \ \ \ \ \ \ user\_message\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02738}02738\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Connection\ timeout.\ The\ network\ may\ be\ too\ far\ or\ not\ responding."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02739}02739\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (err\ ==\ ESP\_ERR\_NVS\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02740}02740\ \ \ \ \ \ \ user\_message\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02741}02741\ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}WiFi\ configuration\ not\ found.\ Please\ save\ SSID\ and\ password\ first."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02742}02742\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02743}02743\ \ \ \ \ \ \ user\_message\ =\ \textcolor{stringliteral}{"{}Connection\ failed.\ Please\ check\ SSID,\ password,\ and\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02744}02744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}network\ availability."{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02745}02745\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02746}02746\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02747}02747\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02748}02748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}\%s\(\backslash\)"{}\}"{}},\ user\_message);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02749}02749\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02750}02750\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02751}02751\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02752}02752\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02753}02753\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02754}02754\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02755}02755\ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Connected\ to\ WiFi\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02756}02756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02757}02757\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02758}02758\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02759}02759\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02760}02760\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02772}\mbox{\hyperlink{web__server__task_8c_a1e666336ebbd7c13672804089a310f19}{02772}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a1e666336ebbd7c13672804089a310f19}{http\_post\_wifi\_disconnect\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02773}02773\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/wifi/disconnect"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02774}02774\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02775}02775\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02776}02776\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02777}02777\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ disconnect\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02778}02778\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02779}02779\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02780}02780\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02781}02781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02782}02782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02783}02783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02784}02784\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02785}02785\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02786}02786\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02787}02787\ \ \ esp\_err\_t\ err\ =\ \mbox{\hyperlink{web__server__task_8c_a4a4813aac1f99fb986c17f6a4f5e40e2}{wifi\_disconnect\_sta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02788}02788\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02789}02789\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02790}02790\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02791}02791\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02792}02792\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02793}02793\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Disconnect\ failed:\ \%s\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02794}02794\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(err));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02795}02795\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02796}02796\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02797}02797\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02798}02798\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02799}02799\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02800}02800\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02801}02801\ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02802}02802\ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Disconnected\ from\ WiFi\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02803}02803\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02804}02804\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02805}02805\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02806}02806\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02818}\mbox{\hyperlink{web__server__task_8c_a55bff9badf4ff599d4b2a8e272f9f318}{02818}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a55bff9badf4ff599d4b2a8e272f9f318}{http\_post\_wifi\_clear\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02819}02819\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}POST\ /api/wifi/clear"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02820}02820\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02821}02821\ \ \ \textcolor{comment}{//\ Kontrola\ web\ lock}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02822}02822\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_add53c7f34376bb856c868cab6321070b}{web\_is\_locked}}())\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02823}02823\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ clear\ blocked:\ web\ interface\ is\ locked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02824}02824\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02825}02825\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}403\ Forbidden"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02826}02826\ \ \ \ \ httpd\_resp\_send(req,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02827}02827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Web\ interface\ is\ locked.\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02828}02828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Use\ UART\ to\ unlock.\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02829}02829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02830}02830\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02831}02831\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02832}02832\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02833}02833\ \ \ \textcolor{comment}{//\ Odpojit\ STA\ pokud\ je\ pripojeny}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02834}02834\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ha__light__task_8c_a738f5dc6c12f15f0149e08de59f48064}{sta\_connected}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02835}02835\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a4a4813aac1f99fb986c17f6a4f5e40e2}{wifi\_disconnect\_sta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02836}02836\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02837}02837\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02838}02838\ \ \ esp\_err\_t\ err\ =\ \mbox{\hyperlink{web__server__task_8c_a1b7f75613a5cab50704428a000610531}{wifi\_clear\_config\_from\_nvs}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02839}02839\ \ \ \textcolor{keywordflow}{if}\ (err\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02840}02840\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02841}02841\ \ \ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02842}02842\ \ \ \ \ \textcolor{keywordtype}{char}\ error\_msg[128];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02843}02843\ \ \ \ \ snprintf(error\_msg,\ \textcolor{keyword}{sizeof}(error\_msg),}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02844}02844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:false,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}Failed\ to\ clear:\ \%s\(\backslash\)"{}\}"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02845}02845\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(err));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02846}02846\ \ \ \ \ httpd\_resp\_send(req,\ error\_msg,\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02847}02847\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02848}02848\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02849}02849\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02850}02850\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}200\ OK"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02851}02851\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02852}02852\ \ \ httpd\_resp\_send(}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02853}02853\ \ \ \ \ \ \ req,\ \textcolor{stringliteral}{"{}\{\(\backslash\)"{}success\(\backslash\)"{}:true,\(\backslash\)"{}message\(\backslash\)"{}:\(\backslash\)"{}WiFi\ configuration\ cleared\(\backslash\)"{}\}"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02854}02854\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02855}02855\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02856}02856\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02857}02857\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02869}\mbox{\hyperlink{web__server__task_8c_aedaea596294dea3bc9a8670d696e8290}{02869}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_aedaea596294dea3bc9a8670d696e8290}{http\_get\_wifi\_status\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02870}02870\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /api/wifi/status"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02871}02871\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02872}02872\ \ \ \textcolor{keywordtype}{char}\ local\_json[\mbox{\hyperlink{web__server__task_8c_a2e4ba70a12e464d5b5278c18d28355f8}{JSON\_BUFFER\_SIZE}}];}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02873}02873\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{web__server__task_8c_adf48bce5b2fe5cafb51a5a5b928ca31d}{wifi\_get\_sta\_status\_json}}(local\_json,\ \textcolor{keyword}{sizeof}(local\_json));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02874}02874\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02875}02875\ \ \ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}500\ Internal\ Server\ Error"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02876}02876\ \ \ \ \ httpd\_resp\_send(req,\ \textcolor{stringliteral}{"{}Failed\ to\ get\ WiFi\ status"{}},\ -\/1);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02877}02877\ \ \ \ \ \textcolor{keywordflow}{return}\ ESP\_FAIL;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02878}02878\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02879}02879\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02880}02880\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/json"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02881}02881\ \ \ httpd\_resp\_send(req,\ local\_json,\ strlen(local\_json));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02882}02882\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02883}02883\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02884}02884\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02885}02885\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02886}02886\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02887}02887\ \textcolor{comment}{//\ TEST\ PAGE\ -\/\ MINIMAL\ TIMER\ TEST\ (for\ debugging)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02888}02888\ \textcolor{comment}{//\ chess\_app.js\ embedded\ (85110\ bytes,\ 2105\ lines)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02889}\mbox{\hyperlink{web__server__task_8c_a31bf285a16bbf718a86c71d94f2b9f31}{02889}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a31bf285a16bbf718a86c71d94f2b9f31}{chess\_app\_js\_content}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02890}02890\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02891}02891\ \ \ \ \ \textcolor{stringliteral}{"{}//\ CHESS\ WEB\ APP\ -\/\ EXTRACTED\ JAVASCRIPT\ FOR\ SYNTAX\ CHECKING\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02892}02892\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02893}02893\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02894}02894\ \ \ \ \ \textcolor{stringliteral}{"{}console.log('ðŸš€\ Chess\ JavaScript\ loading...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02895}02895\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02896}02896\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02897}02897\ \ \ \ \ \textcolor{stringliteral}{"{}//\ TAB\ SWITCHING\ (Hra\ /\ NastavenÃ­)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02898}02898\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02899}02899\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02900}02900\ \ \ \ \ \textcolor{stringliteral}{"{}function\ switchTab(tabId)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02901}02901\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ tabs\ =\ document.querySelectorAll('.tab-\/content');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02902}02902\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ buttons\ =\ document.querySelectorAll('.tab-\/btn');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02903}02903\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ tabs.forEach(t\ =>\ \{\ t.classList.remove('active');\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02904}02904\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ buttons.forEach(b\ =>\ \{\ b.classList.remove('active');\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02905}02905\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ tab\ =\ document.getElementById(tabId);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02906}02906\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ btn\ =\ document.getElementById('btn-\/'\ +\ tabId);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02907}02907\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (tab)\ tab.classList.add('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02908}02908\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (btn)\ btn.classList.add('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02909}02909\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (typeof\ console\ !==\ 'undefined'\ \&\&\ console.log)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02910}02910\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('Tab\ switched\ to:',\ tabId);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02911}02911\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02912}02912\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02913}02913\ \ \ \ \ \textcolor{stringliteral}{"{}window.switchTab\ =\ switchTab;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02914}02914\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02915}02915\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02916}02916\ \ \ \ \ \textcolor{stringliteral}{"{}//\ PIECE\ SYMBOLS\ AND\ GLOBAL\ VARIABLES\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02917}02917\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02918}02918\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02919}02919\ \ \ \ \ \textcolor{stringliteral}{"{}const\ pieceSymbols\ =\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02920}02920\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ 'R':\ 'â™œ',\ 'N':\ 'â™ž',\ 'B':\ 'â™',\ 'Q':\ 'â™›',\ 'K':\ 'â™š',\ 'P':\ 'â™Ÿ',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02921}02921\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ 'r':\ 'â™–',\ 'n':\ 'â™˜',\ 'b':\ 'â™—',\ 'q':\ 'â™•',\ 'k':\ 'â™”',\ 'p':\ 'â™™',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02922}02922\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ '\ ':\ '\ '\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02923}02923\ \ \ \ \ \textcolor{stringliteral}{"{}\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02924}02924\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02925}02925\ \ \ \ \ \textcolor{stringliteral}{"{}let\ boardData\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02926}02926\ \ \ \ \ \textcolor{stringliteral}{"{}let\ statusData\ =\ \{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02927}02927\ \ \ \ \ \textcolor{stringliteral}{"{}let\ historyData\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02928}02928\ \ \ \ \ \textcolor{stringliteral}{"{}let\ capturedData\ =\ \{\ white\_captured:\ [],\ black\_captured:\ []\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02929}02929\ \ \ \ \ \textcolor{stringliteral}{"{}let\ advantageData\ =\ \{\ history:\ [],\ white\_checks:\ 0,\ black\_checks:\ 0,\ white\_castles:\ 0,\ black\_castles:\ 0\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02930}02930\ \ \ \ \ \textcolor{stringliteral}{"{}let\ selectedSquare\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02931}02931\ \ \ \ \ \textcolor{stringliteral}{"{}let\ reviewMode\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02932}02932\ \ \ \ \ \textcolor{stringliteral}{"{}let\ currentReviewIndex\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02933}02933\ \ \ \ \ \textcolor{stringliteral}{"{}let\ initialBoard\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02934}02934\ \ \ \ \ \textcolor{stringliteral}{"{}let\ sandboxMode\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02935}02935\ \ \ \ \ \textcolor{stringliteral}{"{}let\ remoteControlEnabled\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02936}02936\ \ \ \ \ \textcolor{stringliteral}{"{}let\ sandboxBoard\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02937}02937\ \ \ \ \ \textcolor{stringliteral}{"{}let\ sandboxHistory\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02938}02938\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ For\ move\ evaluation:\ FEN\ after\ last\ fetch;\ length\ of\ history\ after\ last\ fetch.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02939}02939\ \ \ \ \ \textcolor{stringliteral}{"{}let\ lastFen\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02940}02940\ \ \ \ \ \textcolor{stringliteral}{"{}let\ lastHistoryLength\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02941}02941\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Per-\/move\ evaluation\ when\ \(\backslash\)"{}ZhodnocenÃ­\ tahu\(\backslash\)"{}\ is\ on:\ index\ -\/>\ \{\ grade,\ msg\ \}.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02942}02942\ \ \ \ \ \textcolor{stringliteral}{"{}let\ moveEvaluations\ =\ \{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02943}02943\ \ \ \ \ \textcolor{stringliteral}{"{}let\ endgameReportShown\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02944}02944\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02945}02945\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02946}02946\ \ \ \ \ \textcolor{stringliteral}{"{}//\ BOARD\ FUNCTIONS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02947}02947\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02948}02948\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02949}02949\ \ \ \ \ \textcolor{stringliteral}{"{}function\ createBoard()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02950}02950\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ board\ =\ document.getElementById('board');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02951}02951\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ board.innerHTML\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02952}02952\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ for\ (let\ row\ =\ 7;\ row\ >=\ 0;\ row-\/-\/)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02953}02953\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ for\ (let\ col\ =\ 0;\ col\ <\ 8;\ col++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02954}02954\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ square\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02955}02955\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.className\ =\ 'square\ '\ +\ ((row\ +\ col)\ \%\ 2\ ===\ 0\ ?\ 'light'\ :\ 'dark');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02956}02956\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.dataset.row\ =\ row;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02957}02957\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.dataset.col\ =\ col;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02958}02958\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.dataset.index\ =\ row\ *\ 8\ +\ col;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02959}02959\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.onclick\ =\ ()\ =>\ handleSquareClick(row,\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02960}02960\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ piece\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02961}02961\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ piece.className\ =\ 'piece';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02962}02962\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ piece.id\ =\ 'piece-\/'\ +\ (row\ *\ 8\ +\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02963}02963\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ square.appendChild(piece);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02964}02964\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ board.appendChild(square);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02965}02965\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02966}02966\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02967}02967\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02968}02968\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02969}02969\ \ \ \ \ \textcolor{stringliteral}{"{}function\ clearHighlights()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02970}02970\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02971}02971\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ NEMAZAT\ lifted,\ error-\/invalid,\ error-\/original\ -\/\ tyto\ jsou\ Å™Ã­zenÃ©\ serverem\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02972}02972\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ (z\ piece\_lifted\ a\ error\_state\ v\ JSON\ statusu)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02973}02973\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('selected',\ 'valid-\/move',\ 'valid-\/capture');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02974}02974\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02975}02975\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ selectedSquare\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02976}02976\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02977}02977\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02978}02978\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02979}02979\ \ \ \ \ \textcolor{stringliteral}{"{}//\ REMOTE\ CONTROL\ LOGIC\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02980}02980\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02981}02981\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02982}02982\ \ \ \ \ \textcolor{stringliteral}{"{}function\ toggleRemoteControl()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02983}02983\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ checkbox\ =\ document.getElementById('remote-\/control-\/enabled');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02984}02984\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ remoteControlEnabled\ =\ checkbox.checked;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02985}02985\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('Remote\ control:',\ remoteControlEnabled);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02986}02986\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!remoteControlEnabled)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02987}02987\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02988}02988\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02989}02989\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02990}02990\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02991}02991\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Remote\ control:\ one\ click\ =\ one\ action\ (pickup\ or\ drop),\ same\ as\ backup\ /\ physical\ board.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02992}02992\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ handleRemoteControlClick(row,\ col)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02993}02993\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ notation\ =\ String.fromCharCode(97\ +\ col)\ +\ (row\ +\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02994}02994\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ action\ =\ (statusData\ \&\&\ statusData.piece\_lifted\ \&\&\ statusData.piece\_lifted.lifted)\ ?\ 'drop'\ :\ 'pickup';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02995}02995\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ squareEl\ =\ document.querySelector(`[data-\/row='\$\{row\}'][data-\/col='\$\{col\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02996}02996\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02997}02997\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (squareEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02998}02998\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ squareEl.style.boxShadow\ =\ action\ ===\ 'pickup'\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l02999}02999\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ ?\ 'inset\ 0\ 0\ 20px\ rgba(255,\ 255,\ 0,\ 0.8)'\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03000}03000\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ :\ 'inset\ 0\ 0\ 20px\ rgba(0,\ 255,\ 0,\ 0.8)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03001}03001\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ setTimeout(function\ ()\ \{\ if\ (squareEl)\ squareEl.style.boxShadow\ =\ '';\ \},\ 500);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03002}03002\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03003}03003\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('Remote\ control:',\ action,\ 'at',\ notation);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03004}03004\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03005}03005\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03006}03006\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/game/virtual\_action',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03007}03007\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03008}03008\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03009}03009\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ action:\ action,\ square:\ notation\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03010}03010\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03011}03011\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ res\ =\ await\ response.json().catch(function\ ()\ \{\ return\ \{\};\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03012}03012\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03013}03013\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (response.status\ ===\ 403\ \&\&\ res.message)\ alert(res.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03014}03014\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ else\ console.warn('Virtual\ action\ failed:',\ response.status,\ res.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03015}03015\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03016}03016\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ await\ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03017}03017\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03018}03018\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Remote\ virtual\_action\ error:',\ e);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03019}03019\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ await\ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03020}03020\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba:\ '\ +\ (e.message\ ||\ 'nelze\ odeslat\ pÅ™Ã­kaz'));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03021}03021\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03022}03022\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03023}03023\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03024}03024\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03025}03025\ \ \ \ \ \textcolor{stringliteral}{"{}//\ SQUARE\ CLICK\ HANDLER\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03026}03026\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03027}03027\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03028}03028\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ handleSquareClick(row,\ col)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03029}03029\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ piece\ =\ sandboxMode\ ?\ sandboxBoard[row][col]\ :\ boardData[row][col];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03030}03030\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ index\ =\ row\ *\ 8\ +\ col;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03031}03031\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03032}03032\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ SANDBOX\ MODE\ (Zkusit\ tahy)\ -\/\ vÅ¾dy\ jen\ lokÃ¡lnÄ›,\ i\ kdyÅ¾\ je\ zapnutÃ©\ dÃ¡lkovÃ©\ ovlÃ¡dÃ¡nÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03033}03033\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (sandboxMode)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03034}03034\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (piece\ ===\ '\ '\ \&\&\ selectedSquare\ !==\ null)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03035}03035\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Tah\ na\ prÃ¡zdnÃ©\ pole\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03036}03036\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ fromRow\ =\ Math.floor(selectedSquare\ /\ 8);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03037}03037\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ fromCol\ =\ selectedSquare\ \%\ 8;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03038}03038\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ makeSandboxMove(fromRow,\ fromCol,\ row,\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03039}03039\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03040}03040\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ if\ (piece\ !==\ '\ ')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03041}03041\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (selectedSquare\ !==\ null)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03042}03042\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ fromRow\ =\ Math.floor(selectedSquare\ /\ 8);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03043}03043\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ fromCol\ =\ selectedSquare\ \%\ 8;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03044}03044\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ selectedPiece\ =\ sandboxBoard[fromRow][fromCol];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03045}03045\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ isSameSquare\ =\ (fromRow\ ===\ row\ \&\&\ fromCol\ ===\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03046}03046\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ isOurPiece\ =\ (selectedPiece\ ===\ selectedPiece.toUpperCase())\ ===\ (piece\ ===\ piece.toUpperCase());\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03047}03047\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03048}03048\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (isSameSquare)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03049}03049\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Klik\ na\ stejnÃ©\ pole\ â€“\ zruÅ¡it\ vÃ½bÄ›r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03050}03050\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03051}03051\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ if\ (isOurPiece)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03052}03052\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Klik\ na\ vlastnÃ­\ figurku\ â€“\ vybrat\ jinou\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03053}03053\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03054}03054\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ selectedSquare\ =\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03055}03055\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ square\ =\ document.querySelector(`[data-\/row='\$\{row\}'][data-\/col='\$\{col\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03056}03056\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (square)\ square.classList.add('selected');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03057}03057\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03058}03058\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Klik\ na\ soupeÅ™ovu\ figurku\ â€“\ brÃ¡t\ (capture)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03059}03059\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ makeSandboxMove(fromRow,\ fromCol,\ row,\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03060}03060\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03061}03061\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03062}03062\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03063}03063\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ Å½Ã¡dnÃ¡\ figurka\ vybranÃ¡\ â€“\ vybrat\ tuto\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03064}03064\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03065}03065\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ selectedSquare\ =\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03066}03066\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ square\ =\ document.querySelector(`[data-\/row='\$\{row\}'][data-\/col='\$\{col\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03067}03067\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (square)\ square.classList.add('selected');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03068}03068\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03069}03069\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03070}03070\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03071}03071\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03072}03072\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03073}03073\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ REMOTE\ CONTROL\ MODE\ -\/\ posÃ­lat\ pÅ™Ã­kazy\ na\ ESP\ (jen\ kdyÅ¾\ nejsme\ v\ sandboxu)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03074}03074\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (remoteControlEnabled)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03075}03075\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ handleRemoteControlClick(row,\ col);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03076}03076\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03077}03077\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03078}03078\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03079}03079\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ NORMÃLNÃ\ REÅ½IM\ (ne\ sandbox,\ ne\ remote\ control)\ -\/\ Å¾Ã¡dnÃ©\ POST\ requesty,\ Å¾Ã¡dnÃ½\ vizuÃ¡lnÃ­\ feedback\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03080}03080\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Web\ je\ jen\ pasivnÃ­\ zobrazenÃ­,\ hra\ se\ ovlÃ¡dÃ¡\ fyzicky\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03081}03081\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03082}03082\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03083}03083\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03084}03084\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03085}03085\ \ \ \ \ \textcolor{stringliteral}{"{}//\ REVIEW\ MODE\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03086}03086\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03087}03087\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03088}03088\ \ \ \ \ \textcolor{stringliteral}{"{}function\ reconstructBoardAtMove(moveIndex)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03089}03089\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ startBoard\ =\ [\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03090}03090\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['R',\ 'N',\ 'B',\ 'Q',\ 'K',\ 'B',\ 'N',\ 'R'],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03091}03091\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['P',\ 'P',\ 'P',\ 'P',\ 'P',\ 'P',\ 'P',\ 'P'],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03092}03092\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ '],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03093}03093\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ '],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03094}03094\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ '],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03095}03095\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ ',\ '\ '],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03096}03096\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['p',\ 'p',\ 'p',\ 'p',\ 'p',\ 'p',\ 'p',\ 'p'],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03097}03097\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ['r',\ 'n',\ 'b',\ 'q',\ 'k',\ 'b',\ 'n',\ 'r']\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03098}03098\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ ];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03099}03099\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ board\ =\ JSON.parse(JSON.stringify(startBoard));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03100}03100\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ for\ (let\ i\ =\ 0;\ i\ <=\ moveIndex\ \&\&\ i\ <\ historyData.length;\ i++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03101}03101\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ move\ =\ historyData[i];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03102}03102\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fromRow\ =\ parseInt(move.from[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03103}03103\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fromCol\ =\ move.from.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03104}03104\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ toRow\ =\ parseInt(move.to[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03105}03105\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ toCol\ =\ move.to.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03106}03106\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ board[toRow][toCol]\ =\ board[fromRow][fromCol];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03107}03107\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ board[fromRow][fromCol]\ =\ '\ ';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03108}03108\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03109}03109\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ board;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03110}03110\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03111}03111\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03112}03112\ \ \ \ \ \textcolor{stringliteral}{"{}function\ enterReviewMode(index)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03113}03113\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ reviewMode\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03114}03114\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ currentReviewIndex\ =\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03115}03115\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ banner\ =\ document.getElementById('review-\/banner');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03116}03116\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ banner.classList.add('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03117}03117\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.getElementById('review-\/move-\/text').textContent\ =\ \`{}ProhlÃ­Å¾Ã­Å¡\ tah\ \$\{index\ +\ 1\}`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03118}03118\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ reconstructedBoard\ =\ reconstructBoardAtMove(index);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03119}03119\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateBoard(reconstructedBoard);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03120}03120\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03121}03121\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('move-\/from',\ 'move-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03122}03122\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03123}03123\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (index\ >=\ 0\ \&\&\ index\ <\ historyData.length)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03124}03124\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ move\ =\ historyData[index];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03125}03125\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fromRow\ =\ parseInt(move.from[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03126}03126\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fromCol\ =\ move.from.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03127}03127\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ toRow\ =\ parseInt(move.to[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03128}03128\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ toCol\ =\ move.to.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03129}03129\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fromSquare\ =\ document.querySelector(`[data-\/row='\$\{fromRow\}'][data-\/col='\$\{fromCol\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03130}03130\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ toSquare\ =\ document.querySelector(`[data-\/row='\$\{toRow\}'][data-\/col='\$\{toCol\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03131}03131\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (fromSquare)\ fromSquare.classList.add('move-\/from');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03132}03132\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (toSquare)\ toSquare.classList.add('move-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03133}03133\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03134}03134\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.history-\/item').forEach(item\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03135}03135\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.classList.remove('selected');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03136}03136\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03137}03137\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ selectedItem\ =\ document.querySelector(`[data-\/move-\/index='\$\{index\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03138}03138\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (selectedItem)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03139}03139\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ selectedItem.classList.add('selected');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03140}03140\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Removed\ scrollIntoView\ -\/\ causes\ unwanted\ scroll\ on\ mobile\ when\ using\ navigation\ arrows\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03141}03141\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ History\ item\ stays\ highlighted\ but\ page\ doesn't\ scroll\ away\ from\ board/banner\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03142}03142\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03143}03143\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03144}03144\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03145}03145\ \ \ \ \ \textcolor{stringliteral}{"{}function\ exitReviewMode()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03146}03146\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ reviewMode\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03147}03147\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ currentReviewIndex\ =\ -\/1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03148}03148\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.getElementById('review-\/banner').classList.remove('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03149}03149\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03150}03150\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('move-\/from',\ 'move-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03151}03151\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03152}03152\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.history-\/item').forEach(item\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03153}03153\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.classList.remove('selected');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03154}03154\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03155}03155\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03156}03156\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03157}03157\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03158}03158\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03159}03159\ \ \ \ \ \textcolor{stringliteral}{"{}//\ SANDBOX\ MODE\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03160}03160\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03161}03161\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03162}03162\ \ \ \ \ \textcolor{stringliteral}{"{}function\ enterSandboxMode()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03163}03163\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxMode\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03164}03164\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard\ =\ JSON.parse(JSON.stringify(boardData));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03165}03165\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxHistory\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03166}03166\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ banner\ =\ document.getElementById('sandbox-\/banner');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03167}03167\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ banner.classList.add('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03168}03168\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03169}03169\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateUndoButton();\ //\ Aktualizovat\ tlaÄÃ­tko\ undo\ pÅ™i\ vstupu\ do\ sandbox\ mode\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03170}03170\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03171}03171\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03172}03172\ \ \ \ \ \textcolor{stringliteral}{"{}function\ exitSandboxMode()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03173}03173\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxMode\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03174}03174\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03175}03175\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxHistory\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03176}03176\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.getElementById('sandbox-\/banner').classList.remove('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03177}03177\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03178}03178\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03179}03179\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03180}03180\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03181}03181\ \ \ \ \ \textcolor{stringliteral}{"{}function\ makeSandboxMove(fromRow,\ fromCol,\ toRow,\ toCol)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03182}03182\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ piece\ =\ sandboxBoard[fromRow][fromCol];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03183}03183\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ capturedPiece\ =\ sandboxBoard[toRow][toCol];\ //\ UloÅ¾it\ captured\ piece\ (mÅ¯Å¾e\ bÃ½t\ '\ ')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03184}03184\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03185}03185\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ ProvedenÃ­\ tahu\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03186}03186\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard[toRow][toCol]\ =\ piece;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03187}03187\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard[fromRow][fromCol]\ =\ '\ ';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03188}03188\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03189}03189\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ UloÅ¾it\ tah\ do\ historie\ s\ kompletnÃ­mi\ informacemi\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03190}03190\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxHistory.push(\{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03191}03191\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ fromRow:\ fromRow,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03192}03192\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ fromCol:\ fromCol,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03193}03193\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ toRow:\ toRow,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03194}03194\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ toCol:\ toCol,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03195}03195\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ movingPiece:\ piece,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03196}03196\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ capturedPiece:\ capturedPiece\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03197}03197\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03198}03198\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03199}03199\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Omezit\ historii\ na\ 10\ tahÅ¯\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03200}03200\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (sandboxHistory.length\ >\ 10)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03201}03201\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sandboxHistory.shift();\ //\ Odstranit\ nejstarÅ¡Ã­\ tah\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03202}03202\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03203}03203\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03204}03204\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateBoard(sandboxBoard);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03205}03205\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateUndoButton();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03206}03206\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03207}03207\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03208}03208\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateUndoButton()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03209}03209\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ undoBtn\ =\ document.getElementById('sandbox-\/undo-\/btn');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03210}03210\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!undoBtn)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03211}03211\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03212}03212\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ availableUndos\ =\ sandboxHistory.length;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03213}03213\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ maxUndos\ =\ 10;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03214}03214\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03215}03215\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ undoBtn.textContent\ =\ \`{}Undo\ (\$\{availableUndos\}/\$\{maxUndos\})`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03216}03216\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ undoBtn.disabled\ =\ availableUndos\ ===\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03217}03217\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03218}03218\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03219}03219\ \ \ \ \ \textcolor{stringliteral}{"{}function\ undoSandboxMove()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03220}03220\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (sandboxHistory.length\ ===\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03221}03221\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\ //\ Å½Ã¡dnÃ©\ tahy\ k\ vrÃ¡cenÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03222}03222\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03223}03223\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03224}03224\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ VzÃ­t\ poslednÃ­\ tah\ z\ historie\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03225}03225\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ lastMove\ =\ sandboxHistory.pop();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03226}03226\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03227}03227\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ VrÃ¡tit\ figurku\ zpÄ›t\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03228}03228\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard[lastMove.fromRow][lastMove.fromCol]\ =\ lastMove.movingPiece;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03229}03229\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03230}03230\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Obnovit\ captured\ piece\ (nebo\ prÃ¡zdnÃ©\ pole)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03231}03231\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ sandboxBoard[lastMove.toRow][lastMove.toCol]\ =\ lastMove.capturedPiece;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03232}03232\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03233}03233\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Aktualizovat\ board\ a\ tlaÄÃ­tko\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03234}03234\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateBoard(sandboxBoard);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03235}03235\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateUndoButton();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03236}03236\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03237}03237\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03238}03238\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03239}03239\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03240}03240\ \ \ \ \ \textcolor{stringliteral}{"{}//\ HINT\ (STOCKFISH)\ -\/\ FEN\ and\ best\ move\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03241}03241\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03242}03242\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03243}03243\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03244}03244\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Build\ FEN\ from\ current\ board,\ status\ and\ history.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03245}03245\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Board:\ row\ 0\ =\ rank\ 1\ (white\ back),\ row\ 7\ =\ rank\ 8\ (black\ back).\ FEN\ ranks\ 8..1.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03246}03246\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Simplified:\ default\ castling\ KQkq,\ no\ en\ passant\ (sufficient\ for\ best-\/move).\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03247}03247\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Returns\ ''\ if\ board/status\ invalid\ or\ board\ not\ 8x8.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03248}03248\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03249}03249\ \ \ \ \ \textcolor{stringliteral}{"{}function\ boardAndStatusToFen(board,\ status,\ history)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03250}03250\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!board\ ||\ !status\ ||\ !Array.isArray(board)\ ||\ board.length\ !==\ 8)\ return\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03251}03251\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ rows\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03252}03252\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ for\ (let\ r\ =\ 7;\ r\ >=\ 0;\ r-\/-\/)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03253}03253\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!board[r]\ ||\ board[r].length\ !==\ 8)\ return\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03254}03254\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ let\ rank\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03255}03255\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ let\ empty\ =\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03256}03256\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ for\ (let\ c\ =\ 0;\ c\ <\ 8;\ c++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03257}03257\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ p\ =\ board[r][c];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03258}03258\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (p\ ===\ '\ '\ ||\ p\ ===\ '')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03259}03259\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ empty++;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03260}03260\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03261}03261\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (empty)\ \{\ rank\ +=\ empty;\ empty\ =\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03262}03262\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ rank\ +=\ p;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03263}03263\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03264}03264\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03265}03265\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (empty)\ rank\ +=\ empty;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03266}03266\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ rows.push(rank);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03267}03267\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03268}03268\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ piecePlacement\ =\ rows.join('/');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03269}03269\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ sideToMove\ =\ (status.current\_player\ ===\ 'White')\ ?\ 'w'\ :\ 'b';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03270}03270\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ castling\ =\ 'KQkq';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03271}03271\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ ep\ =\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03272}03272\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ halfmove\ =\ (history\ \&\&\ history.moves)\ ?\ history.moves.length\ :\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03273}03273\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ fullmove\ =\ Math.floor(halfmove\ /\ 2)\ +\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03274}03274\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ fen\ =\ piecePlacement\ +\ '\ '\ +\ sideToMove\ +\ '\ '\ +\ castling\ +\ '\ '\ +\ ep\ +\ '\ 0\ '\ +\ fullmove;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03275}03275\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (fen.length\ <\ 20\ ||\ fen.length\ >\ 120)\ return\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03276}03276\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ fen;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03277}03277\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03278}03278\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03279}03279\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Hint\ depth\ 1â€“18\ from\ settings\ (localStorage).\ Used\ by\ fetchStockfishBestMove.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03280}03280\ \ \ \ \ \textcolor{stringliteral}{"{}function\ getHintDepth()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03281}03281\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03282}03282\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ d\ =\ parseInt(localStorage.getItem('chessHintDepth')\ ||\ '10',\ 10);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03283}03283\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ d\ =\ isNaN(d)\ ?\ 10\ :\ d;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03284}03284\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ Math.min(18,\ Math.max(1,\ d));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03285}03285\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03286}03286\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ 10;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03287}03287\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03288}03288\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03289}03289\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03290}03290\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Whether\ to\ show\ move\ evaluation\ after\ each\ move\ (localStorage).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03291}03291\ \ \ \ \ \textcolor{stringliteral}{"{}function\ getEvaluateMoveEnabled()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03292}03292\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03293}03293\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ localStorage.getItem('chessEvaluateMove')\ ===\ 'true';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03294}03294\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03295}03295\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03296}03296\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03297}03297\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03298}03298\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03299}03299\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03300}03300\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Fetch\ best\ move\ and\ explanation\ from\ Chess-\/API.com\ (POST).\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03301}03301\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Returns\ \{\ from,\ to,\ eval,\ text,\ san,\ continuationArr,\ mate,\ winChance\ \}\ or\ null.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03302}03302\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03303}03303\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ fetchStockfishBestMove(fen)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03304}03304\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ depth\ =\ getHintDepth();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03305}03305\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ TIMEOUT\_MS\ =\ 15000;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03306}03306\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ API\_URL\ =\ 'https://chess-\/api.com/v1';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03307}03307\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (typeof\ console\ !==\ 'undefined'\ \&\&\ console.log)\ console.log('[Hint]\ Stockfish\ request\ (chess-\/api.com),\ FEN\ length:',\ fen.length);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03308}03308\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03309}03309\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ controller\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03310}03310\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03311}03311\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ controller\ =\ typeof\ AbortController\ !==\ 'undefined'\ ?\ new\ AbortController()\ :\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03312}03312\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ timeoutId\ =\ controller\ ?\ setTimeout(function\ ()\ \{\ if\ (controller)\ controller.abort();\ \},\ TIMEOUT\_MS)\ :\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03313}03313\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ opts\ =\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03314}03314\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03315}03315\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03316}03316\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ fen:\ fen,\ depth:\ depth\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03317}03317\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03318}03318\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (controller)\ opts.signal\ =\ controller.signal;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03319}03319\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ res\ =\ await\ fetch(API\_URL,\ opts);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03320}03320\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (controller\ \&\&\ timeoutId)\ clearTimeout(timeoutId);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03321}03321\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03322}03322\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!res.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03323}03323\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ Stockfish\ HTTP',\ res.status,\ res.statusText);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03324}03324\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03325}03325\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03326}03326\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ res.json().catch(function\ ()\ \{\ return\ null;\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03327}03327\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!data)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03328}03328\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ Stockfish\ invalid\ JSON');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03329}03329\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03330}03330\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03331}03331\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ from\ =\ data.from;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03332}03332\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ to\ =\ data.to;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03333}03333\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (typeof\ from\ !==\ 'string'\ ||\ typeof\ to\ !==\ 'string'\ ||\ from.length\ !==\ 2\ ||\ to.length\ !==\ 2)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03334}03334\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ move\ =\ data.move;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03335}03335\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (typeof\ move\ ===\ 'string'\ \&\&\ move.length\ >=\ 4)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03336}03336\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ from\ =\ move.substring(0,\ 2).toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03337}03337\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ to\ =\ move.substring(2,\ 4).toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03338}03338\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03339}03339\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ Stockfish\ response\ missing\ from/to\ or\ move:',\ data);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03340}03340\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03341}03341\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03342}03342\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03343}03343\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ from\ =\ from.toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03344}03344\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ to\ =\ to.toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03345}03345\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03346}03346\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (console.log)\ console.log('[Hint]\ Best\ move:',\ from,\ '-\/>',\ to);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03347}03347\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03348}03348\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ from:\ from,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03349}03349\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ to:\ to,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03350}03350\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ eval:\ typeof\ data.eval\ ===\ 'number'\ ?\ data.eval\ :\ null,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03351}03351\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ text:\ typeof\ data.text\ ===\ 'string'\ ?\ data.text\ :\ '',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03352}03352\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ san:\ typeof\ data.san\ ===\ 'string'\ ?\ data.san\ :\ (from\ +\ '-\/'\ +\ to),\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03353}03353\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ continuationArr:\ Array.isArray(data.continuationArr)\ ?\ data.continuationArr\ :\ [],\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03354}03354\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ mate:\ data.mate\ !=\ null\ \&\&\ typeof\ data.mate\ ===\ 'number'\ ?\ data.mate\ :\ null,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03355}03355\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ winChance:\ typeof\ data.winChance\ ===\ 'number'\ ?\ data.winChance\ :\ null\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03356}03356\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03357}03357\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (err)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03358}03358\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (controller\ \&\&\ controller.signal\ \&\&\ controller.signal.aborted)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03359}03359\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ Stockfish\ timeout');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03360}03360\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03361}03361\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (console.error)\ console.error('[Hint]\ Stockfish\ error:',\ err.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03362}03362\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03363}03363\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03364}03364\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03365}03365\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03366}03366\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03367}03367\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Show\ hint\ on\ board\ (hint-\/from,\ hint-\/to)\ and\ optionally\ send\ to\ LED.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03368}03368\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showHintOnBoard(from,\ to)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03369}03369\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03370}03370\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('hint-\/from',\ 'hint-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03371}03371\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03372}03372\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ fromCol\ =\ from.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03373}03373\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ fromRow\ =\ parseInt(from[1],\ 10)\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03374}03374\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ toCol\ =\ to.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03375}03375\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ toRow\ =\ parseInt(to[1],\ 10)\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03376}03376\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ fromSquare\ =\ document.querySelector('[data-\/row=\(\backslash\)"{}'\ +\ fromRow\ +\ '\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'\ +\ fromCol\ +\ '\(\backslash\)"{}]');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03377}03377\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ toSquare\ =\ document.querySelector('[data-\/row=\(\backslash\)"{}'\ +\ toRow\ +\ '\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'\ +\ toCol\ +\ '\(\backslash\)"{}]');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03378}03378\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (fromSquare)\ fromSquare.classList.add('hint-\/from');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03379}03379\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (toSquare)\ toSquare.classList.add('hint-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03380}03380\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03381}03381\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03382}03382\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Replace\ key\ English\ phrases\ from\ API\ text\ with\ Czech\ (for\ hint\ explanation).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03383}03383\ \ \ \ \ \textcolor{stringliteral}{"{}function\ hintTextToCzech(s)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03384}03384\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!s\ ||\ typeof\ s\ !==\ 'string')\ return\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03385}03385\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ t\ =\ s\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03386}03386\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bWhite\ is\ winning\(\backslash\)\(\backslash\)b/gi,\ 'BÃ­lÃ½\ vyhrÃ¡vÃ¡')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03387}03387\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bBlack\ is\ winning\(\backslash\)\(\backslash\)b/gi,\ 'ÄŒernÃ½\ vyhrÃ¡vÃ¡')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03388}03388\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bWhite\ is\ better\(\backslash\)\(\backslash\)b/gi,\ 'BÃ­lÃ½\ je\ lÃ©pe')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03389}03389\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bBlack\ is\ better\(\backslash\)\(\backslash\)b/gi,\ 'ÄŒernÃ½\ je\ lÃ©pe')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03390}03390\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bThe\ game\ is\ balanced\(\backslash\)\(\backslash\).?\(\backslash\)\(\backslash\)b/gi,\ 'Hra\ je\ vyrovnanÃ¡.')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03391}03391\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bgame\ is\ balanced\(\backslash\)\(\backslash\).?\(\backslash\)\(\backslash\)b/gi,\ 'hra\ je\ vyrovnanÃ¡.')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03392}03392\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bDepth\ \(\backslash\)\(\backslash\)d+\(\backslash\)\(\backslash\)b/gi,\ function\ (m)\ \{\ return\ 'Hloubka\ '\ +\ m.replace(/\(\backslash\)\(\backslash\)D/g,\ '');\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03393}03393\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ .replace(/\(\backslash\)\(\backslash\)bMove\(\backslash\)\(\backslash\)s+/gi,\ 'Tah\ ');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03394}03394\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ t;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03395}03395\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03396}03396\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03397}03397\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Format\ UCI\ move\ (e2e4)\ as\ e2â€“e4.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03398}03398\ \ \ \ \ \textcolor{stringliteral}{"{}function\ formatUciMove(uci)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03399}03399\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!uci\ ||\ uci.length\ <\ 4)\ return\ uci\ ||\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03400}03400\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ uci.substring(0,\ 2)\ +\ 'â€“'\ +\ uci.substring(2,\ 4);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03401}03401\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03402}03402\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03403}03403\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Build\ one\ short,\ child-\/friendly\ sentence\ for\ the\ hint\ (easy\ to\ read).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03404}03404\ \ \ \ \ \textcolor{stringliteral}{"{}function\ buildHintMessage(data)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03405}03405\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ parts\ =\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03406}03406\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ san\ =\ (data.san\ ||\ (data.from\ +\ 'â€“'\ +\ data.to)).trim();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03407}03407\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ parts.push('PoÄÃ­taÄ\ radÃ­:\ zahraj\ tah\ '\ +\ san\ +\ '.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03408}03408\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03409}03409\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ e\ =\ data.eval;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03410}03410\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (e\ !=\ null\ \&\&\ typeof\ e\ ===\ 'number')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03411}03411\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (e\ >\ 0.3)\ parts.push('BÃ­lÃ½\ mÃ¡\ trochu\ vÃ½hodu.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03412}03412\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ else\ if\ (e\ <\ -\/0.3)\ parts.push('ÄŒernÃ½\ mÃ¡\ trochu\ vÃ½hodu.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03413}03413\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ else\ parts.push('TeÄ\ je\ to\ vyrovnanÃ©.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03414}03414\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03415}03415\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03416}03416\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (Array.isArray(data.continuationArr)\ \&\&\ data.continuationArr.length\ >\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03417}03417\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ first\ =\ data.continuationArr.slice(0,\ 4).map(formatUciMove).join(',\ ');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03418}03418\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ parts.push('Pak\ mÅ¯Å¾eÅ¡\ hrÃ¡t\ tÅ™eba\ '\ +\ first\ +\ '.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03419}03419\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03420}03420\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03421}03421\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (data.mate\ !=\ null\ \&\&\ typeof\ data.mate\ ===\ 'number')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03422}03422\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.mate\ ===\ 0)\ parts.push('Je\ mat!');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03423}03423\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ else\ if\ (data.mate\ >\ 0)\ parts.push('Za\ '\ +\ data.mate\ +\ '\ tahÅ¯\ bude\ mat\ bÃ­lÃ©ho!');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03424}03424\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ else\ parts.push('Za\ '\ +\ (-\/data.mate)\ +\ '\ tahÅ¯\ bude\ mat\ ÄernÃ©ho!');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03425}03425\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03426}03426\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03427}03427\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return\ parts.join('\ ');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03428}03428\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03429}03429\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03430}03430\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Show\ hint\ explanation\ block\ (one\ simple\ message\ for\ children).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03431}03431\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showHintExplanation(data)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03432}03432\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ el\ =\ document.getElementById('hint-\/explanation');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03433}03433\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!el)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03434}03434\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ msgEl\ =\ document.getElementById('hint-\/explanation-\/message');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03435}03435\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!msgEl)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03436}03436\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ msgEl.textContent\ =\ buildHintMessage(data);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03437}03437\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ el.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03438}03438\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03439}03439\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03440}03440\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Show\ hint\ block\ with\ error/info\ message\ (napÅ™.\ Å¾Ã¡dnÃ½\ internet).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03441}03441\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showHintError(message)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03442}03442\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ el\ =\ document.getElementById('hint-\/explanation');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03443}03443\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!el)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03444}03444\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ msgEl\ =\ document.getElementById('hint-\/explanation-\/message');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03445}03445\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!msgEl)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03446}03446\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ msgEl.textContent\ =\ message;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03447}03447\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ el.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03448}03448\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03449}03449\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03450}03450\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Hide\ hint\ explanation\ block\ (on\ new\ move\ /\ fetchData).\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03451}03451\ \ \ \ \ \textcolor{stringliteral}{"{}function\ hideHintExplanation()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03452}03452\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ el\ =\ document.getElementById('hint-\/explanation');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03453}03453\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (el)\ el.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03454}03454\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03455}03455\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03456}03456\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Grade:\ 'best'\ |\ 'good'\ |\ 'inaccuracy'\ |\ 'mistake'\ |\ 'blunder'\ |\ 'error'\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03457}03457\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showMoveEvaluation(text,\ grade)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03458}03458\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ el\ =\ document.getElementById('move-\/evaluation');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03459}03459\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!el)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03460}03460\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ msgEl\ =\ document.getElementById('move-\/evaluation-\/message');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03461}03461\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (msgEl)\ msgEl.textContent\ =\ text;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03462}03462\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ grade\ =\ grade\ ||\ 'good';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03463}03463\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ el.className\ =\ 'move-\/evaluation\ move-\/evaluation-\/-\/'\ +\ grade;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03464}03464\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ el.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03465}03465\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03466}03466\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03467}03467\ \ \ \ \ \textcolor{stringliteral}{"{}/**\ Hide\ move\ evaluation\ block.\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03468}03468\ \ \ \ \ \textcolor{stringliteral}{"{}function\ hideMoveEvaluation()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03469}03469\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ el\ =\ document.getElementById('move-\/evaluation');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03470}03470\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (el)\ el.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03471}03471\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03472}03472\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03473}03473\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03474}03474\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Evaluate\ the\ last\ played\ move:\ call\ API\ for\ position\ before\ and\ (if\ needed)\ after,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03475}03475\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ then\ show\ a\ short\ Czech\ message\ and\ barvu\ podle\ kvality\ (best=zelenÃ¡,\ blunder=ÄervenÃ¡,\ â€¦).\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03476}03476\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03477}03477\ \ \ \ \ \textcolor{stringliteral}{"{}function\ evaluateMoveAsync(fenBefore,\ fenAfter,\ playedMove,\ historyLength)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03478}03478\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!statusData.internet\_connected)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03479}03479\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showMoveEvaluation('ZhodnocenÃ­\ vyÅ¾aduje\ pÅ™ipojenÃ­\ k\ internetu\ (WiFi).',\ 'error');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03480}03480\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03481}03481\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03482}03482\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ playedUci\ =\ ((playedMove.from\ ||\ '')\ +\ (playedMove.to\ ||\ '')).toLowerCase().replace(/[\string^a-\/h1-\/8]/g,\ '');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03483}03483\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (playedUci.length\ <\ 4)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03484}03484\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03485}03485\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ fetchStockfishBestMove(fenBefore).then(function\ (beforeData)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03486}03486\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!beforeData)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03487}03487\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ errMsg\ =\ 'ZhodnocenÃ­\ nebylo\ k\ dispozici.\ Zkontrolujte\ pÅ™ipojenÃ­\ k\ internetu.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03488}03488\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showMoveEvaluation(errMsg,\ 'error');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03489}03489\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ 'error',\ msg:\ errMsg\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03490}03490\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03491}03491\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03492}03492\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03493}03493\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ bestUci\ =\ ((beforeData.from\ ||\ '')\ +\ (beforeData.to\ ||\ '')).toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03494}03494\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (playedUci\ ===\ bestUci)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03495}03495\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ msgBest\ =\ 'VÃ½bornÃ½\ tah!\ Byl\ to\ nejlepÅ¡Ã­\ tah.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03496}03496\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showMoveEvaluation(msgBest,\ 'best');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03497}03497\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ 'best',\ msg:\ msgBest\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03498}03498\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03499}03499\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03500}03500\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03501}03501\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ bestFormatted\ =\ formatUciMove(bestUci);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03502}03502\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ fetchStockfishBestMove(fenAfter).then(function\ (afterData)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03503}03503\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (!afterData)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03504}03504\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ msgInacc\ =\ 'LepÅ¡Ã­\ byl\ tah\ '\ +\ bestFormatted\ +\ '.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03505}03505\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ showMoveEvaluation(msgInacc,\ 'inaccuracy');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03506}03506\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ 'inaccuracy',\ msg:\ msgInacc\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03507}03507\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03508}03508\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03509}03509\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03510}03510\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ evalBefore\ =\ beforeData.eval\ !=\ null\ \&\&\ typeof\ beforeData.eval\ ===\ 'number'\ ?\ beforeData.eval\ :\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03511}03511\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ evalAfter\ =\ afterData.eval\ !=\ null\ \&\&\ typeof\ afterData.eval\ ===\ 'number'\ ?\ afterData.eval\ :\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03512}03512\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ whiteJustMoved\ =\ (historyLength\ -\/\ 1)\ \%\ 2\ ===\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03513}03513\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ scoreDrop\ =\ whiteJustMoved\ ?\ (evalBefore\ -\/\ evalAfter)\ :\ (evalAfter\ -\/\ evalBefore);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03514}03514\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ msg,\ grade;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03515}03515\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (scoreDrop\ <=\ 0.1)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03516}03516\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ 'DobrÃ½\ tah.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03517}03517\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grade\ =\ 'good';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03518}03518\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ if\ (scoreDrop\ <=\ 0.4)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03519}03519\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ 'SlabÅ¡Ã­\ tah.\ LepÅ¡Ã­\ bylo\ '\ +\ bestFormatted\ +\ '.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03520}03520\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grade\ =\ 'inaccuracy';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03521}03521\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ if\ (scoreDrop\ <=\ 1.2)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03522}03522\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ 'Chyba.\ Pozice\ se\ zhorÅ¡ila.\ LepÅ¡Ã­\ bylo\ '\ +\ bestFormatted\ +\ '.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03523}03523\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grade\ =\ 'mistake';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03524}03524\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03525}03525\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ msg\ =\ 'VÃ¡Å¾nÃ¡\ chyba.\ LepÅ¡Ã­\ bylo\ '\ +\ bestFormatted\ +\ '.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03526}03526\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ grade\ =\ 'blunder';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03527}03527\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03528}03528\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showMoveEvaluation(msg,\ grade);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03529}03529\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ grade,\ msg:\ msg\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03530}03530\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03531}03531\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}).catch(function\ ()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03532}03532\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ errMsg\ =\ 'ZhodnocenÃ­\ nebylo\ k\ dispozici.\ Zkontrolujte\ pÅ™ipojenÃ­\ k\ internetu.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03533}03533\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showMoveEvaluation(errMsg,\ 'error');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03534}03534\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ 'error',\ msg:\ errMsg\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03535}03535\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03536}03536\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03537}03537\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}).catch(function\ ()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03538}03538\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ errMsg\ =\ 'ZhodnocenÃ­\ nebylo\ k\ dispozici.\ Zkontrolujte\ pÅ™ipojenÃ­\ k\ internetu.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03539}03539\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showMoveEvaluation(errMsg,\ 'error');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03540}03540\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ moveEvaluations[historyLength\ -\/\ 1]\ =\ \{\ grade:\ 'error',\ msg:\ errMsg\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03541}03541\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03542}03542\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03543}03543\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03544}03544\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03545}03545\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ requestHint()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03546}03546\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (sandboxMode\ ||\ reviewMode)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03547}03547\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ status\ =\ statusData\ ||\ \{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03548}03548\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ state\ =\ (status.game\_state\ ||\ '').toLowerCase();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03549}03549\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (state\ !==\ 'active'\ \&\&\ state\ !==\ 'playing')\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03550}03550\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (status.game\_end\ \&\&\ status.game\_end.ended)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03551}03551\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (state\ ===\ 'promotion')\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03552}03552\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (status.castling\_in\_progress)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03553}03553\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03554}03554\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ btn\ =\ document.getElementById('hint-\/btn');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03555}03555\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (btn)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03556}03556\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ btn.disabled\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03557}03557\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ btn.textContent\ =\ 'NaÄÃ­tÃ¡mâ€¦';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03558}03558\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03559}03559\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03560}03560\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!status.internet\_connected)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03561}03561\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showHintError('NÃ¡povÄ›da\ vyÅ¾aduje\ pÅ™ipojenÃ­\ k\ internetu\ (WiFi).');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03562}03562\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (btn)\ \{\ btn.disabled\ =\ false;\ btn.textContent\ =\ 'NÃ¡povÄ›da';\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03563}03563\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03564}03564\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03565}03565\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03566}03566\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03567}03567\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ fen\ =\ boardAndStatusToFen(boardData,\ status,\ historyData);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03568}03568\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!fen)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03569}03569\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ Could\ not\ build\ FEN');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03570}03570\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showHintError('Nelze\ naÄÃ­st\ pozici.\ Obnovte\ strÃ¡nku.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03571}03571\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (btn)\ \{\ btn.disabled\ =\ false;\ btn.textContent\ =\ 'NÃ¡povÄ›da';\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03572}03572\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03573}03573\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03574}03574\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ move\ =\ await\ fetchStockfishBestMove(fen);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03575}03575\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (move)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03576}03576\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showHintOnBoard(move.from,\ move.to);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03577}03577\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showHintExplanation(move);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03578}03578\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03579}03579\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ fetch('/api/game/hint\_highlight',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03580}03580\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03581}03581\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03582}03582\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ from:\ move.from,\ to:\ move.to\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03583}03583\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03584}03584\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03585}03585\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (console.warn)\ console.warn('[Hint]\ LED\ highlight\ failed:',\ e.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03586}03586\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03587}03587\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (btn)\ \{\ btn.disabled\ =\ false;\ btn.textContent\ =\ 'NÃ¡povÄ›da';\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03588}03588\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03589}03589\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showHintError('NÃ¡povÄ›da\ nenÃ­\ k\ dispozici.\ Zkuste\ pozdÄ›ji\ nebo\ zkontrolujte\ pÅ™ipojenÃ­\ k\ internetu.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03590}03590\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (btn)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03591}03591\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btn.disabled\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03592}03592\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btn.textContent\ =\ 'NÃ¡povÄ›da';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03593}03593\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03594}03594\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03595}03595\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (err)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03596}03596\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (console.error)\ console.error('[Hint]\ requestHint\ error:',\ err.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03597}03597\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showHintError('NÃ¡povÄ›da\ nenÃ­\ k\ dispozici.\ Zkuste\ pozdÄ›ji\ nebo\ zkontrolujte\ pÅ™ipojenÃ­\ k\ internetu.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03598}03598\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (btn)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03599}03599\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ btn.disabled\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03600}03600\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ btn.textContent\ =\ 'NÃ¡povÄ›da';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03601}03601\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03602}03602\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03603}03603\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03604}03604\ \ \ \ \ \textcolor{stringliteral}{"{}window.requestHint\ =\ requestHint;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03605}03605\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03606}03606\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03607}03607\ \ \ \ \ \textcolor{stringliteral}{"{}//\ UPDATE\ FUNCTIONS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03608}03608\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03609}03609\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03610}03610\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateBoard(board)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03611}03611\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Only\ clear\ hint\ when\ board\ actually\ changed\ (new\ move),\ not\ on\ every\ periodic\ fetch\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03612}03612\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ boardUnchanged\ =\ boardData\ \&\&\ board.length\ ===\ 8\ \&\&\ boardData.length\ ===\ 8\ \&\&\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03613}03613\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ JSON.stringify(board)\ ===\ JSON.stringify(boardData);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03614}03614\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ boardData\ =\ board;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03615}03615\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ loading\ =\ document.getElementById('loading');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03616}03616\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (loading)\ loading.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03617}03617\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03618}03618\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!boardUnchanged)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03619}03619\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03620}03620\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ sq.classList.remove('hint-\/from',\ 'hint-\/to');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03621}03621\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03622}03622\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ hideHintExplanation();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03623}03623\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03624}03624\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03625}03625\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ NEPÅ˜IDÃVAT\ clearHighlights()\ -\/\ highlights\ jsou\ Å™Ã­zenÃ©\ pÅ™es\ updateStatus()\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03626}03626\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ (lifted,\ error-\/invalid,\ error-\/original\ jsou\ serverem\ Å™Ã­zenÃ©\ stavy)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03627}03627\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03628}03628\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ for\ (let\ row\ =\ 0;\ row\ <\ 8;\ row++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03629}03629\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ for\ (let\ col\ =\ 0;\ col\ <\ 8;\ col++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03630}03630\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ piece\ =\ board[row][col];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03631}03631\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ pieceElement\ =\ document.getElementById('piece-\/'\ +\ (row\ *\ 8\ +\ col));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03632}03632\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (pieceElement)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03633}03633\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pieceElement.textContent\ =\ pieceSymbols[piece]\ ||\ '\ ';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03634}03634\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (piece\ !==\ '\ ')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03635}03635\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pieceElement.className\ =\ 'piece\ '\ +\ (piece\ ===\ piece.toUpperCase()\ ?\ 'white'\ :\ 'black');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03636}03636\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03637}03637\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pieceElement.className\ =\ 'piece';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03638}03638\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03639}03639\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03640}03640\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03641}03641\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03642}03642\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03643}03643\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03644}03644\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03645}03645\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ENDGAME\ REPORT\ FUNCTIONS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03646}03646\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03647}03647\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03648}03648\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Zobrazit\ endgame\ report\ na\ webu\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03649}03649\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ showEndgameReport(gameEnd)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03650}03650\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('ðŸ†\ showEndgameReport()\ called\ with:',\ gameEnd);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03651}03651\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03652}03652\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Pokud\ uÅ¾\ je\ banner\ zobrazen,\ nedÄ›lat\ nic\ (aby\ se\ nepÅ™ekresloval)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03653}03653\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (endgameReportShown\ \&\&\ document.getElementById('endgame-\/banner'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03654}03654\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('Endgame\ report\ already\ shown,\ skipping...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03655}03655\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03656}03656\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03657}03657\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03658}03658\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ NaÄÃ­st\ advantage\ history\ pro\ graf\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03659}03659\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ advantageDataLocal\ =\ \{\ history:\ [],\ white\_checks:\ 0,\ black\_checks:\ 0,\ white\_castles:\ 0,\ black\_castles:\ 0\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03660}03660\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03661}03661\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/advantage');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03662}03662\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ advantageDataLocal\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03663}03663\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('Advantage\ data\ loaded:',\ advantageDataLocal);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03664}03664\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03665}03665\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Failed\ to\ load\ advantage\ data:',\ e);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03666}03666\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03667}03667\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03668}03668\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ UrÄit\ vÃ½sledek\ a\ barvy\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03669}03669\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ title\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03670}03670\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ subtitle\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03671}03671\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ accentColor\ =\ '\#4CAF50';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03672}03672\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ bgGradient\ =\ 'linear-\/gradient(135deg,\ \#1e3a1e,\ \#2d4a2d)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03673}03673\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03674}03674\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (gameEnd.winner\ ===\ 'Draw')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03675}03675\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ title\ =\ 'REMÃZA';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03676}03676\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ subtitle\ =\ gameEnd.reason;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03677}03677\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ accentColor\ =\ '\#FF9800';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03678}03678\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ bgGradient\ =\ 'linear-\/gradient(135deg,\ \#3a2e1e,\ \#4a3e2d)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03679}03679\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03680}03680\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ title\ =\ \`{}\$\{gameEnd.winner.toUpperCase()\}\ VYHRÃL!`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03681}03681\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ subtitle\ =\ gameEnd.reason;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03682}03682\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ accentColor\ =\ gameEnd.winner\ ===\ 'White'\ ?\ '\#4CAF50'\ :\ '\#2196F3';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03683}03683\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ bgGradient\ =\ gameEnd.winner\ ===\ 'White'\ ?\ 'linear-\/gradient(135deg,\ \#1e3a1e,\ \#2d4a2d)'\ :\ 'linear-\/gradient(135deg,\ \#1e2a3a,\ \#2d3a4a)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03684}03684\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03685}03685\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03686}03686\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ ZÃ­skat\ statistiky\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03687}03687\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ whiteMoves\ =\ Math.ceil(statusData.move\_count\ /\ 2);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03688}03688\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ blackMoves\ =\ Math.floor(statusData.move\_count\ /\ 2);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03689}03689\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ whiteCaptured\ =\ capturedData.white\_captured\ ||\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03690}03690\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ blackCaptured\ =\ capturedData.black\_captured\ ||\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03691}03691\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03692}03692\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Material\ advantage\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03693}03693\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ pieceValues\ =\ \{\ p:\ 1,\ n:\ 3,\ b:\ 3,\ r:\ 5,\ q:\ 9,\ P:\ 1,\ N:\ 3,\ B:\ 3,\ R:\ 5,\ Q:\ 9\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03694}03694\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ whiteMaterial\ =\ 0,\ blackMaterial\ =\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03695}03695\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ whiteCaptured.forEach(p\ =>\ whiteMaterial\ +=\ pieceValues[p]\ ||\ 0);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03696}03696\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ blackCaptured.forEach(p\ =>\ blackMaterial\ +=\ pieceValues[p]\ ||\ 0);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03697}03697\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ materialDiff\ =\ whiteMaterial\ -\/\ blackMaterial;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03698}03698\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ materialText\ =\ materialDiff\ >\ 0\ ?\ \`{}White\ +\$\{materialDiff\}`\ :\ materialDiff\ <\ 0\ ?\ \`{}Black\ +\$\{-\/materialDiff\}`\ :\ 'VyrovnÃ¡no';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03699}03699\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03700}03700\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ VytvoÅ™it\ SVG\ graf\ vÃ½hody\ (jako\ chess.com)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03701}03701\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ graphSVG\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03702}03702\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (advantageDataLocal.history\ \&\&\ advantageDataLocal.history.length\ >\ 1)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03703}03703\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ history\ =\ advantageDataLocal.history;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03704}03704\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ width\ =\ 280;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03705}03705\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ height\ =\ 100;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03706}03706\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ maxAdvantage\ =\ Math.max(10,\ ...history.map(Math.abs));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03707}03707\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ scaleY\ =\ height\ /\ (2\ *\ maxAdvantage);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03708}03708\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ scaleX\ =\ width\ /\ (history.length\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03709}03709\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03710}03710\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ VytvoÅ™it\ body\ pro\ polyline\ (0,0\ je\ nahoÅ™e\ vlevo,\ y\ roste\ dolÅ¯)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03711}03711\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ let\ points\ =\ history.map((adv,\ i)\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03712}03712\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ x\ =\ i\ *\ scaleX;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03713}03713\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ y\ =\ height\ /\ 2\ -\/\ adv\ *\ scaleY;\ \ //\ PÅ™evrÃ¡tit\ Y\ (White\ nahoÅ™e,\ Black\ dole)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03714}03714\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return\ \`{}\$\{x\},\$\{y\}`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03715}03715\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}).join('\ ');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03716}03716\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03717}03717\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ VytvoÅ™it\ polygon\ pro\ vyplnÄ›nou\ oblast\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03718}03718\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ let\ areaPoints\ =\ \`{}0,\$\{height\ /\ 2\}\ \$\{points\}\ \$\{width\},\$\{height\ /\ 2\}`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03719}03719\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03720}03720\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ graphSVG\ =\ \`{}<svg\ width=\(\backslash\)"{}280\(\backslash\)"{}\ height=\(\backslash\)"{}100\(\backslash\)"{}\ style=\(\backslash\)"{}border-\/radius:6px;background:rgba(0,0,0,0.2);\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03721}03721\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <!-\/-\/\ StÅ™edovÃ¡\ ÄÃ¡ra\ (vyrovnanÃ¡\ pozice)\ -\/-\/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03722}03722\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <line\ x1=\(\backslash\)"{}0\(\backslash\)"{}\ y1=\(\backslash\)"{}\$\{height\ /\ 2\}\(\backslash\)"{}\ x2=\(\backslash\)"{}\$\{width\}\(\backslash\)"{}\ y2=\(\backslash\)"{}\$\{height\ /\ 2\}\(\backslash\)"{}\ stroke=\(\backslash\)"{}\#555\(\backslash\)"{}\ stroke-\/width=\(\backslash\)"{}1\(\backslash\)"{}\ stroke-\/dasharray=\(\backslash\)"{}3,3\(\backslash\)"{}/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03723}03723\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <!-\/-\/\ VyplnÄ›nÃ¡\ oblast\ pod\ kÅ™ivkou\ -\/-\/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03724}03724\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <polygon\ points=\(\backslash\)"{}\$\{areaPoints\}\(\backslash\)"{}\ fill=\(\backslash\)"{}\$\{accentColor\}\(\backslash\)"{}\ opacity=\(\backslash\)"{}0.2\(\backslash\)"{}/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03725}03725\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <!-\/-\/\ KÅ™ivka\ vÃ½hody\ -\/-\/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03726}03726\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <polyline\ points=\(\backslash\)"{}\$\{points\}\(\backslash\)"{}\ fill=\(\backslash\)"{}none\(\backslash\)"{}\ stroke=\(\backslash\)"{}\$\{accentColor\}\(\backslash\)"{}\ stroke-\/width=\(\backslash\)"{}2\(\backslash\)"{}\ stroke-\/linejoin=\(\backslash\)"{}round\(\backslash\)"{}/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03727}03727\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <!-\/-\/\ TeÄky\ na\ koncÃ­ch\ -\/-\/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03728}03728\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <circle\ cx=\(\backslash\)"{}0\(\backslash\)"{}\ cy=\(\backslash\)"{}\$\{height\ /\ 2\}\(\backslash\)"{}\ r=\(\backslash\)"{}3\(\backslash\)"{}\ fill=\(\backslash\)"{}\$\{accentColor\}\(\backslash\)"{}/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03729}03729\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <circle\ cx=\(\backslash\)"{}\$\{(history.length\ -\/\ 1)\ *\ scaleX\}\(\backslash\)"{}\ cy=\(\backslash\)"{}\$\{height\ /\ 2\ -\/\ history[history.length\ -\/\ 1]\ *\ scaleY\}\(\backslash\)"{}\ r=\(\backslash\)"{}4\(\backslash\)"{}\ fill=\(\backslash\)"{}\$\{accentColor\}\(\backslash\)"{}/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03730}03730\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <!-\/-\/\ Popisky\ -\/-\/>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03731}03731\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <text\ x=\(\backslash\)"{}5\(\backslash\)"{}\ y=\(\backslash\)"{}12\(\backslash\)"{}\ fill=\(\backslash\)"{}\#888\(\backslash\)"{}\ font-\/size=\(\backslash\)"{}10\(\backslash\)"{}\ font-\/weight=\(\backslash\)"{}600\(\backslash\)"{}>White</text>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03732}03732\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <text\ x=\(\backslash\)"{}5\(\backslash\)"{}\ y=\(\backslash\)"{}\$\{height\ -\/\ 2\}\(\backslash\)"{}\ fill=\(\backslash\)"{}\#888\(\backslash\)"{}\ font-\/size=\(\backslash\)"{}10\(\backslash\)"{}\ font-\/weight=\(\backslash\)"{}600\(\backslash\)"{}>Black</text>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03733}03733\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ </svg>`;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03734}03734\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03735}03735\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03736}03736\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ VytvoÅ™it\ novÃ½\ banner\ -\/\ VLEVO\ OD\ BOARDU,\ NE\ UPROSTÅ˜ED!\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03737}03737\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ banner\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03738}03738\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ banner.id\ =\ 'endgame-\/banner';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03739}03739\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03740}03740\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Na\ mobilu\ -\/\ jinÃ©\ umÃ­stÄ›nÃ­\ (nahoÅ™e,\ plnÃ¡\ Å¡Ã­Å™ka)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03741}03741\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (window.innerWidth\ <=\ 768)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03742}03742\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ banner.style.cssText\ =\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03743}03743\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ position:\ fixed;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03744}03744\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ left:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03745}03745\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ right:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03746}03746\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ top:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03747}03747\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ width:\ auto;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03748}03748\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ max-\/height:\ 80vh;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03749}03749\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ transform:\ none;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03750}03750\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ overflow-\/y:\ auto;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03751}03751\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ background:\ \$\{bgGradient\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03752}03752\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ border:\ 2px\ solid\ \$\{accentColor\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03753}03753\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ border-\/radius:\ 12px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03754}03754\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ padding:\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03755}03755\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ box-\/shadow:\ 0\ 8px\ 32px\ rgba(0,0,0,0.6);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03756}03756\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ z-\/index:\ 9999;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03757}03757\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ animation:\ slideInTop\ 0.4s\ ease-\/out;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03758}03758\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \`{};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03759}03759\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03760}03760\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ banner.style.cssText\ =\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03761}03761\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ position:\ fixed;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03762}03762\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ left:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03763}03763\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ top:\ 50\%;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03764}03764\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ transform:\ translateY(-\/50\%);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03765}03765\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ width:\ 320px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03766}03766\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ max-\/height:\ 90vh;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03767}03767\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ overflow-\/y:\ auto;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03768}03768\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ background:\ \$\{bgGradient\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03769}03769\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ border:\ 2px\ solid\ \$\{accentColor\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03770}03770\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ border-\/radius:\ 12px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03771}03771\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ padding:\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03772}03772\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ box-\/shadow:\ 0\ 8px\ 32px\ rgba(0,0,0,0.6),\ 0\ 0\ 40px\ \$\{accentColor\}40;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03773}03773\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ z-\/index:\ 9999;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03774}03774\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ animation:\ slideInLeft\ 0.4s\ ease-\/out;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03775}03775\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ backdrop-\/filter:\ blur(10px);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03776}03776\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \`{};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03777}03777\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03778}03778\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03779}03779\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ HTML\ obsah\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03780}03780\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ banner.innerHTML\ =\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03781}03781\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:\$\{accentColor\};padding:20px;text-\/align:center;border-\/radius:10px\ 10px\ 0\ 0;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03782}03782\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <h2\ style=\(\backslash\)"{}margin:0;color:white;font-\/size:24px;font-\/weight:700;text-\/shadow:0\ 2px\ 4px\ rgba(0,0,0,0.4);\(\backslash\)"{}>\$\{title\}</h2>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03783}03783\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <p\ style=\(\backslash\)"{}margin:8px\ 0\ 0\ 0;color:rgba(255,255,255,0.9);font-\/size:14px;font-\/weight:500;\(\backslash\)"{}>\$\{subtitle\}</p>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03784}03784\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03785}03785\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}padding:20px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03786}03786\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \$\{graphSVG\ ?\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03787}03787\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(0,0,0,0.3);border-\/radius:8px;padding:15px;margin-\/bottom:15px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03788}03788\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <h3\ style=\(\backslash\)"{}margin:0\ 0\ 12px\ 0;color:\$\{accentColor\};font-\/size:16px;font-\/weight:600;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03789}03789\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PrÅ¯bÄ›h\ hry\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03790}03790\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </h3>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03791}03791\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \$\{graphSVG\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03792}03792\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}display:flex;justify-\/content:space-\/between;margin-\/top:8px;font-\/size:11px;color:\#888;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03793}03793\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <span>ZaÄÃ¡tek</span>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03794}03794\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <span>Tah\ \$\{advantageDataLocal.count\ ||\ 0\}</span>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03795}03795\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03796}03796\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ </div>`\ :\ ''\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03797}03797\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(0,0,0,0.3);border-\/radius:8px;padding:15px;margin-\/bottom:15px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03798}03798\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <h3\ style=\(\backslash\)"{}margin:0\ 0\ 12px\ 0;color:\$\{accentColor\};font-\/size:16px;font-\/weight:600;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03799}03799\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Statistiky\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03800}03800\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </h3>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03801}03801\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}display:grid;grid-\/template-\/columns:1fr\ 1fr;gap:10px;font-\/size:13px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03802}03802\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03803}03803\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>Tahy</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03804}03804\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#e0e0e0;font-\/weight:600;\(\backslash\)"{}>BÃ­lÃ½\ \$\{whiteMoves\}\ |\ ÄŒernÃ½\ \$\{blackMoves\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03805}03805\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03806}03806\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03807}03807\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>MateriÃ¡l</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03808}03808\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\$\{accentColor\};font-\/weight:600;\(\backslash\)"{}>\$\{materialText\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03809}03809\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03810}03810\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03811}03811\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>SebrÃ¡no</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03812}03812\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#e0e0e0;font-\/weight:600;\(\backslash\)"{}>BÃ­lÃ½\ \$\{whiteCaptured.length\}\ |\ ÄŒernÃ½\ \$\{blackCaptured.length\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03813}03813\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03814}03814\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03815}03815\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>Celkem</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03816}03816\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#e0e0e0;font-\/weight:600;\(\backslash\)"{}>\$\{statusData.move\_count\}\ tahÅ¯</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03817}03817\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03818}03818\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03819}03819\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>Å achy</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03820}03820\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#e0e0e0;font-\/weight:600;\(\backslash\)"{}>BÃ­lÃ½\ \$\{advantageDataLocal.white\_checks\ ||\ 0\}\ |\ ÄŒernÃ½\ \$\{advantageDataLocal.black\_checks\ ||\ 0\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03821}03821\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03822}03822\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(255,255,255,0.05);padding:8px;border-\/radius:6px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03823}03823\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>RoÅ¡Ã¡dy</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03824}03824\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#e0e0e0;font-\/weight:600;\(\backslash\)"{}>BÃ­lÃ½\ \$\{advantageDataLocal.white\_castles\ ||\ 0\}\ |\ ÄŒernÃ½\ \$\{advantageDataLocal.black\_castles\ ||\ 0\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03825}03825\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03826}03826\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03827}03827\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03828}03828\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}background:rgba(0,0,0,0.3);border-\/radius:8px;padding:15px;margin-\/bottom:15px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03829}03829\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <h3\ style=\(\backslash\)"{}margin:0\ 0\ 12px\ 0;color:\$\{accentColor\};font-\/size:16px;font-\/weight:600;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03830}03830\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SebranÃ©\ figurky\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03831}03831\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </h3>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03832}03832\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}margin-\/bottom:10px;\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03833}03833\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>White\ sebral\ (\$\{whiteCaptured.length\})</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03834}03834\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}font-\/size:20px;line-\/height:1.4;\(\backslash\)"{}>\$\{whiteCaptured.map(p\ =>\ pieceSymbols[p]\ ||\ p).join('\ ')\ ||\ 'âˆ’'\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03835}03835\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03836}03836\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03837}03837\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}color:\#888;font-\/size:11px;margin-\/bottom:4px;\(\backslash\)"{}>Black\ sebral\ (\$\{blackCaptured.length\})</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03838}03838\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <div\ style=\(\backslash\)"{}font-\/size:20px;line-\/height:1.4;\(\backslash\)"{}>\$\{blackCaptured.map(p\ =>\ pieceSymbols[p]\ ||\ p).join('\ ')\ ||\ 'âˆ’'\}</div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03839}03839\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03840}03840\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03841}03841\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ <button\ onclick=\(\backslash\)"{}hideEndgameReport()\(\backslash\)"{}\ style=\(\backslash\)"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03842}03842\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ width:100\%;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03843}03843\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ padding:14px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03844}03844\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ font-\/size:16px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03845}03845\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ background:\$\{accentColor\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03846}03846\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color:white;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03847}03847\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ border:none;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03848}03848\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ border-\/radius:8px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03849}03849\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cursor:pointer;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03850}03850\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ font-\/weight:600;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03851}03851\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ box-\/shadow:0\ 4px\ 12px\ rgba(0,0,0,0.3);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03852}03852\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ transition:all\ 0.2s;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03853}03853\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)"{}\ onmouseover=\(\backslash\)"{}this.style.transform='translateY(-\/2px)';this.style.boxShadow='0\ 6px\ 16px\ rgba(0,0,0,0.4)'\(\backslash\)"{}\ onmouseout=\(\backslash\)"{}this.style.transform='translateY(0)';this.style.boxShadow='0\ 4px\ 12px\ rgba(0,0,0,0.3)'\(\backslash\)"{}>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03854}03854\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OK\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03855}03855\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ </button>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03856}03856\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ </div>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03857}03857\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \`{};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03858}03858\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03859}03859\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ PÅ™idat\ CSS\ animace\ pokud\ jeÅ¡tÄ›\ neexistujÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03860}03860\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!document.getElementById('endgame-\/animations'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03861}03861\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ style\ =\ document.createElement('style');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03862}03862\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ style.id\ =\ 'endgame-\/animations';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03863}03863\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ style.textContent\ =\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03864}03864\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ @keyframes\ slideInLeft\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03865}03865\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ from\ \{\ transform:\ translateY(-\/50\%)\ translateX(-\/100\%);\ opacity:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03866}03866\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ to\ \{\ transform:\ translateY(-\/50\%)\ translateX(0);\ opacity:\ 1;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03867}03867\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03868}03868\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ @keyframes\ slideInTop\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03869}03869\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ from\ \{\ transform:\ translateY(-\/100\%);\ opacity:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03870}03870\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ to\ \{\ transform:\ translateY(0);\ opacity:\ 1;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03871}03871\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03872}03872\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \`{};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03873}03873\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.head.appendChild(style);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03874}03874\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03875}03875\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03876}03876\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.body.appendChild(banner);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03877}03877\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ endgameReportShown\ =\ true;\ \ //\ OznaÄit,\ Å¾e\ je\ zobrazenÃ½\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03878}03878\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('ðŸ†\ ENDGAME\ REPORT\ SHOWN\ -\/\ banner\ displayed\ (left\ side)');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03879}03879\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03880}03880\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03881}03881\ \ \ \ \ \textcolor{stringliteral}{"{}//\ SkrÃ½t\ endgame\ report\ (ale\ zachovat\ flag\ pro\ toggle)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03882}03882\ \ \ \ \ \textcolor{stringliteral}{"{}function\ hideEndgameReport()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03883}03883\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('Hiding\ endgame\ report...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03884}03884\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ banner\ =\ document.getElementById('endgame-\/banner');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03885}03885\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (banner)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03886}03886\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ banner.remove();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03887}03887\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('Endgame\ report\ hidden\ (can\ be\ toggled\ back)');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03888}03888\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03889}03889\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03890}03890\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03891}03891\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Toggle\ endgame\ report\ (show/hide)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03892}03892\ \ \ \ \ \textcolor{stringliteral}{"{}function\ toggleEndgameReport()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03893}03893\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ banner\ =\ document.getElementById('endgame-\/banner');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03894}03894\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (banner)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03895}03895\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Uz\ je\ zobrazen\ -\/>\ skryj\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03896}03896\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ hideEndgameReport();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03897}03897\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03898}03898\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Neni\ zobrazen\ -\/>\ znovu\ zobraz\ (pokud\ mame\ data)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03899}03899\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (window.lastGameEndData)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03900}03900\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showEndgameReport(window.lastGameEndData);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03901}03901\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03902}03902\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03903}03903\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03904}03904\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03905}03905\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Zobrazit\ toggle\ button\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03906}03906\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showEndgameToggleButton()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03907}03907\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Zjistit\ zda\ uz\ button\ existuje\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03908}03908\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (document.getElementById('endgame-\/toggle-\/btn'))\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03909}03909\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03910}03910\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ button\ =\ document.createElement('button');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03911}03911\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.id\ =\ 'endgame-\/toggle-\/btn';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03912}03912\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.innerHTML\ =\ 'ZprÃ¡va';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03913}03913\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.title\ =\ 'Zobrazit/skrÃ½t\ zprÃ¡vu\ o\ konci\ hry';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03914}03914\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.style.cssText\ =\ \`{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03915}03915\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ position:\ fixed;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03916}03916\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ top:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03917}03917\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ left:\ 10px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03918}03918\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ padding:\ 10px\ 16px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03919}03919\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ background:\ linear-\/gradient(135deg,\ \#4CAF50,\ \#45a049);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03920}03920\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ color:\ white;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03921}03921\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ border:\ none;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03922}03922\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ border-\/radius:\ 8px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03923}03923\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ cursor:\ pointer;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03924}03924\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ font-\/weight:\ 600;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03925}03925\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ font-\/size:\ 14px;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03926}03926\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ box-\/shadow:\ 0\ 4px\ 12px\ rgba(0,0,0,0.3);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03927}03927\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ z-\/index:\ 10000;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03928}03928\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ transition:\ all\ 0.2s;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03929}03929\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \`{};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03930}03930\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.onmouseover\ =\ function\ ()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03931}03931\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ this.style.transform\ =\ 'translateY(-\/2px)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03932}03932\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ this.style.boxShadow\ =\ '0\ 6px\ 16px\ rgba(0,0,0,0.4)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03933}03933\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03934}03934\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.onmouseout\ =\ function\ ()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03935}03935\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ this.style.transform\ =\ 'translateY(0)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03936}03936\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ this.style.boxShadow\ =\ '0\ 4px\ 12px\ rgba(0,0,0,0.3)';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03937}03937\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03938}03938\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ button.onclick\ =\ toggleEndgameReport;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03939}03939\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.body.appendChild(button);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03940}03940\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03941}03941\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03942}03942\ \ \ \ \ \textcolor{stringliteral}{"{}//\ SkrÃ½t\ toggle\ button\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03943}03943\ \ \ \ \ \textcolor{stringliteral}{"{}function\ hideEndgameToggleButton()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03944}03944\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ button\ =\ document.getElementById('endgame-\/toggle-\/btn');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03945}03945\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (button)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03946}03946\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ button.remove();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03947}03947\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03948}03948\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03949}03949\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03950}03950\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03951}03951\ \ \ \ \ \textcolor{stringliteral}{"{}//\ STATUS\ UPDATE\ FUNCTION\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03952}03952\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03953}03953\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03954}03954\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateStatus(status)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03955}03955\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusData\ =\ status;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03956}03956\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ gameStateEl\ =\ document.getElementById('game-\/state');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03957}03957\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ playerEl\ =\ document.getElementById('current-\/player');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03958}03958\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (gameStateEl)\ gameStateEl.textContent\ =\ status.game\_state\ ||\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03959}03959\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (playerEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03960}03960\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ p\ =\ status.current\_player;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03961}03961\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ playerEl.textContent\ =\ (p\ ===\ 'White')\ ?\ 'BÃ­lÃ½'\ :\ (p\ ===\ 'Black')\ ?\ 'ÄŒernÃ½'\ :\ (p\ ||\ '-\/');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03962}03962\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03963}03963\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.getElementById('move-\/count').textContent\ =\ status.move\_count\ ||\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03964}03964\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.getElementById('in-\/check').textContent\ =\ status.in\_check\ ?\ 'Ano'\ :\ 'Ne';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03965}03965\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03966}03966\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Jas\ (NastavenÃ­)\ â€“\ synchronizovat\ slider\ a\ label\ ze\ statusu\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03967}03967\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ b\ =\ status.brightness;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03968}03968\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (typeof\ b\ ===\ 'number'\ \&\&\ b\ >=\ 0\ \&\&\ b\ <=\ 100)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03969}03969\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ valueEl\ =\ document.getElementById('brightness-\/value');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03970}03970\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ sliderEl\ =\ document.getElementById('brightness-\/slider');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03971}03971\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (valueEl)\ valueEl.textContent\ =\ b\ +\ '\%';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03972}03972\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (sliderEl\ \&\&\ Number(sliderEl.value)\ !==\ b)\ sliderEl.value\ =\ b;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03973}03973\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03974}03974\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03975}03975\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Promotion\ modal\ â€“\ zobrazit,\ kdyÅ¾\ backend\ ÄekÃ¡\ na\ volbu\ promoce\ (game\_state\ ===\ \(\backslash\)"{}promotion\(\backslash\)"{})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03976}03976\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ promoModal\ =\ document.getElementById('promotion-\/modal');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03977}03977\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (promoModal)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03978}03978\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (status.game\_state\ ===\ 'promotion')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03979}03979\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ promoModal.style.display\ =\ 'flex';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03980}03980\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03981}03981\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ promoModal.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03982}03982\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03983}03983\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03984}03984\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03985}03985\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ ERROR\ STATE\ -\/\ vÅ¾dy\ nejprve\ odstranit\ vÅ¡echny\ error\ classes\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03986}03986\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03987}03987\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('error-\/invalid',\ 'error-\/original');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03988}03988\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03989}03989\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03990}03990\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ LIFTED\ PIECE\ -\/\ vÅ¾dy\ nejprve\ odstranit\ vÅ¡echny\ lifted\ classes\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03991}03991\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.querySelectorAll('.square').forEach(sq\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03992}03992\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ sq.classList.remove('lifted');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03993}03993\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03994}03994\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03995}03995\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Zobrazit\ lifted\ piece\ (zelenÃ¡);\ prvky\ jsou\ v\ zÃ¡loÅ¾ce\ NastavenÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03996}03996\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ lifted\ =\ status.piece\_lifted;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03997}03997\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ liftedPieceEl\ =\ document.getElementById('lifted-\/piece');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03998}03998\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ liftedPosEl\ =\ document.getElementById('lifted-\/position');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l03999}03999\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (lifted\ \&\&\ lifted.lifted)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04000}04000\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (liftedPieceEl)\ liftedPieceEl.textContent\ =\ pieceSymbols[lifted.piece]\ ||\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04001}04001\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (liftedPosEl)\ liftedPosEl.textContent\ =\ String.fromCharCode(97\ +\ lifted.col)\ +\ (lifted.row\ +\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04002}04002\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ square\ =\ document.querySelector(`[data-\/row='\$\{lifted.row\}'][data-\/col='\$\{lifted.col\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04003}04003\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (square)\ square.classList.add('lifted');\ //\ ZelenÃ¡\ -\/\ zvednutÃ¡\ figurka\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04004}04004\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04005}04005\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (liftedPieceEl)\ liftedPieceEl.textContent\ =\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04006}04006\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (liftedPosEl)\ liftedPosEl.textContent\ =\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04007}04007\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04008}04008\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04009}04009\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Zobrazit\ error\ state\ (ÄervenÃ¡\ na\ invalid,\ modrÃ¡\ na\ original)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04010}04010\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (status.error\_state\ \&\&\ status.error\_state.active)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04011}04011\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Invalid\ position\ (ÄervenÃ¡\ -\/\ kde\ je\ figurka\ nynÃ­\ na\ nevalidnÃ­\ pozici)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04012}04012\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (status.error\_state.invalid\_pos)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04013}04013\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ invalidCol\ =\ status.error\_state.invalid\_pos.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04014}04014\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ invalidRow\ =\ parseInt(status.error\_state.invalid\_pos[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04015}04015\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ invalidSquare\ =\ document.querySelector(`[data-\/row='\$\{invalidRow\}'][data-\/col='\$\{invalidCol\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04016}04016\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (invalidSquare)\ invalidSquare.classList.add('error-\/invalid');\ //\ ÄŒervenÃ¡\ -\/\ nevalidnÃ­\ pozice\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04017}04017\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04018}04018\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Original\ position\ (modrÃ¡\ -\/\ kde\ byla\ figurka\ pÅ¯vodnÄ›)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04019}04019\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (status.error\_state.original\_pos)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04020}04020\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ originalCol\ =\ status.error\_state.original\_pos.charCodeAt(0)\ -\/\ 97;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04021}04021\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ originalRow\ =\ parseInt(status.error\_state.original\_pos[1])\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04022}04022\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ originalSquare\ =\ document.querySelector(`[data-\/row='\$\{originalRow\}'][data-\/col='\$\{originalCol\}']`);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04023}04023\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (originalSquare)\ originalSquare.classList.add('error-\/original');\ //\ ModrÃ¡\ -\/\ pÅ¯vodnÃ­\ pozice\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04024}04024\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04025}04025\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04026}04026\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04027}04027\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ RoÅ¡Ã¡da\ na\ 2\ tahy:\ zobrazit\ instrukci\ â€žpÅ™esuÅˆte\ vÄ›Å¾\ z\ X\ na\ Yâ€œ\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04028}04028\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ castlingMsg\ =\ document.getElementById('castling-\/pending-\/message');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04029}04029\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (castlingMsg)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04030}04030\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (status.castling\_in\_progress\ \&\&\ status.castling\_from\ \&\&\ status.castling\_to)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04031}04031\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ castlingMsg.textContent\ =\ 'DokonÄete\ roÅ¡Ã¡du:\ pÅ™esuÅˆte\ vÄ›Å¾\ z\ '\ +\ status.castling\_from\ +\ '\ na\ '\ +\ status.castling\_to\ +\ '.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04032}04032\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ castlingMsg.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04033}04033\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04034}04034\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ castlingMsg.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04035}04035\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04036}04036\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04037}04037\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04038}04038\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ ENDGAME\ REPORT\ -\/\ zobrazit\ pouze\ JEDNOU,\ po\ prvnim\ skonceni\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04039}04039\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (status.game\_end\ \&\&\ status.game\_end.ended)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04040}04040\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Ulozit\ data\ pro\ pozdejsi\ toggle\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04041}04041\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ window.lastGameEndData\ =\ status.game\_end;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04042}04042\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04043}04043\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Zobrazit\ report\ jen\ pokud\ jeste\ nebyl\ nikdy\ zobrazen\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04044}04044\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!endgameReportShown)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04045}04045\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.log('Game\ ended,\ showing\ endgame\ report...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04046}04046\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showEndgameReport(status.game\_end);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04047}04047\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04048}04048\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04049}04049\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Zobrazit\ toggle\ button\ (jen\ pokud\ je\ hra\ skoncena)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04050}04050\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showEndgameToggleButton();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04051}04051\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04052}04052\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Hra\ je\ aktivni\ -\/\ skryj\ report\ i\ toggle\ button\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04053}04053\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (endgameReportShown)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04054}04054\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.log('Game\ restarted,\ clearing\ endgame\ report...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04055}04055\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ hideEndgameReport();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04056}04056\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04057}04057\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ endgameReportShown\ =\ false;\ \ //\ Reset\ flagu\ po\ restartu\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04058}04058\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ window.lastGameEndData\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04059}04059\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ hideEndgameToggleButton();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04060}04060\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04061}04061\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04062}04062\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04063}04063\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04064}04064\ \ \ \ \ \textcolor{stringliteral}{"{}function\ getGradeLabel(grade)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04065}04065\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ switch\ (grade)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04066}04066\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'best':\ return\ 'VÃ½bornÃ½';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04067}04067\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'good':\ return\ 'DobrÃ½';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04068}04068\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'inaccuracy':\ return\ 'SlabÅ¡Ã­';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04069}04069\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'mistake':\ return\ 'Chyba';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04070}04070\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'blunder':\ return\ 'VÃ¡Å¾nÃ¡\ chyba';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04071}04071\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ default:\ return\ 'â€”';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04072}04072\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04073}04073\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04074}04074\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04075}04075\ \ \ \ \ \textcolor{stringliteral}{"{}function\ renderHistoryList()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04076}04076\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ historyBox\ =\ document.getElementById('history');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04077}04077\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!historyBox)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04078}04078\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ historyBox.innerHTML\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04079}04079\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ showEval\ =\ getEvaluateMoveEnabled();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04080}04080\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ historyData.slice().reverse().forEach((move,\ index)\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04081}04081\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ item\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04082}04082\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.className\ =\ 'history-\/item';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04083}04083\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ actualIndex\ =\ historyData.length\ -\/\ 1\ -\/\ index;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04084}04084\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.dataset.moveIndex\ =\ actualIndex;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04085}04085\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ moveNum\ =\ Math.floor(actualIndex\ /\ 2)\ +\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04086}04086\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ isWhite\ =\ actualIndex\ \%\ 2\ ===\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04087}04087\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ prefix\ =\ isWhite\ ?\ moveNum\ +\ '.\ '\ :\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04088}04088\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.textContent\ =\ prefix\ +\ move.from\ +\ '\ â†’\ '\ +\ move.to;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04089}04089\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (showEval\ \&\&\ moveEvaluations[actualIndex])\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04090}04090\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ ev\ =\ moveEvaluations[actualIndex];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04091}04091\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ badge\ =\ document.createElement('span');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04092}04092\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ badge.className\ =\ 'move-\/eval-\/badge\ move-\/eval-\/badge-\/-\/'\ +\ (ev.grade\ ||\ 'good');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04093}04093\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ badge.title\ =\ ev.msg\ ||\ getGradeLabel(ev.grade);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04094}04094\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ badge.textContent\ =\ getGradeLabel(ev.grade);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04095}04095\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ item.appendChild(document.createTextNode('\ '));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04096}04096\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ item.appendChild(badge);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04097}04097\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04098}04098\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ item.onclick\ =\ ()\ =>\ enterReviewMode(actualIndex);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04099}04099\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ historyBox.appendChild(item);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04100}04100\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04101}04101\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04102}04102\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04103}04103\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateHistory(history)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04104}04104\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ historyData\ =\ history.moves\ ||\ [];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04105}04105\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ renderHistoryList();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04106}04106\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04107}04107\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04108}04108\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateCaptured(captured)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04109}04109\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ capturedData\ =\ captured;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04110}04110\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ whiteBox\ =\ document.getElementById('white-\/captured');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04111}04111\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ blackBox\ =\ document.getElementById('black-\/captured');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04112}04112\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ whiteBox.innerHTML\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04113}04113\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ blackBox.innerHTML\ =\ '';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04114}04114\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ captured.white\_captured.forEach(p\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04115}04115\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ piece\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04116}04116\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ piece.className\ =\ 'captured-\/piece';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04117}04117\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ piece.textContent\ =\ pieceSymbols[p]\ ||\ p;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04118}04118\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ whiteBox.appendChild(piece);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04119}04119\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04120}04120\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ captured.black\_captured.forEach(p\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04121}04121\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ piece\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04122}04122\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ piece.className\ =\ 'captured-\/piece';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04123}04123\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ piece.textContent\ =\ pieceSymbols[p]\ ||\ p;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04124}04124\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ blackBox.appendChild(piece);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04125}04125\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04126}04126\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04127}04127\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04128}04128\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ fetchData()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04129}04129\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (reviewMode\ ||\ sandboxMode)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04130}04130\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04131}04131\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ [boardRes,\ statusRes,\ historyRes,\ capturedRes]\ =\ await\ Promise.all([\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04132}04132\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ fetch('/api/board'),\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04133}04133\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ fetch('/api/status'),\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04134}04134\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ fetch('/api/history'),\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04135}04135\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ fetch('/api/captured')\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04136}04136\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ ]);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04137}04137\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ board\ =\ await\ boardRes.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04138}04138\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ status\ =\ await\ statusRes.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04139}04139\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ history\ =\ await\ historyRes.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04140}04140\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ captured\ =\ await\ capturedRes.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04141}04141\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ updateBoard(board.board);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04142}04142\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ updateStatus(status);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04143}04143\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ updateHistory(history);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04144}04144\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ updateCaptured(captured);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04145}04145\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04146}04146\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ newHistoryLength\ =\ (history.moves\ \&\&\ history.moves.length)\ ?\ history.moves.length\ :\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04147}04147\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ currentFen\ =\ boardAndStatusToFen(boardData,\ status,\ history);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04148}04148\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04149}04149\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (newHistoryLength\ ===\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04150}04150\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ lastFen\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04151}04151\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ lastHistoryLength\ =\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04152}04152\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ moveEvaluations\ =\ \{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04153}04153\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ hideMoveEvaluation();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04154}04154\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04155}04155\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (!getEvaluateMoveEnabled())\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04156}04156\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ hideMoveEvaluation();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04157}04157\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04158}04158\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ castlingInProgress\ =\ status.castling\_in\_progress\ ===\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04159}04159\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (getEvaluateMoveEnabled()\ \&\&\ !castlingInProgress\ \&\&\ lastHistoryLength\ >=\ 0\ \&\&\ newHistoryLength\ ===\ lastHistoryLength\ +\ 1\ \&\&\ lastFen)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04160}04160\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ lastMove\ =\ historyData[newHistoryLength\ -\/\ 1];\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04161}04161\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (lastMove\ \&\&\ lastMove.from\ \&\&\ lastMove.to)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04162}04162\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ evaluateMoveAsync(lastFen,\ currentFen,\ lastMove,\ newHistoryLength);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04163}04163\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04164}04164\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04165}04165\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (!castlingInProgress)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04166}04166\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lastFen\ =\ currentFen;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04167}04167\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lastHistoryLength\ =\ newHistoryLength;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04168}04168\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04169}04169\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04170}04170\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04171}04171\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Fetch\ error:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04172}04172\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04173}04173\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04174}04174\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04175}04175\ \ \ \ \ \textcolor{stringliteral}{"{}function\ initializeApp()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04176}04176\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('ðŸŽ®\ Initializing\ Chess\ App...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04177}04177\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ createBoard();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04178}04178\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04179}04179\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ depthEl\ =\ document.getElementById('hint-\/depth');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04180}04180\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (depthEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04181}04181\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ d\ =\ getHintDepth();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04182}04182\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ depthEl.value\ =\ d;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04183}04183\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04184}04184\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ var\ evaluateMoveEl\ =\ document.getElementById('evaluate-\/move-\/enabled');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04185}04185\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (evaluateMoveEl)\ evaluateMoveEl.checked\ =\ getEvaluateMoveEnabled();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04186}04186\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04187}04187\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04188}04188\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ setInterval(fetchData,\ 2000);\ //\ Reduced\ from\ 500ms\ to\ 2s\ (4Ã—\ fewer\ requests)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04189}04189\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('âœ…\ Chess\ App\ initialized');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04190}04190\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04191}04191\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04192}04192\ \ \ \ \ \textcolor{stringliteral}{"{}console.log('ðŸš€\ Creating\ chess\ board...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04193}04193\ \ \ \ \ \textcolor{stringliteral}{"{}initializeApp();\ //\ Call\ the\ new\ initialization\ function\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04194}04194\ \ \ \ \ \textcolor{stringliteral}{"{}console.log('âœ…\ Chess\ JavaScript\ loaded\ successfully!');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04195}04195\ \ \ \ \ \textcolor{stringliteral}{"{}console.log('â±ï¸\ About\ to\ initialize\ timer\ system...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04196}04196\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04197}04197\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04198}04198\ \ \ \ \ \textcolor{stringliteral}{"{}//\ TIMER\ SYSTEM\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04199}04199\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04200}04200\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04201}04201\ \ \ \ \ \textcolor{stringliteral}{"{}let\ timerData\ =\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04202}04202\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ white\_time\_ms:\ 0,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04203}04203\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ black\_time\_ms:\ 0,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04204}04204\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ timer\_running:\ false,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04205}04205\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ is\_white\_turn:\ true,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04206}04206\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ game\_paused:\ false,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04207}04207\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ time\_expired:\ false,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04208}04208\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ config:\ null,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04209}04209\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ total\_moves:\ 0,\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04210}04210\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ avg\_move\_time\_ms:\ 0\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04211}04211\ \ \ \ \ \textcolor{stringliteral}{"{}\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04212}04212\ \ \ \ \ \textcolor{stringliteral}{"{}let\ timerUpdateInterval\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04213}04213\ \ \ \ \ \textcolor{stringliteral}{"{}let\ selectedTimeControl\ =\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04214}04214\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04215}04215\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ==========\ HELPER\ FUNCTIONS\ (must\ be\ defined\ before\ use)\ ==========\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04216}04216\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04217}04217\ \ \ \ \ \textcolor{stringliteral}{"{}function\ formatTime(timeMs)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04218}04218\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ totalSeconds\ =\ Math.ceil(timeMs\ /\ 1000);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04219}04219\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ hours\ =\ Math.floor(totalSeconds\ /\ 3600);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04220}04220\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ minutes\ =\ Math.floor((totalSeconds\ \%\ 3600)\ /\ 60);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04221}04221\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ seconds\ =\ totalSeconds\ \%\ 60;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04222}04222\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (hours\ >\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04223}04223\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ hours\ +\ ':'\ +\ minutes.toString().padStart(2,\ '0')\ +\ ':'\ +\ seconds.toString().padStart(2,\ '0');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04224}04224\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04225}04225\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ minutes\ +\ ':'\ +\ seconds.toString().padStart(2,\ '0');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04226}04226\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04227}04227\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04228}04228\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04229}04229\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updatePlayerTime(player,\ timeMs)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04230}04230\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ timeElement\ =\ document.getElementById(player\ +\ '-\/time');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04231}04231\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ playerElement\ =\ document.getElementById(player\ +\ '-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04232}04232\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!timeElement\ ||\ !playerElement)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04233}04233\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04234}04234\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Zkontrolovat\ zda\ je\ ÄasovÃ¡\ kontrola\ aktivnÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04235}04235\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ isTimerActive\ =\ timerData.config\ \&\&\ timerData.config.type\ !==\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04236}04236\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04237}04237\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (isTimerActive)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04238}04238\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ formattedTime\ =\ formatTime(timeMs);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04239}04239\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ timeElement.textContent\ =\ formattedTime;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04240}04240\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ playerElement.classList.remove('low-\/time',\ 'critical-\/time');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04241}04241\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (timeMs\ <\ 5000)\ playerElement.classList.add('critical-\/time');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04242}04242\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ else\ if\ (timeMs\ <\ 30000)\ playerElement.classList.add('low-\/time');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04243}04243\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04244}04244\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Bez\ ÄasovÃ©\ kontroly\ -\/\ zobrazit\ \(\backslash\)"{}-\/-\/:-\/-\/\(\backslash\)"{}\ a\ odstranit\ vÅ¡echny\ warning\ tÅ™Ã­dy\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04245}04245\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ timeElement.textContent\ =\ '-\/-\/:-\/-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04246}04246\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ playerElement.classList.remove('low-\/time',\ 'critical-\/time',\ 'active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04247}04247\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\ //\ NedÄ›lat\ nic\ dalÅ¡Ã­ho\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04248}04248\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04249}04249\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04250}04250\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ ((player\ ===\ 'white'\ \&\&\ timerData.is\_white\_turn)\ ||\ (player\ ===\ 'black'\ \&\&\ !timerData.is\_white\_turn))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04251}04251\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ playerElement.classList.add('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04252}04252\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04253}04253\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ playerElement.classList.remove('active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04254}04254\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04255}04255\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04256}04256\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04257}04257\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateActivePlayer(isWhiteTurn)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04258}04258\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ whiteIndicator\ =\ document.getElementById('white-\/move-\/indicator');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04259}04259\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ blackIndicator\ =\ document.getElementById('black-\/move-\/indicator');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04260}04260\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (whiteIndicator\ \&\&\ blackIndicator)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04261}04261\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ whiteIndicator.classList.toggle('active',\ isWhiteTurn);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04262}04262\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ blackIndicator.classList.toggle('active',\ !isWhiteTurn);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04263}04263\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04264}04264\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04265}04265\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04266}04266\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateProgressBars(timerInfo)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04267}04267\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!timerInfo\ ||\ !timerInfo.config)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04268}04268\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.warn('Timer\ info\ missing\ config:',\ timerInfo);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04269}04269\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04270}04270\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04271}04271\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04272}04272\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Zkontrolovat\ zda\ je\ ÄasovÃ¡\ kontrola\ aktivnÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04273}04273\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (timerInfo.config.type\ ===\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04274}04274\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Bez\ ÄasovÃ©\ kontroly\ -\/\ skrÃ½t\ progress\ bary\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04275}04275\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ whiteProgress\ =\ document.getElementById('white-\/progress');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04276}04276\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ blackProgress\ =\ document.getElementById('black-\/progress');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04277}04277\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (whiteProgress)\ whiteProgress.style.width\ =\ '0\%';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04278}04278\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (blackProgress)\ blackProgress.style.width\ =\ '0\%';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04279}04279\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04280}04280\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04281}04281\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04282}04282\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ initialTime\ =\ timerInfo.config.initial\_time\_ms;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04283}04283\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (initialTime\ ===\ 0)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04284}04284\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ whiteProgress\ =\ document.getElementById('white-\/progress');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04285}04285\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ blackProgress\ =\ document.getElementById('black-\/progress');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04286}04286\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (whiteProgress)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04287}04287\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ whitePercent\ =\ (timerInfo.white\_time\_ms\ /\ initialTime)\ *\ 100;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04288}04288\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ whiteProgress.style.width\ =\ Math.max(0,\ Math.min(100,\ whitePercent))\ +\ '\%';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04289}04289\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04290}04290\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (blackProgress)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04291}04291\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ blackPercent\ =\ (timerInfo.black\_time\_ms\ /\ initialTime)\ *\ 100;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04292}04292\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ blackProgress.style.width\ =\ Math.max(0,\ Math.min(100,\ blackPercent))\ +\ '\%';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04293}04293\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04294}04294\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04295}04295\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04296}04296\ \ \ \ \ \textcolor{stringliteral}{"{}function\ updateTimerStats(timerInfo)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04297}04297\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ avgMoveTimeElement\ =\ document.getElementById('avg-\/move-\/time');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04298}04298\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ totalMovesElement\ =\ document.getElementById('total-\/moves');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04299}04299\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (avgMoveTimeElement)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04300}04300\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ avgMoveTimeElement.textContent\ =\ timerInfo.avg\_move\_time\_ms\ >\ 0\ ?\ formatTime(timerInfo.avg\_move\_time\_ms)\ :\ '-\/';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04301}04301\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04302}04302\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (totalMovesElement)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04303}04303\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ totalMovesElement.textContent\ =\ timerInfo.total\_moves\ ||\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04304}04304\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04305}04305\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04306}04306\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04307}04307\ \ \ \ \ \textcolor{stringliteral}{"{}function\ checkTimeWarnings(timerInfo)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04308}04308\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Nekontrolovat\ upozornÄ›nÃ­\ pokud\ nenÃ­\ ÄasovÃ¡\ kontrola\ aktivnÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04309}04309\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!timerInfo\ ||\ !timerInfo.config\ ||\ timerInfo.config.type\ ===\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04310}04310\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04311}04311\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04312}04312\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04313}04313\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ currentPlayerTime\ =\ timerInfo.is\_white\_turn\ ?\ timerInfo.white\_time\_ms\ :\ timerInfo.black\_time\_ms;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04314}04314\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (currentPlayerTime\ <\ 5000\ \&\&\ !timerInfo.warning\_5s\_shown)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04315}04315\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showTimeWarning('KritickÃ©!\ MÃ©nÄ›\ neÅ¾\ 5\ sekund!',\ 'critical');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04316}04316\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ if\ (currentPlayerTime\ <\ 10000\ \&\&\ !timerInfo.warning\_10s\_shown)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04317}04317\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showTimeWarning('VarovÃ¡nÃ­!\ MÃ©nÄ›\ neÅ¾\ 10\ sekund!',\ 'warning');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04318}04318\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ if\ (currentPlayerTime\ <\ 30000\ \&\&\ !timerInfo.warning\_30s\_shown)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04319}04319\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showTimeWarning('MÃ¡lo\ Äasu!\ MÃ©nÄ›\ neÅ¾\ 30\ sekund!',\ 'info');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04320}04320\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04321}04321\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04322}04322\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04323}04323\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showTimeWarning(message,\ type)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04324}04324\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ notification\ =\ document.createElement('div');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04325}04325\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ notification.className\ =\ 'time-\/warning\ '\ +\ type;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04326}04326\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ notification.textContent\ =\ message;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04327}04327\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ notification.style.cssText\ =\ 'position:\ fixed;\ top:\ 20px;\ right:\ 20px;\ padding:\ 15px\ 20px;\ border-\/radius:\ 8px;\ color:\ white;\ font-\/weight:\ 600;\ z-\/index:\ 1000;\ animation:\ slideInRight\ 0.3s\ ease;';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04328}04328\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ switch\ (type)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04329}04329\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'critical':\ notification.style.background\ =\ '\#F44336';\ break;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04330}04330\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'warning':\ notification.style.background\ =\ '\#FF9800';\ break;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04331}04331\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'info':\ notification.style.background\ =\ '\#2196F3';\ break;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04332}04332\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04333}04333\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.body.appendChild(notification);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04334}04334\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ setTimeout(()\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04335}04335\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ notification.style.animation\ =\ 'slideOutRight\ 0.3s\ ease';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04336}04336\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ setTimeout(()\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04337}04337\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (notification.parentNode)\ notification.parentNode.removeChild(notification);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04338}04338\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \},\ 300);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04339}04339\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \},\ 3000);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04340}04340\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04341}04341\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04342}04342\ \ \ \ \ \textcolor{stringliteral}{"{}function\ handleTimeExpiration(timerInfo)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04343}04343\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Nekontrolovat\ expiraci\ pokud\ nenÃ­\ ÄasovÃ¡\ kontrola\ aktivnÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04344}04344\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!timerInfo\ ||\ !timerInfo.config\ ||\ timerInfo.config.type\ ===\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04345}04345\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04346}04346\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04347}04347\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04348}04348\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ expiredPlayer\ =\ timerInfo.is\_white\_turn\ ?\ 'BÃ­lÃ½'\ :\ 'ÄŒernÃ½';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04349}04349\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ showTimeWarning('ÄŒas\ vyprÅ¡el!\ '\ +\ expiredPlayer\ +\ '\ prohrÃ¡l\ na\ Äas.',\ 'critical');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04350}04350\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ pauseBtn\ =\ document.getElementById('pause-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04351}04351\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ resumeBtn\ =\ document.getElementById('resume-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04352}04352\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (pauseBtn)\ pauseBtn.disabled\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04353}04353\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (resumeBtn)\ resumeBtn.disabled\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04354}04354\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04355}04355\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04356}04356\ \ \ \ \ \textcolor{stringliteral}{"{}function\ toggleCustomSettings()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04357}04357\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ customSettings\ =\ document.getElementById('custom-\/time-\/settings');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04358}04358\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!customSettings)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04359}04359\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (selectedTimeControl\ ===\ 14)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04360}04360\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ customSettings.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04361}04361\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04362}04362\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ customSettings.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04363}04363\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04364}04364\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04365}04365\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04366}04366\ \ \ \ \ \textcolor{stringliteral}{"{}function\ changeTimeControl()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04367}04367\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ select\ =\ document.getElementById('time-\/control-\/select');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04368}04368\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ applyBtn\ =\ document.getElementById('apply-\/time-\/control');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04369}04369\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!select)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04370}04370\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ selectedTimeControl\ =\ parseInt(select.value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04371}04371\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ toggleCustomSettings();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04372}04372\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (applyBtn)\ applyBtn.disabled\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04373}04373\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ localStorage.setItem('chess\_time\_control',\ selectedTimeControl.toString());\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04374}04374\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04375}04375\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04376}04376\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ==========\ TIMER\ INITIALIZATION\ AND\ MAIN\ FUNCTIONS\ ==========\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04377}04377\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04378}04378\ \ \ \ \ \textcolor{stringliteral}{"{}function\ initTimerSystem()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04379}04379\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('ðŸ”µ\ Initializing\ timer\ system...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04380}04380\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Check\ if\ DOM\ elements\ exist\ before\ accessing\ them\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04381}04381\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ timeControlSelect\ =\ document.getElementById('time-\/control-\/select');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04382}04382\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ applyButton\ =\ document.getElementById('apply-\/time-\/control');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04383}04383\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!timeControlSelect)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04384}04384\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.warn('âš ï¸\ Timer\ controls\ not\ ready\ yet,\ retrying\ in\ 100ms...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04385}04385\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ setTimeout(()\ =>\ initTimerSystem(),\ 100);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04386}04386\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04387}04387\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04388}04388\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ savedTimeControl\ =\ localStorage.getItem('chess\_time\_control');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04389}04389\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (savedTimeControl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04390}04390\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ selectedTimeControl\ =\ parseInt(savedTimeControl);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04391}04391\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ timeControlSelect.value\ =\ selectedTimeControl;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04392}04392\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04393}04393\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ selectedTimeControl\ =\ parseInt(timeControlSelect.value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04394}04394\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04395}04395\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ toggleCustomSettings();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04396}04396\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Enable\ button\ if\ a\ time\ control\ is\ selected\ (not\ 0\ =\ None)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04397}04397\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (selectedTimeControl\ !==\ 0\ \&\&\ applyButton)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04398}04398\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ applyButton.disabled\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04399}04399\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04400}04400\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('ðŸ”µ\ Starting\ timer\ update\ loop\ immediately...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04401}04401\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Start\ timer\ loop\ immediately\ (no\ delay)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04402}04402\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ startTimerUpdateLoop();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04403}04403\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04404}04404\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04405}04405\ \ \ \ \ \textcolor{stringliteral}{"{}function\ startTimerUpdateLoop()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04406}04406\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('âœ…\ Timer\ update\ loop\ starting...\ (will\ update\ every\ 1000ms)');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04407}04407\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (timerUpdateInterval)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04408}04408\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('âš ï¸\ Clearing\ existing\ timer\ interval');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04409}04409\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ clearInterval(timerUpdateInterval);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04410}04410\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04411}04411\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ timerUpdateInterval\ =\ setInterval(async\ ()\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04412}04412\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04413}04413\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ await\ updateTimerDisplay();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04414}04414\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04415}04415\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.error('âŒ\ Timer\ update\ loop\ error:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04416}04416\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04417}04417\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \},\ 1000);\ //\ Optimized\ from\ 200ms\ to\ 1s\ (5Ã—\ fewer\ requests,\ still\ responsive)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04418}04418\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('âœ…\ Timer\ interval\ set\ successfully,\ ID:',\ timerUpdateInterval);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04419}04419\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Initial\ immediate\ update\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04420}04420\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('â±ï¸\ Calling\ initial\ timer\ update...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04421}04421\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateTimerDisplay().catch(e\ =>\ console.error('âŒ\ Initial\ timer\ update\ failed:',\ e));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04422}04422\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04423}04423\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04424}04424\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ updateTimerDisplay()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04425}04425\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04426}04426\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('â±ï¸\ updateTimerDisplay()\ called,\ fetching\ /api/timer...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04427}04427\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04428}04428\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('â±ï¸\ /api/timer\ response\ status:',\ response.status);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04429}04429\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04430}04430\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ timerInfo\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04431}04431\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ timerData\ =\ timerInfo;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04432}04432\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Format\ time\ for\ logging\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04433}04433\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ whiteTime\ =\ formatTime(timerInfo.white\_time\_ms);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04434}04434\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ blackTime\ =\ formatTime(timerInfo.black\_time\_ms);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04435}04435\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.log('â±ï¸\ Timer:',\ timerInfo.config\ ?\ timerInfo.config.name\ :\ 'NO\ CONFIG',\ '|\ White:',\ whiteTime,\ '('\ +\ timerInfo.white\_time\_ms\ +\ 'ms)',\ '|\ Black:',\ blackTime,\ '('\ +\ timerInfo.black\_time\_ms\ +\ 'ms)');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04436}04436\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ updatePlayerTime('white',\ timerInfo.white\_time\_ms);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04437}04437\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ updatePlayerTime('black',\ timerInfo.black\_time\_ms);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04438}04438\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ updateActivePlayer(timerInfo.is\_white\_turn);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04439}04439\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ updateProgressBars(timerInfo);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04440}04440\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ updateTimerStats(timerInfo);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04441}04441\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Disable/enable\ timer\ controls\ podle\ config.type\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04442}04442\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ pauseBtn\ =\ document.getElementById('pause-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04443}04443\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ resumeBtn\ =\ document.getElementById('resume-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04444}04444\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ resetBtn\ =\ document.getElementById('reset-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04445}04445\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ isTimerActive\ =\ timerInfo.config\ \&\&\ timerInfo.config.type\ !==\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04446}04446\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (pauseBtn)\ pauseBtn.disabled\ =\ !isTimerActive;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04447}04447\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (resumeBtn)\ resumeBtn.disabled\ =\ !isTimerActive;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04448}04448\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (resetBtn)\ resetBtn.disabled\ =\ !isTimerActive;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04449}04449\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Pouze\ pokud\ je\ ÄasovÃ¡\ kontrola\ aktivnÃ­\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04450}04450\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (isTimerActive)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04451}04451\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ checkTimeWarnings(timerInfo);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04452}04452\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (timerInfo.time\_expired)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04453}04453\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ handleTimeExpiration(timerInfo);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04454}04454\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04455}04455\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04456}04456\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04457}04457\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.error('âŒ\ Timer\ update\ failed:',\ response.status);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04458}04458\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04459}04459\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04460}04460\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('âŒ\ Timer\ update\ error:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04461}04461\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04462}04462\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04463}04463\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04464}04464\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ applyTimeControl()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04465}04465\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ timeControlSelect\ =\ document.getElementById('time-\/control-\/select');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04466}04466\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ timeControlType\ =\ parseInt(timeControlSelect.value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04467}04467\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ let\ config\ =\ \{\ type:\ timeControlType\ \};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04468}04468\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (timeControlType\ ===\ 14)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04469}04469\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ minutes\ =\ parseInt(document.getElementById('custom-\/minutes').value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04470}04470\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ increment\ =\ parseInt(document.getElementById('custom-\/increment').value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04471}04471\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (minutes\ <\ 1\ ||\ minutes\ >\ 180)\ \{\ alert('Minuty\ musÃ­\ bÃ½t\ 1â€“180');\ return;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04472}04472\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (increment\ <\ 0\ ||\ increment\ >\ 60)\ \{\ alert('Increment\ musÃ­\ bÃ½t\ 0â€“60\ sekund');\ return;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04473}04473\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ config.custom\_minutes\ =\ minutes;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04474}04474\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ config.custom\_increment\ =\ increment;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04475}04475\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04476}04476\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04477}04477\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.log('Applying\ time\ control:',\ config);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04478}04478\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/timer/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04479}04479\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04480}04480\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04481}04481\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(config)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04482}04482\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04483}04483\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04484}04484\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ responseText\ =\ await\ response.text();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04485}04485\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.log('âœ…\ Time\ control\ response:',\ responseText);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04486}04486\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Wait\ for\ backend\ to\ process\ the\ command\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04487}04487\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ await\ new\ Promise(resolve\ =>\ setTimeout(resolve,\ 500));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04488}04488\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Refresh\ timer\ display\ multiple\ times\ to\ ensure\ update\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04489}04489\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ for\ (let\ i\ =\ 0;\ i\ <\ 5;\ i++)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04490}04490\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ updateTimerDisplay();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04491}04491\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ new\ Promise(resolve\ =>\ setTimeout(resolve,\ 300));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04492}04492\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04493}04493\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showTimeWarning('ÄŒasovÃ¡\ kontrola\ nastavena.',\ 'info');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04494}04494\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ applyBtn\ =\ document.getElementById('apply-\/time-\/control');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04495}04495\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (applyBtn)\ applyBtn.disabled\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04496}04496\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04497}04497\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ errorText\ =\ await\ response.text();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04498}04498\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.error('Failed\ to\ apply\ time\ control:',\ response.status,\ errorText);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04499}04499\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ throw\ new\ Error('Failed\ to\ apply\ time\ control:\ '\ +\ errorText);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04500}04500\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04501}04501\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04502}04502\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Error\ applying\ time\ control:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04503}04503\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ showTimeWarning('Chyba\ nastavenÃ­\ ÄasovÃ©\ kontroly:\ '\ +\ error.message,\ 'critical');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04504}04504\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04505}04505\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04506}04506\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04507}04507\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ pauseTimer()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04508}04508\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04509}04509\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/timer/pause',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04510}04510\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04511}04511\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ pauseBtn\ =\ document.getElementById('pause-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04512}04512\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ resumeBtn\ =\ document.getElementById('resume-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04513}04513\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (pauseBtn)\ pauseBtn.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04514}04514\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (resumeBtn)\ resumeBtn.style.display\ =\ 'inline-\/block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04515}04515\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showTimeWarning('ÄŒasomÃ­ra\ pozastavena',\ 'info');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04516}04516\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04517}04517\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04518}04518\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('âŒ\ Error\ pausing\ timer:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04519}04519\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04520}04520\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04521}04521\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04522}04522\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ resumeTimer()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04523}04523\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04524}04524\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/timer/resume',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04525}04525\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04526}04526\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ pauseBtn\ =\ document.getElementById('pause-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04527}04527\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ resumeBtn\ =\ document.getElementById('resume-\/timer');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04528}04528\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (pauseBtn)\ pauseBtn.style.display\ =\ 'inline-\/block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04529}04529\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (resumeBtn)\ resumeBtn.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04530}04530\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ showTimeWarning('ÄŒasomÃ­ra\ pokraÄuje',\ 'info');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04531}04531\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04532}04532\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04533}04533\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('âŒ\ Error\ resuming\ timer:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04534}04534\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04535}04535\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04536}04536\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04537}04537\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ resetTimer()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04538}04538\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (confirm('Really\ reset\ timer?'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04539}04539\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04540}04540\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/timer/reset',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04541}04541\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04542}04542\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ showTimeWarning('ÄŒasomÃ­ra\ resetovÃ¡na',\ 'info');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04543}04543\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ console.log('âœ…\ Timer\ reset\ successfully');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04544}04544\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ updateTimerDisplay();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04545}04545\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04546}04546\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04547}04547\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.error('âŒ\ Error\ resetting\ timer:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04548}04548\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04549}04549\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04550}04550\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04551}04551\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04552}04552\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04553}04553\ \ \ \ \ \textcolor{stringliteral}{"{}//\ BRIGHTNESS\ (NastavenÃ­\ â†’\ ZaÅ™Ã­zenÃ­)\ â€“\ for\ inline\ onchange\ on\ brightness-\/slider\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04554}04554\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04555}04555\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04556}04556\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ setBrightness(value)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04557}04557\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ num\ =\ Math.min(100,\ Math.max(0,\ parseInt(value,\ 10)));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04558}04558\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (Number.isNaN(num))\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04559}04559\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04560}04560\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/settings/brightness',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04561}04561\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04562}04562\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04563}04563\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ brightness:\ num\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04564}04564\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04565}04565\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ response.ok\ ?\ await\ response.json().catch(()\ =>\ (\{\}))\ :\ \{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04566}04566\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success\ !==\ false)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04567}04567\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (typeof\ console\ !==\ 'undefined'\ \&\&\ console.log)\ console.log('Jas\ nastaven\ na',\ num\ +\ '\%');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04568}04568\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04569}04569\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.warn('NastavenÃ­\ jasu\ selhalo:',\ data.message\ ||\ response.status);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04570}04570\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04571}04571\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (err)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04572}04572\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Chyba\ nastavenÃ­\ jasu:',\ err.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04573}04573\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04574}04574\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04575}04575\ \ \ \ \ \textcolor{stringliteral}{"{}window.setBrightness\ =\ setBrightness;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04576}04576\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04577}04577\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04578}04578\ \ \ \ \ \textcolor{stringliteral}{"{}//\ NEW\ GAME\ (NastavenÃ­\ â†’\ action\ bar\ â€žNovÃ¡\ hraâ€œ)\ â€“\ for\ inline\ onclick\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04579}04579\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04580}04580\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04581}04581\ \ \ \ \ \textcolor{stringliteral}{"{}function\ getConfirmNewGameEnabled()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04582}04582\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ cb\ =\ document.getElementById('confirm-\/new-\/game');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04583}04583\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (cb)\ return\ cb.checked;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04584}04584\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04585}04585\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ localStorage.getItem('chess\_confirm\_new\_game')\ ===\ 'true';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04586}04586\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04587}04587\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04588}04588\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04589}04589\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04590}04590\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04591}04591\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ startNewGame()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04592}04592\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (getConfirmNewGameEnabled())\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04593}04593\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!confirm('Opravdu\ chcete\ zaÄÃ­t\ novou\ hru?\ AktuÃ¡lnÃ­\ partie\ bude\ ukonÄena.'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04594}04594\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04595}04595\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04596}04596\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04597}04597\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04598}04598\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/game/new',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04599}04599\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04600}04600\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (typeof\ console\ !==\ 'undefined'\ \&\&\ console.log)\ console.log('NovÃ¡\ hra\ spuÅ¡tÄ›na');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04601}04601\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ await\ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04602}04602\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04603}04603\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.warn('NovÃ¡\ hra\ selhala:',\ response.status);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04604}04604\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04605}04605\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (err)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04606}04606\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Chyba\ startNewGame:',\ err.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04607}04607\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04608}04608\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04609}04609\ \ \ \ \ \textcolor{stringliteral}{"{}window.startNewGame\ =\ startNewGame;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04610}04610\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04611}04611\ \ \ \ \ \textcolor{stringliteral}{"{}(function\ initConfirmNewGamePref()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04612}04612\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ function\ apply()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04613}04613\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ var\ cb\ =\ document.getElementById('confirm-\/new-\/game');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04614}04614\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!cb)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04615}04615\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04616}04616\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ var\ saved\ =\ localStorage.getItem('chess\_confirm\_new\_game');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04617}04617\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ cb.checked\ =\ saved\ ===\ 'true';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04618}04618\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ catch\ (e)\ \{\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04619}04619\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ cb.addEventListener('change',\ function()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04620}04620\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04621}04621\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ localStorage.setItem('chess\_confirm\_new\_game',\ cb.checked);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04622}04622\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ catch\ (e)\ \{\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04623}04623\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04624}04624\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04625}04625\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (document.readyState\ ===\ 'loading')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04626}04626\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.addEventListener('DOMContentLoaded',\ apply);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04627}04627\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04628}04628\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ apply();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04629}04629\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04630}04630\ \ \ \ \ \textcolor{stringliteral}{"{}\})();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04631}04631\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04632}04632\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04633}04633\ \ \ \ \ \textcolor{stringliteral}{"{}//\ PROMOTION\ MODAL\ (Q/R/B/N\ a\ ZruÅ¡it)\ â€“\ for\ inline\ onclick\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04634}04634\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04635}04635\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04636}04636\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ selectPromotion(choice)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04637}04637\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ modal\ =\ document.getElementById('promotion-\/modal');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04638}04638\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (modal)\ modal.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04639}04639\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04640}04640\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ body\ =\ JSON.stringify(\{\ action:\ 'promote',\ choice:\ String(choice).toUpperCase().slice(0,\ 1)\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04641}04641\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/game/virtual\_action',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04642}04642\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04643}04643\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04644}04644\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ body\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04645}04645\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04646}04646\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (response.ok)\ await\ fetchData();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04647}04647\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (err)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04648}04648\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Chyba\ selectPromotion:',\ err.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04649}04649\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04650}04650\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04651}04651\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04652}04652\ \ \ \ \ \textcolor{stringliteral}{"{}function\ cancelPromotion()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04653}04653\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ modal\ =\ document.getElementById('promotion-\/modal');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04654}04654\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (modal)\ modal.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04655}04655\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Odblokovat\ hru\ vÃ½chozÃ­\ volbou\ (DÃ¡ma)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04656}04656\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ selectPromotion('Q');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04657}04657\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04658}04658\ \ \ \ \ \textcolor{stringliteral}{"{}window.selectPromotion\ =\ selectPromotion;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04659}04659\ \ \ \ \ \textcolor{stringliteral}{"{}window.cancelPromotion\ =\ cancelPromotion;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04660}04660\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04661}04661\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Expose\ timer\ functions\ globally\ for\ inline\ onclick\ handlers\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04662}04662\ \ \ \ \ \textcolor{stringliteral}{"{}window.changeTimeControl\ =\ changeTimeControl;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04663}04663\ \ \ \ \ \textcolor{stringliteral}{"{}window.applyTimeControl\ =\ applyTimeControl;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04664}04664\ \ \ \ \ \textcolor{stringliteral}{"{}window.pauseTimer\ =\ pauseTimer;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04665}04665\ \ \ \ \ \textcolor{stringliteral}{"{}window.resumeTimer\ =\ resumeTimer;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04666}04666\ \ \ \ \ \textcolor{stringliteral}{"{}window.resetTimer\ =\ resetTimer;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04667}04667\ \ \ \ \ \textcolor{stringliteral}{"{}window.hideEndgameReport\ =\ hideEndgameReport;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04668}04668\ \ \ \ \ \textcolor{stringliteral}{"{}window.toggleRemoteControl\ =\ toggleRemoteControl;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04669}04669\ \ \ \ \ \textcolor{stringliteral}{"{}window.undoSandboxMove\ =\ undoSandboxMove;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04670}04670\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04671}04671\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Initialize\ timer\ system\ immediately\ (will\ retry\ if\ DOM\ not\ ready)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04672}04672\ \ \ \ \ \textcolor{stringliteral}{"{}console.log('â±ï¸\ Exposing\ timer\ functions\ and\ calling\ initTimerSystem()...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04673}04673\ \ \ \ \ \textcolor{stringliteral}{"{}try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04674}04674\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ initTimerSystem();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04675}04675\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('âœ…\ initTimerSystem()\ called\ successfully');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04676}04676\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04677}04677\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.error('âŒ\ CRITICAL\ ERROR\ in\ initTimerSystem():',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04678}04678\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.error('Stack:',\ error.stack);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04679}04679\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04680}04680\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04681}04681\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04682}04682\ \ \ \ \ \textcolor{stringliteral}{"{}//\ KEYBOARD\ SHORTCUTS\ AND\ EVENT\ HANDLERS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04683}04683\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04684}04684\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04685}04685\ \ \ \ \ \textcolor{stringliteral}{"{}document.addEventListener('keydown',\ (e)\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04686}04686\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (e.key\ ===\ 'Escape')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04687}04687\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (reviewMode)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04688}04688\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ exitReviewMode();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04689}04689\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ if\ (sandboxMode)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04690}04690\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ exitSandboxMode();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04691}04691\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04692}04692\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04693}04693\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04694}04694\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04695}04695\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (historyData.length\ ===\ 0)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04696}04696\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ switch\ (e.key)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04697}04697\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'ArrowLeft':\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04698}04698\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ e.preventDefault();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04699}04699\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (reviewMode\ \&\&\ currentReviewIndex\ >\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04700}04700\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enterReviewMode(currentReviewIndex\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04701}04701\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ if\ (!reviewMode\ \&\&\ !sandboxMode\ \&\&\ historyData.length\ >\ 0)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04702}04702\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enterReviewMode(historyData.length\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04703}04703\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04704}04704\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ break;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04705}04705\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ case\ 'ArrowRight':\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04706}04706\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ e.preventDefault();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04707}04707\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (reviewMode\ \&\&\ currentReviewIndex\ <\ historyData.length\ -\/\ 1)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04708}04708\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enterReviewMode(currentReviewIndex\ +\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04709}04709\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04710}04710\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ break;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04711}04711\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04712}04712\ \ \ \ \ \textcolor{stringliteral}{"{}\});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04713}04713\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04714}04714\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Click\ outside\ to\ deselect\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04715}04715\ \ \ \ \ \textcolor{stringliteral}{"{}document.addEventListener('click',\ (e)\ =>\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04716}04716\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!e.target.closest('.square')\ \&\&\ !e.target.closest('.history-\/item'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04717}04717\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (!reviewMode)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04718}04718\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ clearHighlights();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04719}04719\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04720}04720\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04721}04721\ \ \ \ \ \textcolor{stringliteral}{"{}\});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04722}04722\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04723}04723\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04724}04724\ \ \ \ \ \textcolor{stringliteral}{"{}//\ WIFI\ FUNCTIONS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04725}04725\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04726}04726\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04727}04727\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ saveWiFiConfig()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04728}04728\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ ssid\ =\ document.getElementById('wifi-\/ssid').value;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04729}04729\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ password\ =\ document.getElementById('wifi-\/password').value;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04730}04730\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!ssid\ ||\ !password)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04731}04731\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('SSID\ a\ heslo\ jsou\ povinnÃ©');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04732}04732\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04733}04733\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04734}04734\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04735}04735\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/wifi/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04736}04736\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04737}04737\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04738}04738\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ ssid:\ ssid,\ password:\ password\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04739}04739\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04740}04740\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04741}04741\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04742}04742\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('WiFi\ uloÅ¾eno.\ StisknÄ›te\ â€žPÅ™ipojit\ STAâ€œ.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04743}04743\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04744}04744\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('UloÅ¾enÃ­\ WiFi\ selhalo:\ '\ +\ data.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04745}04745\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04746}04746\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04747}04747\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba:\ '\ +\ error.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04748}04748\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04749}04749\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04750}04750\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04751}04751\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ connectSTA()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04752}04752\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04753}04753\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/wifi/connect',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04754}04754\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04755}04755\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04756}04756\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('PÅ™ipojovÃ¡nÃ­\ k\ WiFi...');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04757}04757\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ setTimeout(updateWiFiStatus,\ 1500);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04758}04758\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04759}04759\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('PÅ™ipojenÃ­\ selhalo:\ '\ +\ data.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04760}04760\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04761}04761\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04762}04762\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba:\ '\ +\ error.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04763}04763\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04764}04764\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04765}04765\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04766}04766\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ disconnectSTA()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04767}04767\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04768}04768\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/wifi/disconnect',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04769}04769\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04770}04770\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04771}04771\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('Odpojeno\ od\ WiFi');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04772}04772\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ setTimeout(updateWiFiStatus,\ 1000);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04773}04773\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04774}04774\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('OdpojenÃ­\ selhalo:\ '\ +\ data.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04775}04775\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04776}04776\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04777}04777\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba:\ '\ +\ error.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04778}04778\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04779}04779\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04780}04780\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04781}04781\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ clearWiFiConfig()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04782}04782\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!confirm('Opravdu\ smazat\ uloÅ¾enou\ WiFi\ konfiguraci?\ ESP\ se\ odpojÃ­\ od\ sÃ­tÄ›.'))\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04783}04783\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04784}04784\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04785}04785\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04786}04786\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/wifi/clear',\ \{\ method:\ 'POST'\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04787}04787\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04788}04788\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04789}04789\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('WiFi\ konfigurace\ smazÃ¡na.');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04790}04790\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ setTimeout(updateWiFiStatus,\ 500);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04791}04791\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04792}04792\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('SmazÃ¡nÃ­\ selhalo:\ '\ +\ (data.message\ ||\ 'neznÃ¡mÃ¡\ chyba'));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04793}04793\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04794}04794\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04795}04795\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba:\ '\ +\ error.message);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04796}04796\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04797}04797\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04798}04798\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04799}04799\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ updateWiFiStatus()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04800}04800\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04801}04801\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/wifi/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04802}04802\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04803}04803\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('ap-\/ssid').textContent\ =\ data.ap\_ssid\ ||\ 'ESP32-\/CzechMate';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04804}04804\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('ap-\/ip').textContent\ =\ data.ap\_ip\ ||\ '192.168.4.1';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04805}04805\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('ap-\/clients').textContent\ =\ data.ap\_clients\ ||\ 0;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04806}04806\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('sta-\/ssid').textContent\ =\ data.sta\_ssid\ ||\ 'Nenastaveno';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04807}04807\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('sta-\/ip').textContent\ =\ data.sta\_ip\ ||\ 'NepÅ™ipojeno';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04808}04808\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ document.getElementById('sta-\/connected').textContent\ =\ data.sta\_connected\ ?\ 'ano'\ :\ 'ne';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04809}04809\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.sta\_ssid\ \&\&\ data.sta\_ssid\ !==\ 'Nenastaveno')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04810}04810\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ document.getElementById('wifi-\/ssid').value\ =\ data.sta\_ssid;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04811}04811\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04812}04812\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ ZaÅ™Ã­zenÃ­:\ ZÃ¡mek\ a\ Online\ (data\ z\ tÃ©hoÅ¾\ API)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04813}04813\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ lockEl\ =\ document.getElementById('web-\/lock-\/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04814}04814\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (lockEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04815}04815\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ lockEl.textContent\ =\ data.locked\ ?\ 'ZamÄeno'\ :\ 'OdemÄeno';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04816}04816\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ lockEl.style.color\ =\ data.locked\ ?\ '\#e53935'\ :\ '\#43a047';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04817}04817\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04818}04818\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ onlineEl\ =\ document.getElementById('web-\/online-\/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04819}04819\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (onlineEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04820}04820\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ onlineEl.textContent\ =\ data.online\ ?\ 'Online'\ :\ 'Offline';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04821}04821\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ onlineEl.style.color\ =\ data.online\ ?\ '\#43a047'\ :\ '\#e53935';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04822}04822\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04823}04823\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04824}04824\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Failed\ to\ update\ WiFi\ status:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04825}04825\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04826}04826\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04827}04827\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04828}04828\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Expose\ WiFi\ functions\ globally\ for\ inline\ onclick\ handlers\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04829}04829\ \ \ \ \ \textcolor{stringliteral}{"{}window.saveWiFiConfig\ =\ saveWiFiConfig;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04830}04830\ \ \ \ \ \textcolor{stringliteral}{"{}window.connectSTA\ =\ connectSTA;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04831}04831\ \ \ \ \ \textcolor{stringliteral}{"{}window.disconnectSTA\ =\ disconnectSTA;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04832}04832\ \ \ \ \ \textcolor{stringliteral}{"{}window.clearWiFiConfig\ =\ clearWiFiConfig;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04833}04833\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04834}04834\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Start\ WiFi\ status\ update\ loop\ (every\ 5\ seconds)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04835}04835\ \ \ \ \ \textcolor{stringliteral}{"{}let\ wifiStatusInterval\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04836}04836\ \ \ \ \ \textcolor{stringliteral}{"{}function\ startWiFiStatusUpdateLoop()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04837}04837\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (wifiStatusInterval)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04838}04838\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ clearInterval(wifiStatusInterval);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04839}04839\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04840}04840\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Initial\ update\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04841}04841\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateWiFiStatus();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04842}04842\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Update\ every\ 5\ seconds\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04843}04843\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ wifiStatusInterval\ =\ setInterval(updateWiFiStatus,\ 10000);\ //\ Reduced\ from\ 5s\ to\ 10s\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04844}04844\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04845}04845\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04846}04846\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Start\ WiFi\ status\ updates\ when\ DOM\ is\ ready\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04847}04847\ \ \ \ \ \textcolor{stringliteral}{"{}if\ (document.readyState\ ===\ 'loading')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04848}04848\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.addEventListener('DOMContentLoaded',\ startWiFiStatusUpdateLoop);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04849}04849\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04850}04850\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ startWiFiStatusUpdateLoop();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04851}04851\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04852}04852\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04853}04853\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04854}04854\ \ \ \ \ \textcolor{stringliteral}{"{}//\ DEMO\ MODE\ (SCREENSAVER)\ FUNCTIONS\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04855}04855\ \ \ \ \ \textcolor{stringliteral}{"{}//\ ============================================================================\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04856}04856\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04857}04857\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04858}04858\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Toggle\ demo/screensaver\ mode\ on\ or\ off\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04859}04859\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04860}04860\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ toggleDemoMode()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04861}04861\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04862}04862\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Get\ current\ state\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04863}04863\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ currentlyEnabled\ =\ await\ isDemoModeEnabled();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04864}04864\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ newState\ =\ !currentlyEnabled;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04865}04865\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04866}04866\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ //\ Send\ toggle\ request\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04867}04867\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/demo/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04868}04868\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04869}04869\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ headers:\ \{\ 'Content-\/Type':\ 'application/json'\ \},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04870}04870\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ body:\ JSON.stringify(\{\ enabled:\ newState\ \})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04871}04871\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04872}04872\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04873}04873\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04874}04874\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04875}04875\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04876}04876\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.log('âœ…\ Demo\ mode\ toggled:',\ newState\ ?\ 'ON'\ :\ 'OFF');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04877}04877\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ //\ Update\ status\ immediately\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04878}04878\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ await\ updateDemoModeStatus();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04879}04879\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04880}04880\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ console.error('âŒ\ Failed\ to\ toggle\ demo\ mode');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04881}04881\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ alert('PÅ™epnutÃ­\ demo\ reÅ¾imu\ selhalo:\ '\ +\ (data.message\ ||\ 'NeznÃ¡mÃ¡\ chyba'));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04882}04882\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04883}04883\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04884}04884\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Error\ toggling\ demo\ mode:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04885}04885\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ alert('Chyba\ pÅ™i\ pÅ™epnutÃ­\ demo\ reÅ¾imu');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04886}04886\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04887}04887\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04888}04888\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04889}04889\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04890}04890\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Check\ if\ demo\ mode\ is\ currently\ enabled\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04891}04891\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ @returns\ \{Promise<boolean>\}\ True\ if\ enabled\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04892}04892\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04893}04893\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ isDemoModeEnabled()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04894}04894\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04895}04895\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ response\ =\ await\ fetch('/api/demo/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04896}04896\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04897}04897\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ data.enabled\ ===\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04898}04898\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04899}04899\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Failed\ to\ check\ demo\ mode\ status:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04900}04900\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ return\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04901}04901\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04902}04902\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04903}04903\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04904}04904\ \ \ \ \ \textcolor{stringliteral}{"{}/**\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04905}04905\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Update\ demo\ mode\ status\ indicator\ in\ UI.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04906}04906\ \ \ \ \ \textcolor{stringliteral}{"{}\ *\ Syncs\ checkbox\ in\ Settings\ tab\ (demo-\/enabled)\ when\ the\ removed\ demoStatus/btnDemoMode\ are\ not\ present.\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04907}04907\ \ \ \ \ \textcolor{stringliteral}{"{}\ */\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04908}04908\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ updateDemoModeStatus()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04909}04909\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04910}04910\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ enabled\ =\ await\ isDemoModeEnabled();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04911}04911\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ statusEl\ =\ document.getElementById('demoStatus');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04912}04912\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ btnEl\ =\ document.getElementById('btnDemoMode');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04913}04913\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ const\ demoCheckbox\ =\ document.getElementById('demo-\/enabled');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04914}04914\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04915}04915\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (statusEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04916}04916\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (enabled)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04917}04917\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.textContent\ =\ 'Zapnuto';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04918}04918\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.style.color\ =\ '\#4CAF50';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04919}04919\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.style.fontWeight\ =\ 'bold';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04920}04920\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04921}04921\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.textContent\ =\ 'Vypnuto';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04922}04922\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.style.color\ =\ '\#999';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04923}04923\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusEl.style.fontWeight\ =\ 'normal';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04924}04924\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04925}04925\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04926}04926\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04927}04927\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (btnEl)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04928}04928\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ if\ (enabled)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04929}04929\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.classList.add('btn-\/active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04930}04930\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.style.backgroundColor\ =\ '\#4CAF50';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04931}04931\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.style.borderColor\ =\ '\#45a049';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04932}04932\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04933}04933\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.classList.remove('btn-\/active');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04934}04934\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.style.backgroundColor\ =\ '\#008CBA';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04935}04935\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ btnEl.style.borderColor\ =\ '\#007396';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04936}04936\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04937}04937\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04938}04938\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04939}04939\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ if\ (demoCheckbox\ \&\&\ demoCheckbox.checked\ !==\ enabled)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04940}04940\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \ \ \ \ demoCheckbox.checked\ =\ enabled;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04941}04941\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04942}04942\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ catch\ (error)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04943}04943\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ console.error('Chyba\ aktualizace\ stavu\ demo\ reÅ¾imu:',\ error);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04944}04944\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04945}04945\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04946}04946\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04947}04947\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Expose\ demo\ mode\ functions\ globally\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04948}04948\ \ \ \ \ \textcolor{stringliteral}{"{}window.toggleDemoMode\ =\ toggleDemoMode;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04949}04949\ \ \ \ \ \textcolor{stringliteral}{"{}window.updateDemoModeStatus\ =\ updateDemoModeStatus;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04950}04950\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04951}04951\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Start\ demo\ mode\ status\ update\ loop\ (every\ 3\ seconds)\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04952}04952\ \ \ \ \ \textcolor{stringliteral}{"{}let\ demoModeStatusInterval\ =\ null;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04953}04953\ \ \ \ \ \textcolor{stringliteral}{"{}function\ startDemoModeStatusUpdateLoop()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04954}04954\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (demoModeStatusInterval)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04955}04955\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ clearInterval(demoModeStatusInterval);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04956}04956\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04957}04957\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Initial\ update\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04958}04958\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ updateDemoModeStatus();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04959}04959\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Update\ every\ 3\ seconds\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04960}04960\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ demoModeStatusInterval\ =\ setInterval(updateDemoModeStatus,\ 5000);\ //\ Reduced\ from\ 3s\ to\ 5s\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04961}04961\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04962}04962\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04963}04963\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Start\ demo\ mode\ status\ updates\ when\ DOM\ is\ ready\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04964}04964\ \ \ \ \ \textcolor{stringliteral}{"{}if\ (document.readyState\ ===\ 'loading')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04965}04965\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ document.addEventListener('DOMContentLoaded',\ startDemoModeStatusUpdateLoop);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04966}04966\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04967}04967\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ startDemoModeStatusUpdateLoop();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04968}04968\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04969}04969\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04970}04970\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Helper\ functions\ for\ move\ history\ navigation\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04971}04971\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04972}04972\ \ \ \ \ \textcolor{stringliteral}{"{}function\ goToMove(index)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04973}04973\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!historyData\ ||\ historyData.length\ ===\ 0)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04974}04974\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04975}04975\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Special\ case:\ -\/1\ means\ go\ to\ last\ move\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04976}04976\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (index\ ===\ -\/1)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04977}04977\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ \ \ index\ =\ historyData.length\ -\/\ 1;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04978}04978\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04979}04979\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04980}04980\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ //\ Clamp\ index\ to\ valid\ range\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04981}04981\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ index\ =\ Math.max(0,\ Math.min(index,\ historyData.length\ -\/\ 1));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04982}04982\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04983}04983\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ enterReviewMode(index);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04984}04984\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04985}04985\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04986}04986\ \ \ \ \ \textcolor{stringliteral}{"{}function\ prevReviewMove()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04987}04987\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!reviewMode\ ||\ currentReviewIndex\ <=\ 0)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04988}04988\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ enterReviewMode(currentReviewIndex\ -\/\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04989}04989\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04990}04990\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04991}04991\ \ \ \ \ \textcolor{stringliteral}{"{}function\ nextReviewMove()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04992}04992\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (!reviewMode\ ||\ currentReviewIndex\ >=\ historyData.length\ -\/\ 1)\ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04993}04993\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ enterReviewMode(currentReviewIndex\ +\ 1);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04994}04994\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04995}04995\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04996}\mbox{\hyperlink{web__server__task_8c_afeadcd80458be0b8f189b25986dc9e72}{04996}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_afeadcd80458be0b8f189b25986dc9e72}{http\_get\_chess\_js\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04997}04997\ \ \ \textcolor{keywordtype}{size\_t}\ total\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a31bf285a16bbf718a86c71d94f2b9f31}{chess\_app\_js\_content}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04998}04998\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /chess\_app.js\ (\%zu\ bytes)\ -\/\ using\ chunked\ transfer"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l04999}04999\ \ \ \ \ \ \ \ \ \ \ \ total\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05000}05000\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05001}05001\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}application/javascript;\ charset=utf-\/8"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05002}05002\ \ \ \textcolor{comment}{//\ Cache-\/busting:\ no-\/cache\ zajisti,\ ze\ se\ JavaScript\ vzdy\ nacte\ cerstvy}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05003}05003\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Cache-\/Control"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05004}05004\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}no-\/cache,\ no-\/store,\ must-\/revalidate"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05005}05005\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Pragma"{}},\ \textcolor{stringliteral}{"{}no-\/cache"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05006}05006\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Expires"{}},\ \textcolor{stringliteral}{"{}0"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05007}05007\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05008}05008\ \ \ \textcolor{comment}{//\ CHUNKED\ TRANSFER:\ ESP32\ HTTP\ server\ cannot\ handle\ 54KB\ in\ one\ send}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05009}05009\ \ \ \textcolor{comment}{//\ Send\ in\ 4KB\ chunks\ to\ prevent\ ECONNRESET\ (error\ 104)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05010}05010\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *ptr\ =\ \mbox{\hyperlink{web__server__task_8c_a31bf285a16bbf718a86c71d94f2b9f31}{chess\_app\_js\_content}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05011}05011\ \ \ \textcolor{keywordtype}{size\_t}\ remaining\ =\ total\_len;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05012}05012\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_num\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05013}05013\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ CHUNK\_SIZE\ =\ 4096;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05014}05014\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05015}05015\ \ \ \textcolor{keywordflow}{while}\ (remaining\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05016}05016\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ chunk\ =\ (remaining\ >\ CHUNK\_SIZE)\ ?\ CHUNK\_SIZE\ :\ remaining;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05017}05017\ \ \ \ \ esp\_err\_t\ ret\ =\ httpd\_resp\_send\_chunk(req,\ ptr,\ chunk);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05018}05018\ \ \ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05019}05019\ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}chess\_app.js\ chunk\ \%zu\ send\ failed\ (client\ disconnected?):\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05020}05020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_num,\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05021}05021\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05022}05022\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05023}05023\ \ \ \ \ ptr\ +=\ chunk;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05024}05024\ \ \ \ \ remaining\ -\/=\ chunk;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05025}05025\ \ \ \ \ chunk\_num++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05026}05026\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05027}05027\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05028}05028\ \ \ \textcolor{comment}{//\ End\ chunked\ transfer}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05029}05029\ \ \ httpd\_resp\_send\_chunk(req,\ NULL,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05030}05030\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âœ…\ chess\_app.js\ sent\ in\ \%zu\ chunks\ (\%zu\ bytes\ total)"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05031}05031\ \ \ \ \ \ \ \ \ \ \ \ chunk\_num,\ total\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05032}05032\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05033}05033\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05034}05034\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05035}05035\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05036}\mbox{\hyperlink{web__server__task_8c_a42e66ee24fe5081421583e97925b3d7a}{05036}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a42e66ee24fe5081421583e97925b3d7a}{test\_html}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05037}05037\ \ \ \ \ \textcolor{stringliteral}{"{}<!DOCTYPE\ html><html><head><meta\ charset='UTF-\/8'><title>Timer\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05038}05038\ \ \ \ \ \textcolor{stringliteral}{"{}Test</title>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05039}05039\ \ \ \ \ \textcolor{stringliteral}{"{}<style>body\{background:\#1a1a1a;color:white;padding:20px;font-\/family:"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05040}05040\ \ \ \ \ \textcolor{stringliteral}{"{}Arial;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05041}05041\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05042}05042\ \ \ \ \ \textcolor{stringliteral}{"{}.timer\{background:\#333;padding:20px;margin:10px;border-\/radius:8px;\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05043}05043\ \ \ \ \ \textcolor{stringliteral}{"{}button\{padding:10px\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05044}05044\ \ \ \ \ \textcolor{stringliteral}{"{}20px;margin:5px;cursor:pointer;\}</style></head><body>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05045}05045\ \ \ \ \ \textcolor{stringliteral}{"{}<h1>Timer\ Test</h1><div\ class='timer'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05046}05046\ \ \ \ \ \textcolor{stringliteral}{"{}<h2>White:\ <span\ id='white-\/time'>-\/-\/:-\/-\/</span></h2>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05047}05047\ \ \ \ \ \textcolor{stringliteral}{"{}<h2>Black:\ <span\ id='black-\/time'>-\/-\/:-\/-\/</span></h2></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05048}05048\ \ \ \ \ \textcolor{stringliteral}{"{}<div><select\ id='time-\/control'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05049}05049\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='0'>None</option><option\ value='3'>Rapid\ 10+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05050}05050\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='12'>Classical\ 60+0</option></select>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05051}05051\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick='applyTime()'>Apply</button></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05052}05052\ \ \ \ \ \textcolor{stringliteral}{"{}<div><button\ onclick='pauseTimer()'>Pause</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05053}05053\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick='resumeTimer()'>Resume</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05054}05054\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick='resetTimer()'>Reset</button></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05055}05055\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='log'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05056}05056\ \ \ \ \ \textcolor{stringliteral}{"{}style='background:\#222;padding:10px;margin-\/top:20px;max-\/height:200px;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05057}05057\ \ \ \ \ \textcolor{stringliteral}{"{}overflow-\/y:auto;'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05058}05058\ \ \ \ \ \textcolor{stringliteral}{"{}<script>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05059}05059\ \ \ \ \ \textcolor{stringliteral}{"{}function\ log(m)\{const\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05060}05060\ \ \ \ \ \textcolor{stringliteral}{"{}d=document.getElementById('log');d.innerHTML+='<div>'+new\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05061}05061\ \ \ \ \ \textcolor{stringliteral}{"{}Date().toLocaleTimeString()+':\ '+m+'</div>';d.scrollTop=d.scrollHeight;\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05062}05062\ \ \ \ \ \textcolor{stringliteral}{"{}log('Script\ loaded');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05063}05063\ \ \ \ \ \textcolor{stringliteral}{"{}function\ formatTime(ms)\{const\ s=Math.ceil(ms/1000);const\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05064}05064\ \ \ \ \ \textcolor{stringliteral}{"{}m=Math.floor(s/60);const\ sec=s\%60;return\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05065}05065\ \ \ \ \ \textcolor{stringliteral}{"{}m+':'+sec.toString().padStart(2,'0');\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05066}05066\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ updateTimer()\{try\{const\ res=await\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05067}05067\ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/timer');if(res.ok)\{const\ data=await\ res.json();"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05068}05068\ \ \ \ \ \textcolor{stringliteral}{"{}document.getElementById('white-\/time').textContent=formatTime(data.white\_"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05069}05069\ \ \ \ \ \textcolor{stringliteral}{"{}time\_ms);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05070}05070\ \ \ \ \ \textcolor{stringliteral}{"{}document.getElementById('black-\/time').textContent=formatTime(data.black\_"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05071}05071\ \ \ \ \ \textcolor{stringliteral}{"{}time\_ms);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05072}05072\ \ \ \ \ \textcolor{stringliteral}{"{}log('W='+data.white\_time\_ms+'\ B='+data.black\_time\_ms);\}else\{log('ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05073}05073\ \ \ \ \ \textcolor{stringliteral}{"{}'+res.status);\}\}catch(e)\{log('ERROR:\ '+e.message);\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05074}05074\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ applyTime()\{const\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05075}05075\ \ \ \ \ \textcolor{stringliteral}{"{}type=parseInt(document.getElementById('time-\/control').value);log('Apply\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05076}05076\ \ \ \ \ \textcolor{stringliteral}{"{}type='+type);try\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05077}05077\ \ \ \ \ \textcolor{stringliteral}{"{}const\ res=await\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05078}05078\ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/timer/"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05079}05079\ \ \ \ \ \textcolor{stringliteral}{"{}config',\{method:'POST',headers:\{'Content-\/Type':'application/"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05080}05080\ \ \ \ \ \textcolor{stringliteral}{"{}json'\},body:JSON.stringify(\{type:type\})\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05081}05081\ \ \ \ \ \textcolor{stringliteral}{"{}if(res.ok)\{log('OK');setTimeout(updateTimer,500);\}else\{log('ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05082}05082\ \ \ \ \ \textcolor{stringliteral}{"{}'+res.status+'\ '+(await\ res.text()));\}\}catch(e)\{log('ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05083}05083\ \ \ \ \ \textcolor{stringliteral}{"{}'+e.message);\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05084}05084\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ pauseTimer()\{log('Pause');try\{const\ res=await\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05085}05085\ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/timer/pause',\{method:'POST'\});log(res.ok?'OK':'ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05086}05086\ \ \ \ \ \textcolor{stringliteral}{"{}'+res.status);\}catch(e)\{log('ERROR:\ '+e.message);\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05087}05087\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ resumeTimer()\{log('Resume');try\{const\ res=await\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05088}05088\ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/timer/resume',\{method:'POST'\});log(res.ok?'OK':'ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05089}05089\ \ \ \ \ \textcolor{stringliteral}{"{}'+res.status);\}catch(e)\{log('ERROR:\ '+e.message);\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05090}05090\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ resetTimer()\{log('Reset');try\{const\ res=await\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05091}05091\ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/timer/reset',\{method:'POST'\});log(res.ok?'OK':'ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05092}05092\ \ \ \ \ \textcolor{stringliteral}{"{}'+res.status);setTimeout(updateTimer,500);\}catch(e)\{log('ERROR:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05093}05093\ \ \ \ \ \textcolor{stringliteral}{"{}'+e.message);\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05094}05094\ \ \ \ \ \textcolor{stringliteral}{"{}log('Starting\ updates');setInterval(updateTimer,300);updateTimer();"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05095}05095\ \ \ \ \ \textcolor{stringliteral}{"{}</script></body></html>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05096}05096\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05097}\mbox{\hyperlink{web__server__task_8c_ae7ac8a7695f85cdf9c15b8045b2813b3}{05097}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ae7ac8a7695f85cdf9c15b8045b2813b3}{http\_get\_test\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05098}05098\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /test\ -\/\ minimal\ timer\ test\ page"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05099}05099\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}text/html;\ charset=utf-\/8"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05100}05100\ \ \ httpd\_resp\_send(req,\ \mbox{\hyperlink{web__server__task_8c_a42e66ee24fe5081421583e97925b3d7a}{test\_html}},\ HTTPD\_RESP\_USE\_STRLEN);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05101}05101\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05102}05102\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05103}05103\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05104}\mbox{\hyperlink{web__server__task_8c_a9c15047ba3df7b2591894a68c0d80923}{05104}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_a9c15047ba3df7b2591894a68c0d80923}{http\_get\_favicon\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05105}05105\ \ \ \textcolor{comment}{//\ Return\ 204\ No\ Content\ to\ silence\ the\ browser's\ request\ without\ sending\ a}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05106}05106\ \ \ \textcolor{comment}{//\ file}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05107}05107\ \ \ httpd\_resp\_set\_status(req,\ \textcolor{stringliteral}{"{}204\ No\ Content"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05108}05108\ \ \ httpd\_resp\_send(req,\ NULL,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05109}05109\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05110}05110\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05111}05111\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05112}05112\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05113}05113\ \textcolor{comment}{//\ HTML\ CONTENT\ -\/\ CHUNKED\ ARRAYS\ IN\ FLASH\ MEMORY\ (READ-\/ONLY)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05114}05114\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05115}05115\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05116}05116\ \textcolor{comment}{//\ HTML\ split\ into\ logical\ chunks\ for\ reliable\ chunked\ transfer}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05117}05117\ \textcolor{comment}{//\ Each\ chunk\ is\ a\ separate\ const\ string\ in\ flash\ memory\ (.rodata\ section)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05118}05118\ \textcolor{comment}{//\ JavaScript\ is\ kept\ as\ ONE\ complete\ chunk\ to\ avoid\ "{}is\ not\ defined"{}\ errors}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05119}05119\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05120}05120\ \textcolor{comment}{//\ Chunk\ 1:\ HTML\ head\ with\ bootstrap\ script\ and\ CSS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05121}\mbox{\hyperlink{web__server__task_8c_a50be2765f30c79691d319bc9a1b6920c}{05121}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a50be2765f30c79691d319bc9a1b6920c}{html\_chunk\_head}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05122}05122\ \ \ \ \ \textcolor{comment}{//\ HTML\ head\ and\ initial\ structure}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05123}05123\ \ \ \ \ \textcolor{stringliteral}{"{}<!DOCTYPE\ html>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05124}05124\ \ \ \ \ \textcolor{stringliteral}{"{}<html\ lang='en'>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05125}05125\ \ \ \ \ \textcolor{stringliteral}{"{}<head>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05126}05126\ \ \ \ \ \textcolor{stringliteral}{"{}<meta\ charset='UTF-\/8'>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05127}05127\ \ \ \ \ \textcolor{stringliteral}{"{}<meta\ name='viewport'\ content='width=device-\/width,\ initial-\/scale=1.0'>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05128}05128\ \ \ \ \ \textcolor{stringliteral}{"{}<title>CZECHMATE</title>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05129}05129\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05130}05130\ \ \ \ \ \textcolor{comment}{//\ Early\ bootstrap\ to\ avoid\ 'is\ not\ defined'\ before\ main\ script\ loads}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05131}05131\ \ \ \ \ \textcolor{stringliteral}{"{}<script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05132}05132\ \ \ \ \ \textcolor{stringliteral}{"{}window.changeTimeControl\ =\ window.changeTimeControl\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05133}05133\ \ \ \ \ \textcolor{stringliteral}{"{}window.applyTimeControl\ =\ window.applyTimeControl\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05134}05134\ \ \ \ \ \textcolor{stringliteral}{"{}window.pauseTimer\ =\ window.pauseTimer\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05135}05135\ \ \ \ \ \textcolor{stringliteral}{"{}window.resumeTimer\ =\ window.resumeTimer\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05136}05136\ \ \ \ \ \textcolor{stringliteral}{"{}window.resetTimer\ =\ window.resetTimer\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05137}05137\ \ \ \ \ \textcolor{stringliteral}{"{}window.hideEndgameReport\ =\ window.hideEndgameReport\ ||\ function()\{\};\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05138}05138\ \ \ \ \ \textcolor{stringliteral}{"{}</script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05139}05139\ \ \ \ \ \textcolor{comment}{//\ Global\ JS\ error\ capture\ to\ surface\ syntax/runtime\ errors\ visibly}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05140}05140\ \ \ \ \ \textcolor{stringliteral}{"{}<script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05141}05141\ \ \ \ \ \textcolor{stringliteral}{"{}(function()\{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05142}05142\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showJsError(msg,\ src,\ line,\ col)\{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05143}05143\ \ \ \ \ \textcolor{stringliteral}{"{}try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05144}05144\ \ \ \ \ \textcolor{stringliteral}{"{}var\ b=document.body||document.documentElement;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05145}05145\ \ \ \ \ \textcolor{stringliteral}{"{}var\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05146}05146\ \ \ \ \ \textcolor{stringliteral}{"{}d=document.getElementById('js-\/error')||document.createElement('pre');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05147}05147\ \ \ \ \ \textcolor{stringliteral}{"{}d.id='js-\/error';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05148}05148\ \ \ \ \ \textcolor{stringliteral}{"{}d.style.cssText='position:fixed;left:6px;bottom:6px;right:6px;max-\/"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05149}05149\ \ \ \ \ \textcolor{stringliteral}{"{}height:"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05150}05150\ \ \ \ \ \textcolor{stringliteral}{"{}40vh;overflow:auto;background:\#300;color:\#fff;border:1px\ solid\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05151}05151\ \ \ \ \ \textcolor{stringliteral}{"{}\#900;padding:8px;margin:0;z-\/index:99999;font:12px/1.4\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05152}05152\ \ \ \ \ \textcolor{stringliteral}{"{}monospace;white-\/space:pre-\/wrap;';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05153}05153\ \ \ \ \ \textcolor{stringliteral}{"{}d.textContent='JS\ ERROR:\ '+msg+'\(\backslash\)\(\backslash\)nSource:\ '+(src||'-\/')+'\(\backslash\)\(\backslash\)nLine:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05154}05154\ \ \ \ \ \textcolor{stringliteral}{"{}'+line+':'+col;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05155}05155\ \ \ \ \ \textcolor{stringliteral}{"{}b\&\&b.appendChild(d);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05156}05156\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ catch(e)\ \{\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05157}05157\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05158}05158\ \ \ \ \ \textcolor{stringliteral}{"{}window.addEventListener('error',\ function(e)\{\ showJsError(e.message,\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05159}05159\ \ \ \ \ \textcolor{stringliteral}{"{}e.filename,\ e.lineno,\ e.colno);\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05160}05160\ \ \ \ \ \textcolor{stringliteral}{"{}window.addEventListener('unhandledrejection',\ function(e)\{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05161}05161\ \ \ \ \ \textcolor{stringliteral}{"{}showJsError('Unhandled\ promise\ rejection:\ '+e.reason,\ '',\ 0,\ 0);\ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05162}05162\ \ \ \ \ \textcolor{stringliteral}{"{}\})();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05163}05163\ \ \ \ \ \textcolor{stringliteral}{"{}</script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05164}05164\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05165}05165\ \ \ \ \ \textcolor{comment}{//\ CSS\ styles\ -\/\ part\ 1}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05166}05166\ \ \ \ \ \textcolor{stringliteral}{"{}<style>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05167}05167\ \ \ \ \ \textcolor{stringliteral}{"{}*\ \{\ margin:\ 0;\ padding:\ 0;\ box-\/sizing:\ border-\/box;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05168}05168\ \ \ \ \ \textcolor{stringliteral}{"{}body\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05169}05169\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/family:\ -\/apple-\/system,\ BlinkMacSystemFont,\ 'Segoe\ UI',\ Roboto,\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05170}05170\ \ \ \ \ \textcolor{stringliteral}{"{}sans-\/serif;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05171}05171\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#1a1a1a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05172}05172\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05173}05173\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 100vh;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05174}05174\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ clamp(6px,\ 2vw,\ 12px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05175}05175\ \ \ \ \ \textcolor{stringliteral}{"{}overflow-\/x:\ hidden;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05176}05176\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05177}05177\ \ \ \ \ \textcolor{stringliteral}{"{}.container\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05178}05178\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 95\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05179}05179\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 1600px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05180}05180\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0\ auto;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05181}05181\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05182}05182\ \ \ \ \ \textcolor{stringliteral}{"{}.app-\/header\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05183}05183\ \ \ \ \ \textcolor{stringliteral}{"{}position:\ sticky;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05184}05184\ \ \ \ \ \textcolor{stringliteral}{"{}top:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05185}05185\ \ \ \ \ \textcolor{stringliteral}{"{}z-\/index:\ 100;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05186}05186\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05187}05187\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05188}05188\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05189}05189\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/wrap:\ wrap;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05190}05190\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05191}05191\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05192}05192\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 0\ 10px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05193}05193\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#1a1a1a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05194}05194\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/bottom:\ 1px\ solid\ \#2a2a2a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05195}05195\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05196}05196\ \ \ \ \ \textcolor{stringliteral}{"{}h1,\ .app-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05197}05197\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#5cb85c;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05198}05198\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05199}05199\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ clamp(1.05em,\ 2.8vw,\ 1.35em);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05200}05200\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05201}05201\ \ \ \ \ \textcolor{stringliteral}{"{}letter-\/spacing:\ 0.02em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05202}05202\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05203}05203\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/nav\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05204}05204\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05205}05205\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05206}05206\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ flex-\/start;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05207}05207\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05208}05208\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/btn\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05209}05209\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05210}05210\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 44px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05211}05211\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 44px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05212}05212\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#252525;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05213}05213\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#999;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05214}05214\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#383838;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05215}05215\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05216}05216\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05217}05217\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05218}05218\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ clamp(13px,\ 1.8vw,\ 14px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05219}05219\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05220}05220\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05221}05221\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/btn:hover\ \{\ color:\ \#e0e0e0;\ background:\ \#2e2e2e;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05222}05222\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/btn.active\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05223}05223\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#3d5a3d;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05224}05224\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e8f5e9;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05225}05225\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ \#4a6b4a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05226}05226\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05227}05227\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/content\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05228}05228\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05229}05229\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05230}05230\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/content.active\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05231}05231\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ block;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05232}05232\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05233}05233\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/primary\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05234}05234\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05235}05235\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05236}05236\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#4CAF50,\ \#45a049);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05237}05237\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05238}05238\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05239}05239\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05240}05240\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05241}05241\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 700;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05242}05242\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 15px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05243}05243\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05244}05244\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 4px\ 12px\ rgba(76,175,80,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05245}05245\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05246}05246\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/primary:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05247}05247\ \ \ \ \ \textcolor{stringliteral}{"{}transform:\ translateY(-\/2px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05248}05248\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 6px\ 16px\ rgba(76,175,80,0.4);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05249}05249\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05250}05250\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/actions\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05251}05251\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ grid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05252}05252\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr\ 1fr\ 1fr;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05253}05253\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05254}05254\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05255}05255\ \ \ \ \ \textcolor{stringliteral}{"{}padding-\/top:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05256}05256\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/top:\ 1px\ solid\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05257}05257\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05258}05258\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/action\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05259}05259\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05260}05260\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05261}05261\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05262}05262\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 36px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05263}05263\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05264}05264\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05265}05265\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05266}05266\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05267}05267\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ transparent;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05268}05268\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05269}05269\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/new\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05270}05270\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05271}05271\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05272}05272\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(76,175,80,0.12);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05273}05273\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05274}05274\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/new:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05275}05275\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(76,175,80,0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05276}05276\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05277}05277\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/sandbox\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05278}05278\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#9C27B0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05279}05279\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ \#9C27B0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05280}05280\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(156,39,176,0.12);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05281}05281\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05282}05282\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/sandbox:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05283}05283\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(156,39,176,0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05284}05284\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05285}05285\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/hint\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05286}05286\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#FF9800;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05287}05287\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ \#FF9800;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05288}05288\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,152,0,0.12);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05289}05289\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05290}05290\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/hint:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05291}05291\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,152,0,0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05292}05292\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05293}05293\ \ \ \ \ \textcolor{stringliteral}{"{}.hint-\/explanation\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05294}05294\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05295}05295\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05296}05296\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,152,0,0.08);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05297}05297\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ rgba(255,152,0,0.35);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05298}05298\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05299}05299\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05300}05300\ \ \ \ \ \textcolor{stringliteral}{"{}line-\/height:\ 1.4;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05301}05301\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05302}05302\ \ \ \ \ \textcolor{stringliteral}{"{}.hint-\/explanation-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05303}05303\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05304}05304\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#FF9800;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05305}05305\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05306}05306\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05307}05307\ \ \ \ \ \textcolor{stringliteral}{"{}.hint-\/explanation-\/message\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05308}05308\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05309}05309\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05310}05310\ \ \ \ \ \textcolor{stringliteral}{"{}line-\/height:\ 1.5;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05311}05311\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05312}05312\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05313}05313\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05314}05314\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05315}05315\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05316}05316\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05317}05317\ \ \ \ \ \textcolor{stringliteral}{"{}line-\/height:\ 1.4;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05318}05318\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05319}05319\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/best\ \{\ background:\ rgba(76,175,80,0.12);\ border:\ 1px\ solid\ rgba(76,175,80,0.45);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05320}05320\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/good\ \{\ background:\ rgba(139,195,74,0.12);\ border:\ 1px\ solid\ rgba(139,195,74,0.4);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05321}05321\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/inaccuracy\ \{\ background:\ rgba(255,193,7,0.12);\ border:\ 1px\ solid\ rgba(255,193,7,0.45);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05322}05322\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/mistake\ \{\ background:\ rgba(255,152,0,0.15);\ border:\ 1px\ solid\ rgba(255,152,0,0.5);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05323}05323\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/blunder\ \{\ background:\ rgba(244,67,54,0.15);\ border:\ 1px\ solid\ rgba(244,67,54,0.5);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05324}05324\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/error\ \{\ background:\ rgba(97,97,97,0.2);\ border:\ 1px\ solid\ rgba(158,158,158,0.4);\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05325}05325\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05326}05326\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05327}05327\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05328}05328\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05329}05329\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/best\ .move-\/evaluation-\/title\ \{\ color:\ \#4CAF50;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05330}05330\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/good\ .move-\/evaluation-\/title\ \{\ color:\ \#8BC34A;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05331}05331\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/inaccuracy\ .move-\/evaluation-\/title\ \{\ color:\ \#FFC107;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05332}05332\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/mistake\ .move-\/evaluation-\/title\ \{\ color:\ \#FF9800;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05333}05333\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/blunder\ .move-\/evaluation-\/title\ \{\ color:\ \#f44336;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05334}05334\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/-\/error\ .move-\/evaluation-\/title\ \{\ color:\ \#9e9e9e;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05335}05335\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/evaluation-\/message\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05336}05336\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05337}05337\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05338}05338\ \ \ \ \ \textcolor{stringliteral}{"{}line-\/height:\ 1.5;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05339}05339\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05340}05340\ \ \ \ \ \textcolor{stringliteral}{"{}.castling-\/pending-\/message\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05341}05341\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 10px;\ padding:\ 8px\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05342}05342\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,193,7,0.12);\ border:\ 1px\ solid\ rgba(255,193,7,0.4);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05343}05343\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ font-\/size:\ 12px;\ color:\ \#ffc107;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05344}05344\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05345}05345\ \ \ \ \ \textcolor{stringliteral}{"{}.main-\/content\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05346}05346\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ grid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05347}05347\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ minmax(220px,\ 260px)\ 1fr\ minmax(220px,\ 260px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05348}05348\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/areas:\ 'left\ center\ right';\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05349}05349\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ clamp(10px,\ 2vw,\ 16px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05350}05350\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ start;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05351}05351\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05352}05352\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (min-\/width:\ 1280px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05353}05353\ \ \ \ \ \textcolor{stringliteral}{"{}.container\ \{\ max-\/width:\ 1400px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05354}05354\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05355}05355\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 1023px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05356}05356\ \ \ \ \ \textcolor{stringliteral}{"{}.main-\/content\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05357}05357\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr\ 260px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05358}05358\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/areas:\ 'center\ right'\ 'left\ right';\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05359}05359\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05360}05360\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05361}05361\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 767px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05362}05362\ \ \ \ \ \textcolor{stringliteral}{"{}.main-\/content\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05363}05363\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05364}05364\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/areas:\ 'center'\ 'left'\ 'right';\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05365}05365\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05366}05366\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05367}05367\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 599px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05368}05368\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/actions\ \{\ grid-\/template-\/columns:\ 1fr;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05369}05369\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05370}05370\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 319px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05371}05371\ \ \ \ \ \textcolor{stringliteral}{"{}.tab-\/btn\ \{\ padding:\ 8px\ 12px;\ font-\/size:\ 12px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05372}05372\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/game-\/action\ \{\ padding:\ 6px\ 8px;\ font-\/size:\ 11px;\ min-\/height:\ 32px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05373}05373\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05374}05374\ \ \ \ \ \textcolor{stringliteral}{"{}.board-\/container\ \{\ grid-\/area:\ center;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05375}05375\ \ \ \ \ \textcolor{stringliteral}{"{}.info-\/panel\ \{\ grid-\/area:\ right;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05376}05376\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/info-\/panel\ \{\ grid-\/area:\ left;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05377}05377\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/right-\/panel\ \{\ grid-\/area:\ right;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05378}05378\ \ \ \ \ \textcolor{stringliteral}{"{}.board-\/container\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05379}05379\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#222;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05380}05380\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05381}05381\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ clamp(10px,\ 2vw,\ 16px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05382}05382\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 2px\ 8px\ rgba(0,0,0,0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05383}05383\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05384}05384\ \ \ \ \ \textcolor{stringliteral}{"{}.board\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05385}05385\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ grid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05386}05386\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ repeat(8,\ 1fr);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05387}05387\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/rows:\ repeat(8,\ 1fr);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05388}05388\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05389}05389\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05390}05390\ \ \ \ \ \textcolor{stringliteral}{"{}aspect-\/ratio:\ 1;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05391}05391\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 2px\ solid\ \#3a3a3a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05392}05392\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05393}05393\ \ \ \ \ \textcolor{stringliteral}{"{}overflow:\ hidden;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05394}05394\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05395}05395\ \ \ \ \ \textcolor{stringliteral}{"{}.square\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05396}05396\ \ \ \ \ \textcolor{stringliteral}{"{}aspect-\/ratio:\ 1;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05397}05397\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05398}05398\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05399}05399\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05400}05400\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 3vw;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05401}05401\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05402}05402\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ background\ 0.15s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05403}05403\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05404}05404\ \ \ \ \ \textcolor{stringliteral}{"{}.square:hover\ \{\ background:\ \#4a4a4a\ !important;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05405}05405\ \ \ \ \ \textcolor{stringliteral}{"{}.square.light\ \{\ background:\ \#f0d9b5;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05406}05406\ \ \ \ \ \textcolor{stringliteral}{"{}.square.dark\ \{\ background:\ \#b58863;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05407}05407\ \ \ \ \ \textcolor{stringliteral}{"{}.square.selected\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05408}05408\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 0\ 3px\ \#ffeb3b\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05409}05409\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05410}05410\ \ \ \ \ \textcolor{stringliteral}{"{}.square.lifted\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05411}05411\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#4CAF50\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05412}05412\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 20px\ rgba(76,175,80,0.5);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05413}05413\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05414}05414\ \ \ \ \ \textcolor{stringliteral}{"{}.square.error-\/invalid\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05415}05415\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#f44336\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05416}05416\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 20px\ rgba(244,67,54,0.6);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05417}05417\ \ \ \ \ \textcolor{stringliteral}{"{}animation:\ errorBlink\ 0.3s\ ease-\/in-\/out\ 6\ forwards;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05418}05418\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05419}05419\ \ \ \ \ \textcolor{stringliteral}{"{}.square.error-\/original\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05420}05420\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#2196F3\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05421}05421\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 20px\ rgba(33,150,243,0.6);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05422}05422\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05423}05423\ \ \ \ \ \textcolor{stringliteral}{"{}@keyframes\ errorBlink\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05424}05424\ \ \ \ \ \textcolor{stringliteral}{"{}0\%,\ 100\%\ \{\ background:\ \#f44336\ !important;\ box-\/shadow:\ inset\ 0\ 0\ 20px\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05425}05425\ \ \ \ \ \textcolor{stringliteral}{"{}rgba(244,67,54,0.6);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05426}05426\ \ \ \ \ \textcolor{stringliteral}{"{}50\%\ \{\ background:\ \#8b0000\ !important;\ box-\/shadow:\ inset\ 0\ 0\ 8px\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05427}05427\ \ \ \ \ \textcolor{stringliteral}{"{}rgba(244,67,54,0.3);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05428}05428\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05429}05429\ \ \ \ \ \textcolor{stringliteral}{"{}@keyframes\ errorPulse\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05430}05430\ \ \ \ \ \textcolor{stringliteral}{"{}0\%\ \{\ transform:\ translate(1px,\ 1px)\ rotate(0deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05431}05431\ \ \ \ \ \textcolor{stringliteral}{"{}10\%\ \{\ transform:\ translate(-\/1px,\ -\/2px)\ rotate(-\/1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05432}05432\ \ \ \ \ \textcolor{stringliteral}{"{}20\%\ \{\ transform:\ translate(-\/3px,\ 0px)\ rotate(1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05433}05433\ \ \ \ \ \textcolor{stringliteral}{"{}30\%\ \{\ transform:\ translate(3px,\ 2px)\ rotate(0deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05434}05434\ \ \ \ \ \textcolor{stringliteral}{"{}40\%\ \{\ transform:\ translate(1px,\ -\/1px)\ rotate(1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05435}05435\ \ \ \ \ \textcolor{stringliteral}{"{}50\%\ \{\ transform:\ translate(-\/1px,\ 2px)\ rotate(-\/1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05436}05436\ \ \ \ \ \textcolor{stringliteral}{"{}60\%\ \{\ transform:\ translate(-\/3px,\ 1px)\ rotate(0deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05437}05437\ \ \ \ \ \textcolor{stringliteral}{"{}70\%\ \{\ transform:\ translate(3px,\ 1px)\ rotate(-\/1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05438}05438\ \ \ \ \ \textcolor{stringliteral}{"{}80\%\ \{\ transform:\ translate(-\/1px,\ -\/1px)\ rotate(1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05439}05439\ \ \ \ \ \textcolor{stringliteral}{"{}90\%\ \{\ transform:\ translate(1px,\ 2px)\ rotate(0deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05440}05440\ \ \ \ \ \textcolor{stringliteral}{"{}100\%\ \{\ transform:\ translate(1px,\ -\/2px)\ rotate(-\/1deg);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05441}05441\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05442}05442\ \ \ \ \ \textcolor{stringliteral}{"{}.piece\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05443}05443\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 4vw;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05444}05444\ \ \ \ \ \textcolor{stringliteral}{"{}text-\/shadow:\ 2px\ 2px\ 4px\ rgba(0,0,0,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05445}05445\ \ \ \ \ \textcolor{stringliteral}{"{}user-\/select:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05446}05446\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05447}05447\ \ \ \ \ \textcolor{stringliteral}{"{}.piece.white\ \{\ color:\ white;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05448}05448\ \ \ \ \ \textcolor{stringliteral}{"{}.piece.black\ \{\ color:\ black;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05449}05449\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05450}05450\ \ \ \ \ \textcolor{comment}{//\ CSS\ styles\ -\/\ part\ 2}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05451}05451\ \ \ \ \ \textcolor{stringliteral}{"{}.info-\/panel,\ .game-\/info-\/panel,\ .game-\/right-\/panel\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05452}05452\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#222;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05453}05453\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05454}05454\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ clamp(10px,\ 1.5vw,\ 14px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05455}05455\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 2px\ 8px\ rgba(0,0,0,0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05456}05456\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05457}05457\ \ \ \ \ \textcolor{stringliteral}{"{}overflow:\ hidden;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05458}05458\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05459}05459\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05460}05460\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 0\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05461}05461\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05462}05462\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/grid\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05463}05463\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ grid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05464}05464\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05465}05465\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05466}05466\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 640px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05467}05467\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0\ auto;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05468}05468\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ start;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05469}05469\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05470}05470\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (min-\/width:\ 600px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05471}05471\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/grid\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05472}05472\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr\ 1fr;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05473}05473\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 720px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05474}05474\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 14px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05475}05475\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05476}05476\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05477}05477\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (min-\/width:\ 900px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05478}05478\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/grid\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05479}05479\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 800px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05480}05480\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05481}05481\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05482}05482\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05483}05483\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (min-\/width:\ 1100px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05484}05484\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/grid\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05485}05485\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ 1fr\ 1fr\ 1fr;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05486}05486\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 960px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05487}05487\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05488}05488\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05489}05489\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05490}05490\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 599px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05491}05491\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ \{\ padding:\ 8px\ 0\ 16px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05492}05492\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/section\ \{\ padding:\ 10px\ 12px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05493}05493\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/grid\ \{\ gap:\ 10px;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05494}05494\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05495}05495\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/section\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05496}05496\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05497}05497\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05498}05498\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/direction:\ column;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05499}05499\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05500}05500\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#252525;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05501}05501\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05502}05502\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 14px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05503}05503\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05504}05504\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05505}05505\ \ \ \ \ \textcolor{stringliteral}{"{}.settings-\/section\ .section-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05506}05506\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 0.72em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05507}05507\ \ \ \ \ \textcolor{stringliteral}{"{}letter-\/spacing:\ 0.06em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05508}05508\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#777;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05509}05509\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0\ 0\ 8px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05510}05510\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05511}05511\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05512}05512\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .settings-\/section\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05513}05513\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05514}05514\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 14px\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05515}05515\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05516}05516\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05517}05517\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 0.72em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05518}05518\ \ \ \ \ \textcolor{stringliteral}{"{}letter-\/spacing:\ 0.04em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05519}05519\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#777;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05520}05520\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0\ 0\ 10px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05521}05521\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05522}05522\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05523}05523\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/row\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05524}05524\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05525}05525\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05526}05526\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05527}05527\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05528}05528\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05529}05529\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05530}05530\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05531}05531\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/row:last-\/child\ \{\ margin-\/bottom:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05532}05532\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/label\ \{\ color:\ \#999;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05533}05533\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/value\ \{\ color:\ \#e0e0e0;\ font-\/weight:\ 500;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05534}05534\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/input,\ \#tab-\/nastaveni\ .set-\/select\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05535}05535\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05536}05536\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05537}05537\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05538}05538\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#1a1a1a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05539}05539\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#3a3a3a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05540}05540\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05541}05541\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05542}05542\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05543}05543\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05544}05544\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/input:focus,\ \#tab-\/nastaveni\ .set-\/select:focus\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05545}05545\ \ \ \ \ \textcolor{stringliteral}{"{}outline:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05546}05546\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ \#555;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05547}05547\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05548}05548\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/group\ \{\ margin-\/bottom:\ 12px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05549}05549\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/group:last-\/child\ \{\ margin-\/bottom:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05550}05550\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/group\ label\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05551}05551\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ block;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05552}05552\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 11px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05553}05553\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#777;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05554}05554\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05555}05555\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05556}05556\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05557}05557\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05558}05558\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 14px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05559}05559\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05560}05560\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#3d5a3d;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05561}05561\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e8f5e9;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05562}05562\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05563}05563\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05564}05564\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05565}05565\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05566}05566\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05567}05567\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 44px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05568}05568\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05569}05569\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn:hover\ \{\ background:\ \#4a6b4a;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05570}05570\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn-\/sm\ \{\ padding:\ 8px\ 12px;\ min-\/height:\ 40px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05571}05571\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 4px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05572}05572\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn-\/danger\ \{\ background:\ \#5a2a2a;\ color:\ \#ffcdd2;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05573}05573\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn-\/danger:hover\ \{\ background:\ \#6b3333;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05574}05574\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn-\/row\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05575}05575\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05576}05576\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05577}05577\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05578}05578\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05579}05579\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/btn-\/row\ .set-\/btn\ \{\ flex:\ 1;\ margin-\/top:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05580}05580\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/check\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05581}05581\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05582}05582\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05583}05583\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05584}05584\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05585}05585\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05586}05586\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05587}05587\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#ccc;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05588}05588\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05589}05589\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/check\ input\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05590}05590\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 18px;\ height:\ 18px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05591}05591\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 18px;\ cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05592}05592\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05593}05593\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/note\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05594}05594\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 11px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05595}05595\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#666;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05596}05596\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05597}05597\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05598}05598\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .set-\/note-\/warn\ \{\ color:\ \#b8860b;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05599}05599\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ input[type='range']\ \{\ accent-\/color:\ \#4a6b4a;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05600}05600\ \ \ \ \ \textcolor{stringliteral}{"{}\#tab-\/nastaveni\ .status-\/item\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05601}05601\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 4px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05602}05602\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05603}05603\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05604}05604\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05605}05605\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/info-\/panel,\ .game-\/right-\/panel\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05606}05606\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05607}05607\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/direction:\ column;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05608}05608\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05609}05609\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05610}05610\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05611}05611\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#252525;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05612}05612\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05613}05613\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05614}05614\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05615}05615\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05616}05616\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/title\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05617}05617\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 0.7em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05618}05618\ \ \ \ \ \textcolor{stringliteral}{"{}letter-\/spacing:\ 0.04em;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05619}05619\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#777;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05620}05620\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 0\ 0\ 8px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05621}05621\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05622}05622\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05623}05623\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/row\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05624}05624\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05625}05625\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05626}05626\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05627}05627\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05628}05628\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05629}05629\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05630}05630\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/row:last-\/child\ \{\ margin-\/bottom:\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05631}05631\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/label\ \{\ color:\ \#999;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05632}05632\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/value\ \{\ color:\ \#e0e0e0;\ font-\/weight:\ 500;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05633}05633\ \ \ \ \ \textcolor{stringliteral}{"{}.status-\/box,\ .card\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05634}05634\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#2a2a2a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05635}05635\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/left:\ 2px\ solid\ \#3d5a3d;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05636}05636\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05637}05637\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05638}05638\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05639}05639\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05640}05640\ \ \ \ \ \textcolor{stringliteral}{"{}.status-\/box:last-\/child,\ .card:last-\/child\ \{\ margin-\/bottom:\ 0;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05641}05641\ \ \ \ \ \textcolor{stringliteral}{"{}.status-\/box\ h3,\ .card\ h3\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05642}05642\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#8a8a8a;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05643}05643\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05644}05644\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 500;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05645}05645\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ clamp(0.72em,\ 1.8vw,\ 0.82em);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05646}05646\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05647}05647\ \ \ \ \ \textcolor{stringliteral}{"{}.status-\/item\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05648}05648\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05649}05649\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05650}05650\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ baseline;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05651}05651\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 3px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05652}05652\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ clamp(12px,\ 1.5vw,\ 13px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05653}05653\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05654}05654\ \ \ \ \ \textcolor{stringliteral}{"{}.status-\/value\ \{\ font-\/weight:\ 600;\ color:\ \#e0e0e0;\ font-\/family:\ 'Courier\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05655}05655\ \ \ \ \ \textcolor{stringliteral}{"{}New',\ monospace;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05656}05656\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .timer-\/display\ \{\ margin:\ 0\ -\/2px\ 8px\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05657}05657\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .timer-\/controls\ \{\ margin:\ 8px\ 0;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05658}05658\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .timer-\/controls\ button\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05659}05659\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 6px\ 12px;\ font-\/size:\ 12px;\ border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05660}05660\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05661}05661\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .timer-\/stats\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05662}05662\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ transparent;\ padding:\ 0;\ margin-\/top:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05663}05663\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05664}05664\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .stat-\/item\ \{\ margin-\/bottom:\ 4px;\ font-\/size:\ 12px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05665}05665\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/box\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05666}05666\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/height:\ 180px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05667}05667\ \ \ \ \ \textcolor{stringliteral}{"{}overflow-\/y:\ auto;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05668}05668\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#1e1e1e;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05669}05669\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05670}05670\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05671}05671\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05672}05672\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05673}05673\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/item\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05674}05674\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 5px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05675}05675\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/bottom:\ 1px\ solid\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05676}05676\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05677}05677\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#aaa;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05678}05678\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/family:\ 'Courier\ New',\ monospace;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05679}05679\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05680}05680\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/item:last-\/child\ \{\ border-\/bottom:\ none;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05681}05681\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05682}05682\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 10px;\ margin-\/left:\ 6px;\ padding:\ 1px\ 5px;\ border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05683}05683\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ display:\ inline-\/block;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05684}05684\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/best\ \{\ background:\ rgba(76,175,80,0.35);\ color:\ \#81C784;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05685}05685\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/good\ \{\ background:\ rgba(139,195,74,0.3);\ color:\ \#9CCC65;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05686}05686\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/inaccuracy\ \{\ background:\ rgba(255,193,7,0.35);\ color:\ \#FFD54F;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05687}05687\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/mistake\ \{\ background:\ rgba(255,152,0,0.35);\ color:\ \#FFB74D;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05688}05688\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/blunder\ \{\ background:\ rgba(244,67,54,0.35);\ color:\ \#E57373;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05689}05689\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/eval-\/badge-\/-\/error\ \{\ background:\ rgba(97,97,97,0.4);\ color:\ \#BDBDBD;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05690}05690\ \ \ \ \ \textcolor{stringliteral}{"{}.captured-\/pieces\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05691}05691\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05692}05692\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/wrap:\ wrap;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05693}05693\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05694}05694\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05695}05695\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05696}05696\ \ \ \ \ \textcolor{stringliteral}{"{}.captured-\/piece\ \{\ font-\/size:\ 1.1em;\ color:\ \#888;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05697}05697\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/block\ .game-\/value\ \{\ font-\/family:\ 'Courier\ New',\ monospace;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05698}05698\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/right-\/panel\ .history-\/box\ \{\ max-\/height:\ 260px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05699}05699\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/info-\/panel\ .player-\/time\ \{\ padding:\ 10px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05700}05700\ \ \ \ \ \textcolor{stringliteral}{"{}.game-\/info-\/panel\ .time-\/value\ \{\ font-\/size:\ 20px;\ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05701}05701\ \ \ \ \ \textcolor{stringliteral}{"{}.loading\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05702}05702\ \ \ \ \ \textcolor{stringliteral}{"{}text-\/align:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05703}05703\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05704}05704\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#888;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05705}05705\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05706}05706\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05707}05707\ \ \ \ \ \textcolor{comment}{//\ CSS\ styles\ -\/\ part\ 3\ (Review\ Mode,\ Sandbox\ Mode,\ etc.)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05708}05708\ \ \ \ \ \textcolor{stringliteral}{"{}/*\ Review\ Mode\ */"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05709}05709\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/banner\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05710}05710\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05711}05711\ \ \ \ \ \textcolor{stringliteral}{"{}position:\ fixed;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05712}05712\ \ \ \ \ \textcolor{stringliteral}{"{}top:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05713}05713\ \ \ \ \ \textcolor{stringliteral}{"{}right:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05714}05714\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#FF8C00\ 0\%,\ \#FF6B00\ 100\%);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05715}05715\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05716}05716\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05717}05717\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 8px\ 24px\ rgba(255,\ 140,\ 0,\ 0.5),\ 0\ 4px\ 12px\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05718}05718\ \ \ \ \ \textcolor{stringliteral}{"{}rgba(0,0,0,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05719}05719\ \ \ \ \ \textcolor{stringliteral}{"{}z-\/index:\ 1001;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05720}05720\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ 90vw;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05721}05721\ \ \ \ \ \textcolor{stringliteral}{"{}animation:\ slideInRight\ 0.3s\ ease-\/out;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05722}05722\ \ \ \ \ \textcolor{stringliteral}{"{}overflow:\ hidden;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05723}05723\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05724}05724\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05725}05725\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/header\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05726}05726\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05727}05727\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05728}05728\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05729}05729\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05730}05730\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05731}05731\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(0,0,0,0.2);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05732}05732\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05733}05733\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 15px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05734}05734\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05735}05735\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/controls\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05736}05736\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ grid;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05737}05737\ \ \ \ \ \textcolor{stringliteral}{"{}grid-\/template-\/columns:\ repeat(4,\ 1fr);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05738}05738\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05739}05739\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05740}05740\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05741}05741\ \ \ \ \ \textcolor{stringliteral}{"{}.nav-\/btn\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05742}05742\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05743}05743\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05744}05744\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,\ 255,\ 255,\ 0.15);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05745}05745\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 2px\ solid\ rgba(255,\ 255,\ 255,\ 0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05746}05746\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05747}05747\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05748}05748\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05749}05749\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s\ cubic-\/bezier(0.4,\ 0,\ 0.2,\ 1);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05750}05750\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 44px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05751}05751\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05752}05752\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05753}05753\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05754}05754\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05755}05755\ \ \ \ \ \textcolor{stringliteral}{"{}text-\/shadow:\ 0\ 1px\ 2px\ rgba(0,0,0,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05756}05756\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05757}05757\ \ \ \ \ \textcolor{stringliteral}{"{}.nav-\/btn:hover,\ .nav-\/btn:focus\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05758}05758\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,\ 255,\ 255,\ 0.25);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05759}05759\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/color:\ rgba(255,\ 255,\ 255,\ 0.5);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05760}05760\ \ \ \ \ \textcolor{stringliteral}{"{}transform:\ translateY(-\/2px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05761}05761\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 4px\ 12px\ rgba(0,0,0,0.2);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05762}05762\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05763}05763\ \ \ \ \ \textcolor{stringliteral}{"{}.nav-\/btn:active\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05764}05764\ \ \ \ \ \textcolor{stringliteral}{"{}transform:\ translateY(0);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05765}05765\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 2px\ 6px\ rgba(0,0,0,0.15);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05766}05766\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05767}05767\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/header-\/close\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05768}05768\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ transparent;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05769}05769\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05770}05770\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ rgba(255,255,255,0.8);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05771}05771\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05772}05772\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05773}05773\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05774}05774\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 50\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05775}05775\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05776}05776\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05777}05777\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05778}05778\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05779}05779\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05780}05780\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/header-\/close:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05781}05781\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,255,255,0.2);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05782}05782\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05783}05783\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05784}05784\ \ \ \ \ \textcolor{stringliteral}{"{}@media\ (max-\/width:\ 600px)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05785}05785\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/banner\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05786}05786\ \ \ \ \ \textcolor{stringliteral}{"{}top:\ auto;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05787}05787\ \ \ \ \ \textcolor{stringliteral}{"{}bottom:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05788}05788\ \ \ \ \ \textcolor{stringliteral}{"{}left:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05789}05789\ \ \ \ \ \textcolor{stringliteral}{"{}right:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05790}05790\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 16px\ 16px\ 0\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05791}05791\ \ \ \ \ \textcolor{stringliteral}{"{}max-\/width:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05792}05792\ \ \ \ \ \textcolor{stringliteral}{"{}padding-\/bottom:\ env(safe-\/area-\/inset-\/bottom,\ 10px);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05793}05793\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05794}05794\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/controls\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05795}05795\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05796}05796\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05797}05797\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05798}05798\ \ \ \ \ \textcolor{stringliteral}{"{}.nav-\/btn\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05799}05799\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05800}05800\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/height:\ 52px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05801}05801\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05802}05802\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05803}05803\ \ \ \ \ \textcolor{stringliteral}{"{}.review-\/banner.active\ \{\ display:\ block;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05804}05804\ \ \ \ \ \textcolor{stringliteral}{"{}@keyframes\ slideInRight\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05805}05805\ \ \ \ \ \textcolor{stringliteral}{"{}from\ \{\ transform:\ translateX(100\%);\ opacity:\ 0;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05806}05806\ \ \ \ \ \textcolor{stringliteral}{"{}to\ \{\ transform:\ translateX(0);\ opacity:\ 1;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05807}05807\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05808}05808\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/review-\/nav\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05809}05809\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,255,255,0.2);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05810}05810\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ rgba(255,255,255,0.4);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05811}05811\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05812}05812\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05813}05813\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 32px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05814}05814\ \ \ \ \ \textcolor{stringliteral}{"{}height:\ 32px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05815}05815\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05816}05816\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05817}05817\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05818}05818\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05819}05819\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05820}05820\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05821}05821\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/review-\/nav:hover:not(:disabled)\ \{\ background:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05822}05822\ \ \ \ \ \textcolor{stringliteral}{"{}rgba(255,255,255,0.4);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05823}05823\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05824}05824\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/review-\/nav:disabled\ \{\ opacity:\ 0.3;\ cursor:\ not-\/allowed;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05825}05825\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/item.selected\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05826}05826\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#FF9800\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05827}05827\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05828}05828\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05829}05829\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05830}05830\ \ \ \ \ \textcolor{stringliteral}{"{}.square.move-\/from\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05831}05831\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 0\ 3px\ \#4A90C8\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05832}05832\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(74,144,200,0.3)\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05833}05833\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05834}05834\ \ \ \ \ \textcolor{stringliteral}{"{}.square.move-\/to\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05835}05835\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 0\ 3px\ \#4CAF50\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05836}05836\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(76,175,80,0.3)\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05837}05837\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05838}05838\ \ \ \ \ \textcolor{stringliteral}{"{}.square.hint-\/from\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05839}05839\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 0\ 3px\ \#00BCD4\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05840}05840\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(0,188,212,0.35)\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05841}05841\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05842}05842\ \ \ \ \ \textcolor{stringliteral}{"{}.square.hint-\/to\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05843}05843\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ inset\ 0\ 0\ 0\ 3px\ \#FF8C00\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05844}05844\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ rgba(255,140,0,0.35)\ !important;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05845}05845\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05846}05846\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05847}05847\ \ \ \ \ \textcolor{comment}{//\ CSS\ styles\ -\/\ part\ 4\ (Sandbox\ Mode)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05848}05848\ \ \ \ \ \textcolor{stringliteral}{"{}/*\ Sandbox\ Mode\ */"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05849}05849\ \ \ \ \ \textcolor{stringliteral}{"{}.sandbox-\/banner\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05850}05850\ \ \ \ \ \textcolor{stringliteral}{"{}position:\ fixed;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05851}05851\ \ \ \ \ \textcolor{stringliteral}{"{}bottom:\ 0;\ left:\ 0;\ right:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05852}05852\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#9C27B0,\ \#7B1FA2);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05853}05853\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05854}05854\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05855}05855\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05856}05856\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05857}05857\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05858}05858\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 16px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05859}05859\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ -\/4px\ 12px\ rgba(0,0,0,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05860}05860\ \ \ \ \ \textcolor{stringliteral}{"{}z-\/index:\ 100;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05861}05861\ \ \ \ \ \textcolor{stringliteral}{"{}animation:\ slideUp\ 0.3s\ ease;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05862}05862\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05863}05863\ \ \ \ \ \textcolor{stringliteral}{"{}@keyframes\ slideUp\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05864}05864\ \ \ \ \ \textcolor{stringliteral}{"{}from\ \{\ transform:\ translateY(100\%);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05865}05865\ \ \ \ \ \textcolor{stringliteral}{"{}to\ \{\ transform:\ translateY(0);\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05866}05866\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05867}05867\ \ \ \ \ \textcolor{stringliteral}{"{}.sandbox-\/banner.active\ \{\ display:\ flex;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05868}05868\ \ \ \ \ \textcolor{stringliteral}{"{}.sandbox-\/text\ \{\ font-\/weight:\ 600;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05869}05869\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/exit-\/sandbox\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05870}05870\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05871}05871\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05872}05872\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#9C27B0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05873}05873\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05874}05874\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05875}05875\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05876}05876\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05877}05877\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05878}05878\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05879}05879\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/exit-\/sandbox:hover\ \{\ transform:\ scale(1.05);\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05880}05880\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/try-\/moves\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05881}05881\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px\ 24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05882}05882\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#9C27B0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05883}05883\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05884}05884\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05885}05885\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05886}05886\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05887}05887\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05888}05888\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05889}05889\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05890}05890\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05891}05891\ \ \ \ \ \textcolor{stringliteral}{"{}.btn-\/try-\/moves:hover\ \{\ transform:\ scale(1.05);\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05892}05892\ \ \ \ \ \textcolor{stringliteral}{"{}/*\ Timer\ System\ Styles\ */"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05893}05893\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/control-\/selector\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05894}05894\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05895}05895\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05896}05896\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05897}05897\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05898}05898\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05899}05899\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/control-\/selector\ select\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05900}05900\ \ \ \ \ \textcolor{stringliteral}{"{}flex:\ 1\ 1\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05901}05901\ \ \ \ \ \textcolor{stringliteral}{"{}min-\/width:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05902}05902\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05903}05903\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05904}05904\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05905}05905\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#555;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05906}05906\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05907}05907\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05908}05908\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05909}05909\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/control-\/selector\ button\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05910}05910\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/shrink:\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05911}05911\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 8px\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05912}05912\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05913}05913\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ white;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05914}05914\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05915}05915\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05916}05916\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05917}05917\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05918}05918\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05919}05919\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05920}05920\ \ \ \ \ \textcolor{stringliteral}{"{}white-\/space:\ nowrap;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05921}05921\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05922}05922\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/control-\/selector\ button:hover:not(:disabled)\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05923}05923\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#45a049;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05924}05924\ \ \ \ \ \textcolor{stringliteral}{"{}transform:\ scale(1.05);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05925}05925\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05926}05926\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/control-\/selector\ button:disabled\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05927}05927\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#666;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05928}05928\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ not-\/allowed;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05929}05929\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05930}05930\ \ \ \ \ \textcolor{stringliteral}{"{}.custom-\/settings\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05931}05931\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05932}05932\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05933}05933\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05934}05934\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05935}05935\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05936}05936\ \ \ \ \ \textcolor{stringliteral}{"{}.custom-\/input-\/group\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05937}05937\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05938}05938\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05939}05939\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05940}05940\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05941}05941\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05942}05942\ \ \ \ \ \textcolor{stringliteral}{"{}.custom-\/input-\/group\ label\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05943}05943\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05944}05944\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 14px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05945}05945\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05946}05946\ \ \ \ \ \textcolor{stringliteral}{"{}.custom-\/input-\/group\ input\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05947}05947\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 80px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05948}05948\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05949}05949\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#444;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05950}05950\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05951}05951\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#555;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05952}05952\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05953}05953\ \ \ \ \ \textcolor{stringliteral}{"{}text-\/align:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05954}05954\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05955}05955\ \ \ \ \ \textcolor{stringliteral}{"{}.timer-\/display\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05956}05956\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05957}05957\ \ \ \ \ \textcolor{stringliteral}{"{}flex-\/direction:\ column;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05958}05958\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05959}05959\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 15px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05960}05960\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05961}05961\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05962}05962\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05963}05963\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05964}05964\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05965}05965\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.3s\ ease;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05966}05966\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05967}05967\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time.active\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05968}05968\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#4CAF50,\ \#45a049);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05969}05969\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 0\ 20px\ rgba(76,175,80,0.3);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05970}05970\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05971}05971\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time.low-\/time\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05972}05972\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#FF9800,\ \#F57C00);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05973}05973\ \ \ \ \ \textcolor{stringliteral}{"{}animation:\ pulse\ 1s\ infinite;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05974}05974\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05975}05975\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time.critical-\/time\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05976}05976\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ linear-\/gradient(135deg,\ \#F44336,\ \#D32F2F);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05977}05977\ \ \ \ \ \textcolor{stringliteral}{"{}animation:\ pulse\ 0.5s\ infinite;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05978}05978\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05979}05979\ \ \ \ \ \textcolor{stringliteral}{"{}@keyframes\ pulse\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05980}05980\ \ \ \ \ \textcolor{stringliteral}{"{}0\%,\ 100\%\ \{\ opacity:\ 1;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05981}05981\ \ \ \ \ \textcolor{stringliteral}{"{}50\%\ \{\ opacity:\ 0.7;\ \}\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05982}05982\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05983}05983\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/info\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05984}05984\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05985}05985\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05986}05986\ \ \ \ \ \textcolor{stringliteral}{"{}align-\/items:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05987}05987\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05988}05988\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05989}05989\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/name\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05990}05990\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05991}05991\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 14px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05992}05992\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05993}05993\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/indicator\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05994}05994\ \ \ \ \ \textcolor{stringliteral}{"{}width:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05995}05995\ \ \ \ \ \textcolor{stringliteral}{"{}height:\ 12px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05996}05996\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 50\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05997}05997\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#666;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05998}05998\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.3s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l05999}05999\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06000}06000\ \ \ \ \ \textcolor{stringliteral}{"{}.move-\/indicator.active\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06001}06001\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06002}06002\ \ \ \ \ \textcolor{stringliteral}{"{}box-\/shadow:\ 0\ 0\ 10px\ rgba(76,175,80,0.5);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06003}06003\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06004}06004\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/value\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06005}06005\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06006}06006\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ bold;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06007}06007\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/family:\ 'Courier\ New',\ monospace;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06008}06008\ \ \ \ \ \textcolor{stringliteral}{"{}text-\/align:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06009}06009\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 8px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06010}06010\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06011}06011\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/bar\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06012}06012\ \ \ \ \ \textcolor{stringliteral}{"{}height:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06013}06013\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#555;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06014}06014\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 3px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06015}06015\ \ \ \ \ \textcolor{stringliteral}{"{}overflow:\ hidden;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06016}06016\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06017}06017\ \ \ \ \ \textcolor{stringliteral}{"{}.time-\/progress\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06018}06018\ \ \ \ \ \textcolor{stringliteral}{"{}height:\ 100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06019}06019\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06020}06020\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ width\ 0.3s\ ease;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06021}06021\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 3px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06022}06022\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06023}06023\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time.low-\/time\ .time-\/progress\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06024}06024\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#FF9800;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06025}06025\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06026}06026\ \ \ \ \ \textcolor{stringliteral}{"{}.player-\/time.critical-\/time\ .time-\/progress\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06027}06027\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#F44336;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06028}06028\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06029}06029\ \ \ \ \ \textcolor{stringliteral}{"{}.timer-\/controls\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06030}06030\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06031}06031\ \ \ \ \ \textcolor{stringliteral}{"{}gap:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06032}06032\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06033}06033\ \ \ \ \ \textcolor{stringliteral}{"{}margin:\ 15px\ 0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06034}06034\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06035}06035\ \ \ \ \ \textcolor{stringliteral}{"{}.timer-\/controls\ button\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06036}06036\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px\ 20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06037}06037\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06038}06038\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06039}06039\ \ \ \ \ \textcolor{stringliteral}{"{}border:\ 1px\ solid\ \#555;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06040}06040\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 6px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06041}06041\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:\ pointer;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06042}06042\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06043}06043\ \ \ \ \ \textcolor{stringliteral}{"{}transition:\ all\ 0.2s;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06044}06044\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06045}06045\ \ \ \ \ \textcolor{stringliteral}{"{}.timer-\/controls\ button:hover\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06046}06046\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#444;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06047}06047\ \ \ \ \ \textcolor{stringliteral}{"{}transform:\ scale(1.05);\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06048}06048\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06049}06049\ \ \ \ \ \textcolor{stringliteral}{"{}.timer-\/stats\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06050}06050\ \ \ \ \ \textcolor{stringliteral}{"{}background:\ \#333;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06051}06051\ \ \ \ \ \textcolor{stringliteral}{"{}padding:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06052}06052\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06053}06053\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/top:\ 10px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06054}06054\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06055}06055\ \ \ \ \ \textcolor{stringliteral}{"{}.stat-\/item\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06056}06056\ \ \ \ \ \textcolor{stringliteral}{"{}display:\ flex;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06057}06057\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:\ space-\/between;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06058}06058\ \ \ \ \ \textcolor{stringliteral}{"{}margin-\/bottom:\ 5px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06059}06059\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/size:\ 13px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06060}06060\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06061}06061\ \ \ \ \ \textcolor{stringliteral}{"{}.stat-\/label\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06062}06062\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#aaa;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06063}06063\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06064}06064\ \ \ \ \ \textcolor{stringliteral}{"{}.stat-\/value\ \{\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06065}06065\ \ \ \ \ \textcolor{stringliteral}{"{}color:\ \#e0e0e0;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06066}06066\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/weight:\ 600;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06067}06067\ \ \ \ \ \textcolor{stringliteral}{"{}font-\/family:\ 'Courier\ New',\ monospace;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06068}06068\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06069}06069\ \ \ \ \ \textcolor{stringliteral}{"{}/*\ Scrollbar\ styling\ */"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06070}06070\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/box::-\/webkit-\/scrollbar\ \{\ width:\ 6px;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06071}06071\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/box::-\/webkit-\/scrollbar-\/track\ \{\ background:\ \#2a2a2a;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06072}06072\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/box::-\/webkit-\/scrollbar-\/thumb\ \{\ background:\ \#4CAF50;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06073}06073\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:\ 3px;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06074}06074\ \ \ \ \ \textcolor{stringliteral}{"{}.history-\/box::-\/webkit-\/scrollbar-\/thumb:hover\ \{\ background:\ \#45a049;\ \}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06075}06075\ \ \ \ \ \textcolor{stringliteral}{"{}</style>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06076}06076\ \ \ \ \ \textcolor{stringliteral}{"{}</head>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06077}06077\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06078}06078\ \textcolor{comment}{//\ Chunk\ 2:\ HTML\ body\ structure\ (no\ JavaScript\ yet)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06079}06079\ \textcolor{comment}{//\ Chunk\ 2a:\ Layout\ Start\ (Body,\ Container,\ Header\ with\ menu\ vlevo\ +\ title\ vpravo)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06080}06080\ \textcolor{comment}{//\ requestHint\ MUST\ be\ defined\ first\ so\ onclick\ on\ the\ button\ finds\ it\ (global\ scope)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06081}\mbox{\hyperlink{web__server__task_8c_ad8c6a6333babf87707dc21080b71f726}{06081}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ad8c6a6333babf87707dc21080b71f726}{html\_chunk\_layout\_start}}[]\ =\ \textcolor{stringliteral}{"{}<body>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06082}06082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<script>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06083}06083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}window.requestHint=function()\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06084}06084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ btn=document.getElementById('hint-\/btn');if(btn)\{btn.disabled=true;btn.textContent='NaÄÃ­tÃ¡mâ€¦';\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06085}06085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ board=typeof\ boardData!=='undefined'?boardData:[];"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06086}06086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ status=typeof\ statusData!=='undefined'?statusData:\{\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06087}06087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ history=typeof\ historyData!=='undefined'?historyData:\{\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06088}06088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if(!board||board.length!==8||(status.game\_state||'').toLowerCase()==='promotion'||(status.game\_end\&\&status.game\_end.ended))\{if(btn)\{btn.disabled=false;btn.textContent='NÃ¡povÄ›da';\}return;\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06089}06089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ rows=[];for(var\ r=7;r>=0;r-\/-\/)\{if(!board[r]||board[r].length!==8)\{if(btn)\{btn.disabled=false;btn.textContent='NÃ¡povÄ›da';\}return;\}var\ rank='',empty=0;for(var\ c=0;c<8;c++)\{var\ p=board[r][c];if(p==='\ '||p==='')empty++;else\{if(empty)\{rank+=empty;empty=0;\}rank+=p;\}\}if(empty)rank+=empty;rows.push(rank);\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06090}06090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ side=(status.current\_player==='White')?'w':'b';var\ moves=(history.moves||[]).length;var\ fen=rows.join('/')+'\ '+side+'\ KQkq\ -\/\ 0\ '+(Math.floor(moves/2)+1);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06091}06091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ depth=(function()\{try\{var\ d=parseInt(localStorage.getItem('chessHintDepth')||'10',10);return\ Math.min(18,Math.max(1,isNaN(d)?10:d));\}catch(e)\{return\ 10;\}\})();"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06092}06092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}fetch('https://chess-\/api.com/v1',\{method:'POST',headers:\{'Content-\/Type':'application/json'\},body:JSON.stringify(\{fen:fen,depth:depth\})\}).then(function(r)\{if(!r||!r.ok)return\ null;return\ r.json();\}).then(function(d)\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06093}06093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if(!d)\{if(btn)\{btn.disabled=false;btn.textContent='NedostupnÃ©';setTimeout(function()\{if(btn)btn.textContent='NÃ¡povÄ›da';\},2500);\}return;\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06094}06094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ from=(d.from\&\&d.from.length===2)?d.from.toLowerCase():null;var\ to=(d.to\&\&d.to.length===2)?d.to.toLowerCase():null;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06095}06095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if((!from||!to)\&\&d.move\&\&d.move.length>=4)\{from=d.move.substring(0,2).toLowerCase();to=d.move.substring(2,4).toLowerCase();\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06096}06096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if(from\&\&to)\{document.querySelectorAll('.square').forEach(function(sq)\{sq.classList.remove('hint-\/from','hint-\/to');\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06097}06097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ fc=from.charCodeAt(0)-\/97,fr=parseInt(from[1],10)-\/1,tc=to.charCodeAt(0)-\/97,tr=parseInt(to[1],10)-\/1;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06098}06098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}var\ fs=document.querySelector('[data-\/row=\(\backslash\)"{}'+fr+'\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'+fc+'\(\backslash\)"{}]');var\ ts=document.querySelector('[data-\/row=\(\backslash\)"{}'+tr+'\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'+tc+'\(\backslash\)"{}]');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06099}06099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if(fs)fs.classList.add('hint-\/from');if(ts)ts.classList.add('hint-\/to');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06100}06100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}fetch('/api/game/hint\_highlight',\{method:'POST',headers:\{'Content-\/Type':'application/json'\},body:JSON.stringify(\{from:from,to:to\})\}).catch(function()\{\});\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06101}06101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}if(btn)\{btn.disabled=false;btn.textContent='NÃ¡povÄ›da';\}\}).catch(function()\{if(btn)\{btn.disabled=false;btn.textContent='NedostupnÃ©';setTimeout(function()\{if(btn)btn.textContent='NÃ¡povÄ›da';\},2500);\}\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06102}06102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06103}06103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}</script>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06104}06104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='container'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06105}06105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<header\ class='app-\/header'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06106}06106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<nav\ class='tab-\/nav'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06107}06107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<button\ type='button'\ class='tab-\/btn\ active'\ onclick='switchTab(\(\backslash\)"{}tab-\/hra\(\backslash\)"{})'\ id='btn-\/tab-\/hra'>Hra</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06108}06108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<button\ type='button'\ class='tab-\/btn'\ onclick='switchTab(\(\backslash\)"{}tab-\/nastaveni\(\backslash\)"{})'\ id='btn-\/tab-\/nastaveni'>NastavenÃ­</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06109}06109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}</nav>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06110}06110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}<h1\ class='app-\/title'>CZECHMATE</h1>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06111}06111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}</header>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06112}06112\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06113}06113\ \textcolor{comment}{//\ Tab\ Hra:\ wrapper\ +\ main-\/content\ (tlaÄÃ­tka\ jsou\ v\ levÃ©m\ panelu)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06114}\mbox{\hyperlink{web__server__task_8c_a84a7f8dd86a306e95f345b80a4940b1e}{06114}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a84a7f8dd86a306e95f345b80a4940b1e}{html\_chunk\_tab\_hra\_start}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06115}06115\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='tab-\/hra'\ class='tab-\/content\ active'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06116}06116\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='main-\/content'>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06117}06117\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06118}06118\ \textcolor{comment}{//\ Chunk\ 2b:\ Game\ Left\ Panel\ (timer,\ stav,\ ÄasovÃ¡\ kontrola,\ akce)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06119}\mbox{\hyperlink{web__server__task_8c_ace9a7067ecc97f7c7756a562c9b5c1c0}{06119}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ace9a7067ecc97f7c7756a562c9b5c1c0}{html\_chunk\_game\_left}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06120}06120\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/info-\/panel'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06121}06121\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06122}06122\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>ÄŒas</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06123}06123\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='timer-\/display'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06124}06124\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='player-\/time\ white-\/time'\ id='white-\/timer'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06125}06125\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='player-\/info'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06126}06126\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ class='player-\/name'>â™š\ BÃ­lÃ½</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06127}06127\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ class='move-\/indicator'\ id='white-\/move-\/indicator'>â—</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06128}06128\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06129}06129\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='time-\/value'\ id='white-\/time'>10:00</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06130}06130\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='time-\/bar'><div\ class='time-\/progress'\ id='white-\/progress'></div></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06131}06131\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06132}06132\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='player-\/time\ black-\/time'\ id='black-\/timer'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06133}06133\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='player-\/info'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06134}06134\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ class='player-\/name'>â™”\ ÄŒernÃ½</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06135}06135\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ class='move-\/indicator'\ id='black-\/move-\/indicator'>â—</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06136}06136\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06137}06137\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='time-\/value'\ id='black-\/time'>10:00</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06138}06138\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='time-\/bar'><div\ class='time-\/progress'\ id='black-\/progress'></div></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06139}06139\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06140}06140\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06141}06141\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='timer-\/controls'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06142}06142\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='pause-\/timer'\ onclick='pauseTimer()'>Pozastavit</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06143}06143\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='resume-\/timer'\ onclick='resumeTimer()'\ style='display:none;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06144}06144\ \ \ \ \ \textcolor{stringliteral}{"{}PokraÄovat</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06145}06145\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='reset-\/timer'\ onclick='resetTimer()'>Reset</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06146}06146\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06147}06147\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='timer-\/stats'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06148}06148\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='stat-\/item'><span\ class='stat-\/label'>PrÅ¯m.\ tah</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06149}06149\ \ \ \ \ \textcolor{stringliteral}{"{}id='avg-\/move-\/time'\ class='stat-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06150}06150\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='stat-\/item'><span\ class='stat-\/label'>Tahy</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06151}06151\ \ \ \ \ \textcolor{stringliteral}{"{}id='total-\/moves'\ class='stat-\/value'>0</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06152}06152\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06153}06153\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06154}06154\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06155}06155\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>Stav</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06156}06156\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Stav</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06157}06157\ \ \ \ \ \textcolor{stringliteral}{"{}id='game-\/state'\ class='game-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06158}06158\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Na\ tahu</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06159}06159\ \ \ \ \ \textcolor{stringliteral}{"{}id='current-\/player'\ class='game-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06160}06160\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Tahy</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06161}06161\ \ \ \ \ \textcolor{stringliteral}{"{}id='move-\/count'\ class='game-\/value'>0</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06162}06162\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Å ach</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06163}06163\ \ \ \ \ \textcolor{stringliteral}{"{}id='in-\/check'\ class='game-\/value'>Ne</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06164}06164\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06165}06165\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06166}06166\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>ÄŒasovÃ¡\ kontrola</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06167}06167\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='time-\/control-\/selector'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06168}06168\ \ \ \ \ \textcolor{stringliteral}{"{}<select\ id='time-\/control-\/select'\ onchange='changeTimeControl()'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06169}06169\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='0'>Bez\ Äasu</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06170}06170\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='1'>Bullet\ 1+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06171}06171\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='2'>Bullet\ 1+1</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06172}06172\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='3'>Bullet\ 2+1</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06173}06173\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='4'>Blitz\ 3+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06174}06174\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='5'>Blitz\ 3+2</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06175}06175\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='6'>Blitz\ 5+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06176}06176\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='7'>Blitz\ 5+3</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06177}06177\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='8'>Rapid\ 10+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06178}06178\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='9'>Rapid\ 10+5</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06179}06179\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='10'>Rapid\ 15+10</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06180}06180\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='11'>Rapid\ 30+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06181}06181\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='12'>Classical\ 60+0</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06182}06182\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='13'>Classical\ 90+30</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06183}06183\ \ \ \ \ \textcolor{stringliteral}{"{}<option\ value='14'>VlastnÃ­</option>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06184}06184\ \ \ \ \ \textcolor{stringliteral}{"{}</select>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06185}06185\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='apply-\/time-\/control'\ onclick='applyTimeControl()'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06186}06186\ \ \ \ \ \textcolor{stringliteral}{"{}disabled>PouÅ¾Ã­t</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06187}06187\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06188}06188\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='custom-\/time-\/settings'\ class='custom-\/settings'\ style='display:none;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06189}06189\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='custom-\/input-\/group'><label>Minuty</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06190}06190\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='number'\ id='custom-\/minutes'\ min='1'\ max='180'\ value='10'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06191}06191\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06192}06192\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='custom-\/input-\/group'><label>Increment\ (s)</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06193}06193\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='number'\ id='custom-\/increment'\ min='0'\ max='60'\ value='0'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06194}06194\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06195}06195\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06196}06196\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06197}06197\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/actions'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06198}06198\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ type='button'\ id='new-\/game-\/btn'\ class='btn-\/game-\/action\ btn-\/game-\/new'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06199}06199\ \ \ \ \ \textcolor{stringliteral}{"{}onclick='startNewGame()'>NovÃ¡\ hra</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06200}06200\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ type='button'\ id='hint-\/btn'\ class='btn-\/game-\/action\ btn-\/game-\/hint'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06201}06201\ \ \ \ \ \textcolor{stringliteral}{"{}onclick='requestHint()'>NÃ¡povÄ›da</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06202}06202\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ type='button'\ class='btn-\/game-\/action\ btn-\/game-\/sandbox'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06203}06203\ \ \ \ \ \textcolor{stringliteral}{"{}onclick='enterSandboxMode()'>Zkusit\ tahy</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06204}06204\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06205}06205\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='hint-\/explanation'\ class='hint-\/explanation'\ style='display:none;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06206}06206\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='hint-\/explanation-\/title'>ProÄ\ tento\ tah?</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06207}06207\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ id='hint-\/explanation-\/message'\ class='hint-\/explanation-\/message'></p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06208}06208\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06209}06209\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='move-\/evaluation'\ class='move-\/evaluation'\ style='display:none;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06210}06210\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='move-\/evaluation-\/title'>ZhodnocenÃ­\ tahu</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06211}06211\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ id='move-\/evaluation-\/message'\ class='move-\/evaluation-\/message'></p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06212}06212\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06213}06213\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='castling-\/pending-\/message'\ class='castling-\/pending-\/message'\ style='display:none;'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06214}06214\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06215}06215\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06216}06216\ \textcolor{comment}{//\ Game\ Right\ Panel\ (zvednutÃ¡,\ sebrÃ¡nÃ­,\ historie)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06217}\mbox{\hyperlink{web__server__task_8c_a4ed2739c81538da574348a3db94e6462}{06217}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a4ed2739c81538da574348a3db94e6462}{html\_chunk\_game\_right}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06218}06218\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/right-\/panel'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06219}06219\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06220}06220\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>ZvednutÃ¡</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06221}06221\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Figurka</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06222}06222\ \ \ \ \ \textcolor{stringliteral}{"{}id='lifted-\/piece'\ class='game-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06223}06223\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>Pozice</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06224}06224\ \ \ \ \ \textcolor{stringliteral}{"{}id='lifted-\/position'\ class='game-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06225}06225\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06226}06226\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06227}06227\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>SebranÃ©</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06228}06228\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'><span\ class='game-\/label'>BÃ­lÃ½</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06229}06229\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='white-\/captured'\ class='captured-\/pieces'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06230}06230\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/row'\ style='margin-\/top:8px;'><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06231}06231\ \ \ \ \ \textcolor{stringliteral}{"{}class='game-\/label'>ÄŒernÃ½</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06232}06232\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='black-\/captured'\ class='captured-\/pieces'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06233}06233\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06234}06234\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/block'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06235}06235\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='game-\/title'>Historie</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06236}06236\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='history'\ class='history-\/box'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06237}06237\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06238}06238\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06239}06239\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06240}\mbox{\hyperlink{web__server__task_8c_a0dc3a9e01e0ee61af3f276badf9efc09}{06240}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a0dc3a9e01e0ee61af3f276badf9efc09}{html\_chunk\_tab\_hra\_end}}[]\ =\ \textcolor{stringliteral}{"{}</div></div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06241}06241\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06242}06242\ \textcolor{comment}{//\ Chunk\ 2c:\ Board\ Container\ (Center\ Column)\ +\ Modal}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06243}\mbox{\hyperlink{web__server__task_8c_a0075c9a2ed7f41df9d5f1e62ee82ff80}{06243}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a0075c9a2ed7f41df9d5f1e62ee82ff80}{html\_chunk\_board}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06244}06244\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='board-\/container'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06245}06245\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='board'\ class='board'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06246}06246\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='loading'\ class='loading'>NaÄÃ­tÃ¡nÃ­...</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06247}06247\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06248}06248\ \ \ \ \ \textcolor{stringliteral}{"{}<!-\/-\/\ Promotion\ Modal\ -\/-\/>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06249}06249\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='promotion-\/modal'\ class='modal'\ style='display:none;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06250}06250\ \ \ \ \ \textcolor{stringliteral}{"{}position:fixed;\ top:0;\ left:0;\ width:100\%;\ height:100\%;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06251}06251\ \ \ \ \ \textcolor{stringliteral}{"{}background:rgba(0,0,0,0.8);\ z-\/index:2000;\ align-\/items:center;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06252}06252\ \ \ \ \ \textcolor{stringliteral}{"{}justify-\/content:center;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06253}06253\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='modal-\/content'\ style='background:\#333;\ padding:20px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06254}06254\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:8px;\ text-\/align:center;\ border:2px\ solid\ \#4CAF50;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06255}06255\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ style='color:\#4CAF50;\ margin-\/bottom:15px;'>Promoce\ pÄ›Å¡ce</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06256}06256\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ style='display:flex;\ gap:10px;\ justify-\/content:center;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06257}06257\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick=\(\backslash\)"{}selectPromotion('Q')\(\backslash\)"{}\ style='font-\/size:24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06258}06258\ \ \ \ \ \textcolor{stringliteral}{"{}padding:10px;\ cursor:pointer;'>â™›</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06259}06259\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick=\(\backslash\)"{}selectPromotion('R')\(\backslash\)"{}\ style='font-\/size:24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06260}06260\ \ \ \ \ \textcolor{stringliteral}{"{}padding:10px;\ cursor:pointer;'>â™œ</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06261}06261\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick=\(\backslash\)"{}selectPromotion('B')\(\backslash\)"{}\ style='font-\/size:24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06262}06262\ \ \ \ \ \textcolor{stringliteral}{"{}padding:10px;\ cursor:pointer;'>â™</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06263}06263\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick=\(\backslash\)"{}selectPromotion('N')\(\backslash\)"{}\ style='font-\/size:24px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06264}06264\ \ \ \ \ \textcolor{stringliteral}{"{}padding:10px;\ cursor:pointer;'>â™ž</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06265}06265\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06266}06266\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick='cancelPromotion()'\ style='margin-\/top:15px;\ padding:8px\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06267}06267\ \ \ \ \ \textcolor{stringliteral}{"{}16px;\ background:\#f44336;\ color:white;\ border:none;\ border-\/radius:4px;\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06268}06268\ \ \ \ \ \textcolor{stringliteral}{"{}cursor:pointer;'>ZruÅ¡it</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06269}06269\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06270}06270\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06271}06271\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06272}06272\ \textcolor{comment}{//\ Tab\ NastavenÃ­:\ wrapper\ start\ (settings-\/grid)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06273}\mbox{\hyperlink{web__server__task_8c_ad572c26c328220889e67688a5399ce65}{06273}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ad572c26c328220889e67688a5399ce65}{html\_chunk\_tab\_nastaveni\_start}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06274}06274\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='tab-\/nastaveni'\ class='tab-\/content'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06275}06275\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/grid'>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06276}06276\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06277}06277\ \textcolor{comment}{//\ Section\ SÃ­Å¥}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06278}\mbox{\hyperlink{web__server__task_8c_ae190241b4afa6e796e3537850ccbbdc7}{06278}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ae190241b4afa6e796e3537850ccbbdc7}{html\_chunk\_settings\_sit}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06279}06279\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06280}06280\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>SÃ­Å¥</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06281}06281\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>AP</span><span\ id='ap-\/ssid'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06282}06282\ \ \ \ \ \textcolor{stringliteral}{"{}class='set-\/value'>ESP32-\/CzechMate</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06283}06283\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>AP\ IP</span><span\ id='ap-\/ip'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06284}06284\ \ \ \ \ \textcolor{stringliteral}{"{}class='set-\/value'>192.168.4.1</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06285}06285\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>Klienti</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06286}06286\ \ \ \ \ \textcolor{stringliteral}{"{}id='ap-\/clients'\ class='set-\/value'>0</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06287}06287\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>STA</span><span\ id='sta-\/ssid'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06288}06288\ \ \ \ \ \textcolor{stringliteral}{"{}class='set-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06289}06289\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>STA\ IP</span><span\ id='sta-\/ip'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06290}06290\ \ \ \ \ \textcolor{stringliteral}{"{}class='set-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06291}06291\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>PÅ™ipojeno</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06292}06292\ \ \ \ \ \textcolor{stringliteral}{"{}id='sta-\/connected'\ class='set-\/value'>ne</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06293}06293\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>SSID</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06294}06294\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='text'\ id='wifi-\/ssid'\ class='set-\/input'\ placeholder='WiFi\ SSID'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06295}06295\ \ \ \ \ \textcolor{stringliteral}{"{}maxlength='32'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06296}06296\ \ \ \ \ \textcolor{stringliteral}{"{}</div><div\ class='set-\/group'><label>Heslo</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06297}06297\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='password'\ id='wifi-\/password'\ class='set-\/input'\ placeholder='â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06298}06298\ \ \ \ \ \textcolor{stringliteral}{"{}maxlength='64'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06299}06299\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06300}06300\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='wifi-\/save-\/btn'\ class='set-\/btn'\ onclick='saveWiFiConfig()'>UloÅ¾it\ WiFi</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06301}06301\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/btn-\/row'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06302}06302\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='wifi-\/connect-\/btn'\ class='set-\/btn\ set-\/btn-\/sm'\ onclick='connectSTA()'>PÅ™ipojit</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06303}06303\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='wifi-\/disconnect-\/btn'\ class='set-\/btn\ set-\/btn-\/sm'\ onclick='disconnectSTA()'>Odpojit</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06304}06304\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06305}06305\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='wifi-\/clear-\/btn'\ class='set-\/btn\ set-\/btn-\/sm\ set-\/btn-\/danger'\ onclick='clearWiFiConfig()'>Smazat\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06306}06306\ \ \ \ \ \textcolor{stringliteral}{"{}WiFi</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06307}06307\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06308}06308\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06309}06309\ \textcolor{comment}{//\ Section\ ZaÅ™Ã­zenÃ­}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06310}\mbox{\hyperlink{web__server__task_8c_aff807476fdafba6db3514a20fa7374cb}{06310}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_aff807476fdafba6db3514a20fa7374cb}{html\_chunk\_settings\_zarizeni}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06311}06311\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06312}06312\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>ZaÅ™Ã­zenÃ­</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06313}06313\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06314}06314\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ class='set-\/label'>Jas</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06315}06315\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ id='brightness-\/value'\ class='set-\/value'>50\%</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06316}06316\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06317}06317\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='range'\ id='brightness-\/slider'\ class='set-\/input'\ min='0'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06318}06318\ \ \ \ \ \textcolor{stringliteral}{"{}max='100'\ value='50'\ style='padding:0;\ height:24px;'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06319}06319\ \ \ \ \ \textcolor{stringliteral}{"{}oninput='var\ e=document.getElementById(\(\backslash\)"{}brightness-\/value\(\backslash\)"{});\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06320}06320\ \ \ \ \ \textcolor{stringliteral}{"{}if(e)e.textContent=this.value+\(\backslash\)"{}\%\(\backslash\)"{};'\ onchange='setBrightness(this.value)'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06321}06321\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>ZÃ¡mek</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06322}06322\ \ \ \ \ \textcolor{stringliteral}{"{}id='web-\/lock-\/status'\ class='set-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06323}06323\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/row'><span\ class='set-\/label'>Online</span><span\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06324}06324\ \ \ \ \ \textcolor{stringliteral}{"{}id='web-\/online-\/status'\ class='set-\/value'>â€”</span></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06325}06325\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06326}06326\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06327}06327\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>NÃ¡povÄ›da</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06328}06328\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Hloubka\ myÅ¡lenÃ­</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06329}06329\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='number'\ id='hint-\/depth'\ class='set-\/input'\ min='1'\ max='18'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06330}06330\ \ \ \ \ \textcolor{stringliteral}{"{}value='10'\ onchange='var\ v=Math.min(18,Math.max(1,parseInt(this.value,10)||10));"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06331}06331\ \ \ \ \ \textcolor{stringliteral}{"{}this.value=v;try\{localStorage.setItem(\(\backslash\)"{}chessHintDepth\(\backslash\)"{},v);\}catch(e)\{\}'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06332}06332\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06333}06333\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ class='set-\/note'>Jak\ moc\ mÃ¡\ poÄÃ­taÄ\ pÅ™emÃ½Å¡let\ (1\ =\ rychle,\ 18\ =\ nejlÃ©pe).</p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06334}06334\ \ \ \ \ \textcolor{stringliteral}{"{}<label\ class='set-\/check'\ style='margin-\/top:10px;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06335}06335\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='checkbox'\ id='evaluate-\/move-\/enabled'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06336}06336\ \ \ \ \ \textcolor{stringliteral}{"{}onchange=\(\backslash\)"{}try\{localStorage.setItem('chessEvaluateMove',this.checked);\}catch(e)\{\};if(!this.checked)\{hideMoveEvaluation();if(typeof\ renderHistoryList==='function')renderHistoryList();\}\(\backslash\)"{}>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06337}06337\ \ \ \ \ \textcolor{stringliteral}{"{}<span>ZhodnocenÃ­\ tahu</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06338}06338\ \ \ \ \ \textcolor{stringliteral}{"{}</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06339}06339\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ class='set-\/note'>Po\ kaÅ¾dÃ©m\ tahu\ zobrazit,\ jak\ dobrÃ½\ byl\ tah\ (vÃ½bornÃ½,\ chyba,\ â€¦).</p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06340}06340\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06341}06341\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06342}06342\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>OvlÃ¡dÃ¡nÃ­</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06343}06343\ \ \ \ \ \textcolor{stringliteral}{"{}<label\ class='set-\/check'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06344}06344\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='checkbox'\ id='remote-\/control-\/enabled'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06345}06345\ \ \ \ \ \textcolor{stringliteral}{"{}onchange='toggleRemoteControl()'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06346}06346\ \ \ \ \ \textcolor{stringliteral}{"{}<span>DÃ¡lkovÃ©\ ovlÃ¡dÃ¡nÃ­\ (sync\ s\ deskou)</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06347}06347\ \ \ \ \ \textcolor{stringliteral}{"{}</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06348}06348\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ class='set-\/note\ set-\/note-\/warn'>Synchronizace\ s\ fyzickou\ deskou.</p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06349}06349\ \ \ \ \ \textcolor{stringliteral}{"{}<label\ class='set-\/check'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06350}06350\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='checkbox'\ id='confirm-\/new-\/game'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06351}06351\ \ \ \ \ \textcolor{stringliteral}{"{}onchange=\(\backslash\)"{}try\{localStorage.setItem('chess\_confirm\_new\_game',this.checked);\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06352}06352\ \ \ \ \ \textcolor{stringliteral}{"{}catch(e)\{\}\(\backslash\)"{}>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06353}06353\ \ \ \ \ \textcolor{stringliteral}{"{}<span>Potvrdit\ novou\ hru</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06354}06354\ \ \ \ \ \textcolor{stringliteral}{"{}</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06355}06355\ \ \ \ \ \textcolor{stringliteral}{"{}<p\ class='set-\/note'>PÅ™ed\ spuÅ¡tÄ›nÃ­m\ novÃ©\ hry\ zobrazit\ potvrzenÃ­.</p>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06356}06356\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06357}06357\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06358}06358\ \textcolor{comment}{//\ Chunk\ 2c:\ Review\ and\ Sandbox\ banners}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06359}\mbox{\hyperlink{web__server__task_8c_a38326283e81a476ac89426aea7cf3250}{06359}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a38326283e81a476ac89426aea7cf3250}{html\_chunk\_banners}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06360}06360\ \ \ \ \ \textcolor{stringliteral}{"{}<!-\/-\/\ Review\ Mode\ Banner\ -\/-\/>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06361}06361\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='review-\/banner'\ id='review-\/banner'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06362}06362\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='review-\/header'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06363}06363\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ style='display:flex;align-\/items:center;gap:8px;flex:1'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06364}06364\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ id='review-\/move-\/text'>ProhlÃ­Å¾Ã­Å¡\ tah\ 0</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06365}06365\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06366}06366\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='btn-\/header-\/close'\ onclick='exitReviewMode()'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06367}06367\ \ \ \ \ \textcolor{stringliteral}{"{}title='ZavÅ™Ã­t'>Ã—</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06368}06368\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06369}06369\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='review-\/controls'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06370}06370\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='nav-\/btn\ nav-\/first'\ onclick='goToMove(0)'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06371}06371\ \ \ \ \ \textcolor{stringliteral}{"{}title='Na\ zaÄÃ¡tek'\ aria-\/label='PrvnÃ­\ tah'>|\&lt;\&lt;</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06372}06372\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='nav-\/btn\ nav-\/prev'\ onclick='prevReviewMove()'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06373}06373\ \ \ \ \ \textcolor{stringliteral}{"{}title='PÅ™edchozÃ­\ tah'\ aria-\/label='PÅ™edchozÃ­'>\&lt;</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06374}06374\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='nav-\/btn\ nav-\/next'\ onclick='nextReviewMove()'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06375}06375\ \ \ \ \ \textcolor{stringliteral}{"{}title='DalÅ¡Ã­\ tah'\ aria-\/label='DalÅ¡Ã­'>\&gt;</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06376}06376\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='nav-\/btn\ nav-\/last'\ onclick='goToMove(-\/1)'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06377}06377\ \ \ \ \ \textcolor{stringliteral}{"{}title='Na\ konec'\ aria-\/label='PoslednÃ­\ tah'>\&gt;\&gt;|</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06378}06378\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06379}06379\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06380}06380\ \ \ \ \ \textcolor{stringliteral}{"{}<!-\/-\/\ Sandbox\ Mode\ Banner\ -\/-\/>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06381}06381\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='sandbox-\/banner'\ id='sandbox-\/banner'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06382}06382\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='sandbox-\/text'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06383}06383\ \ \ \ \ \textcolor{stringliteral}{"{}<span>Sandbox\ Mode\ -\/\ ZkouÅ¡Ã­Å¡\ tahy\ lokÃ¡lnÄ›</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06384}06384\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06385}06385\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ style='display:\ flex;\ gap:\ 10px;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06386}06386\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='btn-\/exit-\/sandbox'\ id='sandbox-\/undo-\/btn'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06387}06387\ \ \ \ \ \textcolor{stringliteral}{"{}onclick='undoSandboxMove()'\ disabled>Undo\ (0/10)</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06388}06388\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ class='btn-\/exit-\/sandbox'\ onclick='exitSandboxMode()'>ZpÄ›t\ na\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06389}06389\ \ \ \ \ \textcolor{stringliteral}{"{}skuteÄnou\ pozici</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06390}06390\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06391}06391\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06392}06392\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06393}06393\ \textcolor{comment}{//\ Chunk\ 3:\ Hint\ (NÃ¡povÄ›da)\ -\/\ inline\ so\ requestHint\ exists\ even\ if\ chess\_app.js\ fails/cache}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06394}\mbox{\hyperlink{web__server__task_8c_adc3003a9441c86d367006ae4415a82b4}{06394}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_adc3003a9441c86d367006ae4415a82b4}{html\_chunk\_hint\_inline}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06395}06395\ \ \ \ \ \textcolor{stringliteral}{"{}<script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06396}06396\ \ \ \ \ \textcolor{stringliteral}{"{}(function()\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06397}06397\ \ \ \ \ \textcolor{stringliteral}{"{}function\ boardAndStatusToFen(board,status,history)\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06398}06398\ \ \ \ \ \textcolor{stringliteral}{"{}if(!board||!status)return\ '';"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06399}06399\ \ \ \ \ \textcolor{stringliteral}{"{}var\ rows=[];"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06400}06400\ \ \ \ \ \textcolor{stringliteral}{"{}for(var\ r=7;r>=0;r-\/-\/)\{var\ rank='',empty=0;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06401}06401\ \ \ \ \ \textcolor{stringliteral}{"{}for(var\ c=0;c<8;c++)\{var\ p=board[r][c];"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06402}06402\ \ \ \ \ \textcolor{stringliteral}{"{}if(p==='\ '||p==='')empty++;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06403}06403\ \ \ \ \ \textcolor{stringliteral}{"{}else\{if(empty)\{rank+=empty;empty=0;\}rank+=p;\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06404}06404\ \ \ \ \ \textcolor{stringliteral}{"{}if(empty)rank+=empty;rows.push(rank);\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06405}06405\ \ \ \ \ \textcolor{stringliteral}{"{}var\ side=(status.current\_player==='White')?'w':'b';"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06406}06406\ \ \ \ \ \textcolor{stringliteral}{"{}var\ moves=(history\&\&history.moves)?history.moves.length:0;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06407}06407\ \ \ \ \ \textcolor{stringliteral}{"{}return\ rows.join('/')+'\ '+side+'\ KQkq\ -\/\ 0\ '+(Math.floor(moves/2)+1);\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06408}06408\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ fetchStockfishBestMove(fen)\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06409}06409\ \ \ \ \ \textcolor{stringliteral}{"{}try\{var\ depth=(function()\{try\{var\ d=parseInt(localStorage.getItem('chessHintDepth')||'10',10);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06410}06410\ \ \ \ \ \textcolor{stringliteral}{"{}return\ Math.min(18,Math.max(1,isNaN(d)?10:d));\}catch(e)\{return\ 10;\}\})();"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06411}06411\ \ \ \ \ \textcolor{stringliteral}{"{}var\ res=await\ fetch('https://chess-\/api.com/v1',\{method:'POST',headers:\{'Content-\/Type':'application/json'\},body:JSON.stringify(\{fen:fen,depth:depth\})\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06412}06412\ \ \ \ \ \textcolor{stringliteral}{"{}if(!res.ok)return\ null;var\ data=await\ res.json().catch(function()\{\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06413}06413\ \ \ \ \ \textcolor{stringliteral}{"{}if(!data)return\ null;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06414}06414\ \ \ \ \ \textcolor{stringliteral}{"{}if(data.from\&\&data.to\&\&data.from.length===2\&\&data.to.length===2)return\{from:data.from.toLowerCase(),to:data.to.toLowerCase()\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06415}06415\ \ \ \ \ \textcolor{stringliteral}{"{}if(data.move\&\&data.move.length>=4)return\{from:data.move.substring(0,2).toLowerCase(),to:data.move.substring(2,4).toLowerCase()\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06416}06416\ \ \ \ \ \textcolor{stringliteral}{"{}return\ null;\}catch(e)\{return\ null;\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06417}06417\ \ \ \ \ \textcolor{stringliteral}{"{}function\ showHintOnBoard(from,to)\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06418}06418\ \ \ \ \ \textcolor{stringliteral}{"{}document.querySelectorAll('.square').forEach(function(sq)\{sq.classList.remove('hint-\/from','hint-\/to');\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06419}06419\ \ \ \ \ \textcolor{stringliteral}{"{}var\ fc=from.charCodeAt(0)-\/97,fr=parseInt(from[1],10)-\/1,tc=to.charCodeAt(0)-\/97,tr=parseInt(to[1],10)-\/1;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06420}06420\ \ \ \ \ \textcolor{stringliteral}{"{}var\ fs=document.querySelector('[data-\/row=\(\backslash\)"{}'+fr+'\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'+fc+'\(\backslash\)"{}]');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06421}06421\ \ \ \ \ \textcolor{stringliteral}{"{}var\ ts=document.querySelector('[data-\/row=\(\backslash\)"{}'+tr+'\(\backslash\)"{}][data-\/col=\(\backslash\)"{}'+tc+'\(\backslash\)"{}]');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06422}06422\ \ \ \ \ \textcolor{stringliteral}{"{}if(fs)fs.classList.add('hint-\/from');if(ts)ts.classList.add('hint-\/to');\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06423}06423\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ requestHint()\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06424}06424\ \ \ \ \ \textcolor{stringliteral}{"{}if(typeof\ sandboxMode!=='undefined'\&\&sandboxMode)return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06425}06425\ \ \ \ \ \textcolor{stringliteral}{"{}if(typeof\ reviewMode!=='undefined'\&\&reviewMode)return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06426}06426\ \ \ \ \ \textcolor{stringliteral}{"{}var\ status=typeof\ statusData!=='undefined'?statusData:\{\};"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06427}06427\ \ \ \ \ \textcolor{stringliteral}{"{}var\ state=(status.game\_state||'').toLowerCase();"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06428}06428\ \ \ \ \ \textcolor{stringliteral}{"{}if(state!=='active'\&\&state!=='playing')return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06429}06429\ \ \ \ \ \textcolor{stringliteral}{"{}if(status.game\_end\&\&status.game\_end.ended)return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06430}06430\ \ \ \ \ \textcolor{stringliteral}{"{}if(state==='promotion')return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06431}06431\ \ \ \ \ \textcolor{stringliteral}{"{}var\ btn=document.getElementById('hint-\/btn');"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06432}06432\ \ \ \ \ \textcolor{stringliteral}{"{}if(btn)\{btn.disabled=true;btn.textContent='NaÄÃ­tÃ¡mâ€¦';\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06433}06433\ \ \ \ \ \textcolor{stringliteral}{"{}try\{"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06434}06434\ \ \ \ \ \textcolor{stringliteral}{"{}var\ fen=boardAndStatusToFen(typeof\ boardData!=='undefined'?boardData:[],status,typeof\ historyData!=='undefined'?historyData:\{\});"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06435}06435\ \ \ \ \ \textcolor{stringliteral}{"{}if(!fen)return;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06436}06436\ \ \ \ \ \textcolor{stringliteral}{"{}var\ move=await\ fetchStockfishBestMove(fen);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06437}06437\ \ \ \ \ \textcolor{stringliteral}{"{}if(move)\{showHintOnBoard(move.from,move.to);"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06438}06438\ \ \ \ \ \textcolor{stringliteral}{"{}try\{await\ fetch('/api/game/hint\_highlight',\{method:'POST',headers:\{'Content-\/Type':'application/json'\},body:JSON.stringify(\{from:move.from,to:move.to\})\});\}catch(e)\{\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06439}06439\ \ \ \ \ \textcolor{stringliteral}{"{}\}finally\{if(btn)\{btn.disabled=false;btn.textContent='NÃ¡povÄ›da';\}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06440}06440\ \ \ \ \ \textcolor{stringliteral}{"{}\}"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06441}06441\ \ \ \ \ \textcolor{stringliteral}{"{}window.requestHint=requestHint;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06442}06442\ \ \ \ \ \textcolor{stringliteral}{"{}\})();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06443}06443\ \ \ \ \ \textcolor{stringliteral}{"{}</script>\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06444}06444\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06445}06445\ \textcolor{comment}{//\ Chunk\ 3b:\ JavaScript\ -\/\ load\ from\ external\ file\ (prevents\ UTF-\/8\ chunking}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06446}06446\ \textcolor{comment}{//\ issues)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06447}\mbox{\hyperlink{web__server__task_8c_ad68d8dce5b4bb5eb53f9201c4a146c2f}{06447}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_ad68d8dce5b4bb5eb53f9201c4a146c2f}{html\_chunk\_javascript}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06448}06448\ \ \ \ \ \textcolor{stringliteral}{"{}<script\ src='/chess\_app.js'></script>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06449}06449\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06450}06450\ \textcolor{comment}{//\ Chunk:\ Demo\ Mode\ UI\ Panel\ (v\ zÃ¡loÅ¾ce\ NastavenÃ­)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06451}\mbox{\hyperlink{web__server__task_8c_a8bf9680c8995edd413cb2da4a543c3d6}{06451}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a8bf9680c8995edd413cb2da4a543c3d6}{html\_chunk\_demo\_mode}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06452}06452\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06453}06453\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>Demo</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06454}06454\ \ \ \ \ \textcolor{stringliteral}{"{}<label\ class='set-\/check'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06455}06455\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='checkbox'\ id='demo-\/enabled'>\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06456}06456\ \ \ \ \ \textcolor{stringliteral}{"{}<span>Zapnout\ demo\ reÅ¾im</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06457}06457\ \ \ \ \ \textcolor{stringliteral}{"{}</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06458}06458\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Rychlost\ tahÅ¯</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06459}06459\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ style='display:flex;align-\/items:center;gap:10px;'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06460}06460\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='range'\ id='demo-\/speed'\ class='set-\/input'\ min='500'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06461}06461\ \ \ \ \ \textcolor{stringliteral}{"{}max='5000'\ step='100'\ value='2000'\ style='flex:1;padding:0;'\ disabled>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06462}06462\ \ \ \ \ \textcolor{stringliteral}{"{}<span\ id='demo-\/speed-\/value'\ class='set-\/value'\ style='width:52px;'>2000ms</span>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06463}06463\ \ \ \ \ \textcolor{stringliteral}{"{}</div></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06464}06464\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ id='stop-\/demo-\/btn'\ class='set-\/btn\ set-\/btn-\/sm\ set-\/btn-\/danger'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06465}06465\ \ \ \ \ \textcolor{stringliteral}{"{}onclick='stopDemo()'\ style='display:none;'>Zastavit\ pÅ™ehrÃ¡vÃ¡nÃ­</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06466}06466\ \ \ \ \ \textcolor{stringliteral}{"{}<script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06467}06467\ \ \ \ \ \textcolor{stringliteral}{"{}const\ demoCheckbox\ =\ document.getElementById('demo-\/enabled');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06468}06468\ \ \ \ \ \textcolor{stringliteral}{"{}const\ demoSpeed\ =\ document.getElementById('demo-\/speed');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06469}06469\ \ \ \ \ \textcolor{stringliteral}{"{}const\ demoSpeedValue\ =\ document.getElementById('demo-\/speed-\/value');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06470}06470\ \ \ \ \ \textcolor{stringliteral}{"{}const\ stopDemoBtn\ =\ document.getElementById('stop-\/demo-\/btn');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06471}06471\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06472}06472\ \ \ \ \ \textcolor{stringliteral}{"{}demoCheckbox.addEventListener('change',\ function()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06473}06473\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ enabled\ =\ this.checked;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06474}06474\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoSpeed.disabled\ =\ !enabled;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06475}06475\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoSpeedValue.style.color\ =\ enabled\ ?\ '\#fff'\ :\ '\#888';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06476}06476\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ stopDemoBtn.style.display\ =\ enabled\ ?\ 'block'\ :\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06477}06477\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06478}06478\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ fetch('/api/demo/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06479}06479\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06480}06480\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ headers:\ \{'Content-\/Type':\ 'application/json'\},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06481}06481\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ body:\ JSON.stringify(\{enabled:\ enabled,\ speed\_ms:\ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06482}06482\ \ \ \ \ \textcolor{stringliteral}{"{}parseInt(demoSpeed.value)\})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06483}06483\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}).catch(e\ =>\ console.error('Demo\ config\ error:',\ e));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06484}06484\ \ \ \ \ \textcolor{stringliteral}{"{}\});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06485}06485\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06486}06486\ \ \ \ \ \textcolor{stringliteral}{"{}demoSpeed.addEventListener('input',\ function()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06487}06487\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoSpeedValue.textContent\ =\ this.value\ +\ 'ms';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06488}06488\ \ \ \ \ \textcolor{stringliteral}{"{}\});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06489}06489\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06490}06490\ \ \ \ \ \textcolor{stringliteral}{"{}demoSpeed.addEventListener('change',\ function()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06491}06491\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ fetch('/api/demo/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06492}06492\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06493}06493\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ headers:\ \{'Content-\/Type':\ 'application/json'\},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06494}06494\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ body:\ JSON.stringify(\{enabled:\ demoCheckbox.checked,\ speed\_ms:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06495}06495\ \ \ \ \ \textcolor{stringliteral}{"{}parseInt(this.value)\})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06496}06496\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}).catch(e\ =>\ console.error('Demo\ speed\ error:',\ e));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06497}06497\ \ \ \ \ \textcolor{stringliteral}{"{}\});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06498}06498\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06499}06499\ \ \ \ \ \textcolor{stringliteral}{"{}function\ stopDemo()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06500}06500\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoCheckbox.checked\ =\ false;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06501}06501\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoSpeed.disabled\ =\ true;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06502}06502\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ demoSpeedValue.style.color\ =\ '\#888';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06503}06503\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ stopDemoBtn.style.display\ =\ 'none';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06504}06504\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06505}06505\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ fetch('/api/demo/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06506}06506\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06507}06507\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ headers:\ \{'Content-\/Type':\ 'application/json'\},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06508}06508\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ body:\ JSON.stringify(\{enabled:\ false,\ speed\_ms:\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06509}06509\ \ \ \ \ \textcolor{stringliteral}{"{}parseInt(demoSpeed.value)\})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06510}06510\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}).catch(e\ =>\ console.error('Stop\ demo\ error:',\ e));\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06511}06511\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06512}06512\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06513}06513\ \ \ \ \ \textcolor{stringliteral}{"{}</script>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06514}06514\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06515}06515\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06516}06516\ \textcolor{comment}{//\ Chunk:\ MQTT\ Configuration\ Panel}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06517}\mbox{\hyperlink{web__server__task_8c_aed0fb8deb128d87225f755340b40201e}{06517}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_aed0fb8deb128d87225f755340b40201e}{html\_chunk\_mqtt\_config}}[]\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06518}06518\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='settings-\/section'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06519}06519\ \ \ \ \ \textcolor{stringliteral}{"{}<h3\ class='set-\/title'>MQTT</h3>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06520}06520\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Broker\ (host)</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06521}06521\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='text'\ id='mqtt-\/host'\ class='set-\/input'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06522}06522\ \ \ \ \ \textcolor{stringliteral}{"{}placeholder='homeassistant.local'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06523}06523\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06524}06524\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Port</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06525}06525\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='number'\ id='mqtt-\/port'\ class='set-\/input'\ value='1883'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06526}06526\ \ \ \ \ \textcolor{stringliteral}{"{}min='1'\ max='65535'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06527}06527\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06528}06528\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Username</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06529}06529\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='text'\ id='mqtt-\/username'\ class='set-\/input'\ placeholder='user'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06530}06530\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06531}06531\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ class='set-\/group'><label>Password</label>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06532}06532\ \ \ \ \ \textcolor{stringliteral}{"{}<input\ type='password'\ id='mqtt-\/password'\ class='set-\/input'\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06533}06533\ \ \ \ \ \textcolor{stringliteral}{"{}placeholder='â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢'>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06534}06534\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06535}06535\ \ \ \ \ \textcolor{stringliteral}{"{}<button\ onclick='saveMQTTConfig()'\ class='set-\/btn'>UloÅ¾it\ MQTT</button>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06536}06536\ \ \ \ \ \textcolor{stringliteral}{"{}<div\ id='mqtt-\/status'\ class='set-\/note'\ style='margin-\/top:8px;padding:8px;"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06537}06537\ \ \ \ \ \textcolor{stringliteral}{"{}border-\/radius:6px;display:none;'></div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06538}06538\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06539}06539\ \ \ \ \ \textcolor{stringliteral}{"{}<script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06540}06540\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ saveMQTTConfig()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06541}06541\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ host\ =\ document.getElementById('mqtt-\/host').value;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06542}06542\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ port\ =\ parseInt(document.getElementById('mqtt-\/port').value);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06543}06543\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ username\ =\ document.getElementById('mqtt-\/username').value;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06544}06544\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ password\ =\ document.getElementById('mqtt-\/password').value;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06545}06545\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ const\ statusDiv\ =\ document.getElementById('mqtt-\/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06546}06546\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06547}06547\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ if\ (!host)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06548}06548\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06549}06549\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.style.background\ =\ '\#f44336';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06550}06550\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.textContent\ =\ 'Chyba:\ Host\ je\ povinnÃ½';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06551}06551\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ return;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06552}06552\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06553}06553\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06554}06554\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06555}06555\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ response\ =\ await\ fetch('/api/mqtt/config',\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06556}06556\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ method:\ 'POST',\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06557}06557\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ headers:\ \{'Content-\/Type':\ 'application/json'\},\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06558}06558\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ body:\ JSON.stringify(\{host:\ host,\ port:\ port,\ username:\ username,\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06559}06559\ \ \ \ \ \textcolor{stringliteral}{"{}password:\ password\})\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06560}06560\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \});\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06561}06561\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06562}06562\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06563}06563\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06564}06564\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (data.success)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06565}06565\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ statusDiv.style.background\ =\ '\#4CAF50';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06566}06566\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ statusDiv.textContent\ =\ 'MQTT\ uloÅ¾eno.\ Restartujte\ ESP32.';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06567}06567\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06568}06568\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ statusDiv.style.background\ =\ '\#f44336';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06569}06569\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \ \ statusDiv.textContent\ =\ 'Chyba:\ '\ +\ (data.message\ ||\ 'NeznÃ¡mÃ¡\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06570}06570\ \ \ \ \ \textcolor{stringliteral}{"{}chyba');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06571}06571\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06572}06572\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06573}06573\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.style.display\ =\ 'block';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06574}06574\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.style.background\ =\ '\#f44336';\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06575}06575\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ statusDiv.textContent\ =\ 'Chyba:\ '\ +\ e.message;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06576}06576\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06577}06577\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06578}06578\ \ \ \ \ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06579}06579\ \ \ \ \ \textcolor{stringliteral}{"{}//\ Load\ current\ MQTT\ config\ on\ page\ load\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06580}06580\ \ \ \ \ \textcolor{stringliteral}{"{}async\ function\ loadMQTTConfig()\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06581}06581\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ try\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06582}06582\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ response\ =\ await\ fetch('/api/mqtt/status');\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06583}06583\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ const\ data\ =\ await\ response.json();\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06584}06584\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (data.host)\ document.getElementById('mqtt-\/host').value\ =\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06585}06585\ \ \ \ \ \textcolor{stringliteral}{"{}data.host;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06586}06586\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (data.port)\ document.getElementById('mqtt-\/port').value\ =\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06587}06587\ \ \ \ \ \textcolor{stringliteral}{"{}data.port;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06588}06588\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ if\ (data.username)\ document.getElementById('mqtt-\/username').value\ =\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06589}06589\ \ \ \ \ \textcolor{stringliteral}{"{}data.username;\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06590}06590\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}\ catch\ (e)\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06591}06591\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \ \ console.log('Could\ not\ load\ MQTT\ config:',\ e);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06592}06592\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ \}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06593}06593\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06594}06594\ \ \ \ \ \textcolor{stringliteral}{"{}if\ (document.readyState\ ===\ 'loading')\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06595}06595\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ document.addEventListener('DOMContentLoaded',\ loadMQTTConfig);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06596}06596\ \ \ \ \ \textcolor{stringliteral}{"{}\}\ else\ \{\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06597}06597\ \ \ \ \ \textcolor{stringliteral}{"{}\ \ setTimeout(loadMQTTConfig,\ 100);\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06598}06598\ \ \ \ \ \textcolor{stringliteral}{"{}\}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06599}06599\ \ \ \ \ \textcolor{stringliteral}{"{}</script>\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06600}06600\ \ \ \ \ \textcolor{stringliteral}{"{}</div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06601}06601\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06602}06602\ \textcolor{comment}{//\ Tab\ NastavenÃ­:\ close\ section\ OvlÃ¡dÃ¡nÃ­,\ settings-\/grid,\ tab}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06603}\mbox{\hyperlink{web__server__task_8c_a3e25ed064bdf023c8829e45eea11ea4d}{06603}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a3e25ed064bdf023c8829e45eea11ea4d}{html\_chunk\_tab\_nastaveni\_end}}[]\ =\ \textcolor{stringliteral}{"{}</div></div></div>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06604}06604\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06605}06605\ \textcolor{comment}{//\ Chunk:\ HTML\ closing\ tags}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06606}\mbox{\hyperlink{web__server__task_8c_a3d913a16031d5b9a41a6dc6551e6ce61}{06606}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{web__server__task_8c_a3d913a16031d5b9a41a6dc6551e6ce61}{html\_chunk\_end}}[]\ =\ \textcolor{stringliteral}{"{}</div>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06607}06607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}</body>"{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06608}06608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}</html>"{}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06609}06609\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06610}06610\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06611}06611\ \textcolor{comment}{//\ HTML\ PAGE\ HANDLER}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06612}06612\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06613}06613\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06614}\mbox{\hyperlink{web__server__task_8c_ac4be9f5032c10525d0b61493e402b758}{06614}}\ \textcolor{keyword}{static}\ esp\_err\_t\ \mbox{\hyperlink{web__server__task_8c_ac4be9f5032c10525d0b61493e402b758}{http\_get\_root\_handler}}(httpd\_req\_t\ *req)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06615}06615\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}GET\ /\ (HTML\ page)\ -\/\ using\ chunked\ transfer\ for\ reliability"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06616}06616\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06617}06617\ \ \ \textcolor{comment}{//\ Set\ content\ type}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06618}06618\ \ \ httpd\_resp\_set\_type(req,\ \textcolor{stringliteral}{"{}text/html;\ charset=utf-\/8"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06619}06619\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06620}06620\ \ \ \textcolor{comment}{//\ Prevent\ caching\ to\ ensure\ updates\ (especially\ JS\ fixes)\ are\ loaded}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06621}06621\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Cache-\/Control"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06622}06622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}no-\/cache,\ no-\/store,\ must-\/revalidate"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06623}06623\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Pragma"{}},\ \textcolor{stringliteral}{"{}no-\/cache"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06624}06624\ \ \ httpd\_resp\_set\_hdr(req,\ \textcolor{stringliteral}{"{}Expires"{}},\ \textcolor{stringliteral}{"{}0"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06625}06625\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06626}06626\ \ \ \textcolor{comment}{//\ Transfer-\/Encoding\ is\ handled\ automatically\ by\ httpd\_resp\_send\_chunk}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06627}06627\ \ \ \textcolor{comment}{//\ when\ Content-\/Length\ is\ not\ set.\ Don't\ set\ it\ manually!}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06628}06628\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06629}06629\ \ \ \textcolor{comment}{//\ Send\ HTML\ in\ 8\ chunks\ for\ better\ debugging\ and\ memory\ efficiency}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06630}06630\ \ \ \textcolor{comment}{//\ Traffic\ shaping:\ Small\ delays\ to\ prevent\ socket\ buffer\ overflow\ with}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06631}06631\ \ \ \textcolor{comment}{//\ multiple\ clients}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06632}06632\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06633}06633\ \ \ \textcolor{comment}{//\ CHUNK\ 1:\ HEAD\ (CSS\ +\ bootstrap\ script)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06634}06634\ \ \ \textcolor{keywordtype}{size\_t}\ chunk1\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a50be2765f30c79691d319bc9a1b6920c}{html\_chunk\_head}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06635}06635\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}ðŸ“¤\ Chunk\ 1:\ HEAD+CSS\ (\%zu\ bytes)"{}},\ chunk1\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06636}06636\ \ \ esp\_err\_t\ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a50be2765f30c79691d319bc9a1b6920c}{html\_chunk\_head}},\ chunk1\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06637}06637\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06638}06638\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Chunk\ 1\ send\ failed\ (client\ disconnected?):\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06639}06639\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06640}06640\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06641}06641\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06642}06642\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06643}06643\ \ \ \textcolor{comment}{//\ CHUNK\ 2:\ Layout\ +\ Tab\ Hra\ (game\ left,\ board,\ game\ right)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06644}06644\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_layout\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_ad8c6a6333babf87707dc21080b71f726}{html\_chunk\_layout\_start}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06645}06645\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_ad8c6a6333babf87707dc21080b71f726}{html\_chunk\_layout\_start}},\ chunk\_layout\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06646}06646\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06647}06647\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06648}06648\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06649}06649\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_tab\_hra\_start\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a84a7f8dd86a306e95f345b80a4940b1e}{html\_chunk\_tab\_hra\_start}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06650}06650\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a84a7f8dd86a306e95f345b80a4940b1e}{html\_chunk\_tab\_hra\_start}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06651}06651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_tab\_hra\_start\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06652}06652\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06653}06653\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06654}06654\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06655}06655\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_game\_left\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_ace9a7067ecc97f7c7756a562c9b5c1c0}{html\_chunk\_game\_left}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06656}06656\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_ace9a7067ecc97f7c7756a562c9b5c1c0}{html\_chunk\_game\_left}},\ chunk\_game\_left\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06657}06657\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06658}06658\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06659}06659\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06660}06660\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_board\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a0075c9a2ed7f41df9d5f1e62ee82ff80}{html\_chunk\_board}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06661}06661\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a0075c9a2ed7f41df9d5f1e62ee82ff80}{html\_chunk\_board}},\ chunk\_board\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06662}06662\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06663}06663\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06664}06664\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06665}06665\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_game\_right\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a4ed2739c81538da574348a3db94e6462}{html\_chunk\_game\_right}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06666}06666\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a4ed2739c81538da574348a3db94e6462}{html\_chunk\_game\_right}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06667}06667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_game\_right\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06668}06668\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06669}06669\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06670}06670\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06671}06671\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_tab\_hra\_end\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a0dc3a9e01e0ee61af3f276badf9efc09}{html\_chunk\_tab\_hra\_end}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06672}06672\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a0dc3a9e01e0ee61af3f276badf9efc09}{html\_chunk\_tab\_hra\_end}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06673}06673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_tab\_hra\_end\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06674}06674\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06675}06675\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06676}06676\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06677}06677\ \ \ vTaskDelay(pdMS\_TO\_TICKS(20));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06678}06678\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06679}06679\ \ \ \textcolor{comment}{//\ Tab\ NastavenÃ­\ (info\ panel,\ demo,\ mqtt)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06680}06680\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_tab\_nast\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_ad572c26c328220889e67688a5399ce65}{html\_chunk\_tab\_nastaveni\_start}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06681}06681\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_ad572c26c328220889e67688a5399ce65}{html\_chunk\_tab\_nastaveni\_start}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06682}06682\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_tab\_nast\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06683}06683\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06684}06684\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06685}06685\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06686}06686\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_sit\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_ae190241b4afa6e796e3537850ccbbdc7}{html\_chunk\_settings\_sit}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06687}06687\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_ae190241b4afa6e796e3537850ccbbdc7}{html\_chunk\_settings\_sit}},\ chunk\_sit\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06688}06688\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06689}06689\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06690}06690\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_zarizeni\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_aff807476fdafba6db3514a20fa7374cb}{html\_chunk\_settings\_zarizeni}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06691}06691\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_aff807476fdafba6db3514a20fa7374cb}{html\_chunk\_settings\_zarizeni}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06692}06692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_zarizeni\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06693}06693\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06694}06694\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06695}06695\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06696}06696\ \ \ \textcolor{keywordtype}{size\_t}\ chunk6\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a8bf9680c8995edd413cb2da4a543c3d6}{html\_chunk\_demo\_mode}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06697}06697\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a8bf9680c8995edd413cb2da4a543c3d6}{html\_chunk\_demo\_mode}},\ chunk6\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06698}06698\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06699}06699\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06700}06700\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06701}06701\ \ \ \textcolor{keywordtype}{size\_t}\ chunk7\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_aed0fb8deb128d87225f755340b40201e}{html\_chunk\_mqtt\_config}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06702}06702\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_aed0fb8deb128d87225f755340b40201e}{html\_chunk\_mqtt\_config}},\ chunk7\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06703}06703\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06704}06704\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06705}06705\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06706}06706\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_tab\_nast\_end\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a3e25ed064bdf023c8829e45eea11ea4d}{html\_chunk\_tab\_nastaveni\_end}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06707}06707\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a3e25ed064bdf023c8829e45eea11ea4d}{html\_chunk\_tab\_nastaveni\_end}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06708}06708\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_tab\_nast\_end\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06709}06709\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06710}06710\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06711}06711\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06712}06712\ \ \ vTaskDelay(pdMS\_TO\_TICKS(20));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06713}06713\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06714}06714\ \ \ \textcolor{comment}{//\ Banners\ (review,\ sandbox)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06715}06715\ \ \ \textcolor{keywordtype}{size\_t}\ chunk4\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a38326283e81a476ac89426aea7cf3250}{html\_chunk\_banners}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06716}06716\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a38326283e81a476ac89426aea7cf3250}{html\_chunk\_banners}},\ chunk4\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06717}06717\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06718}06718\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06719}06719\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06720}06720\ \ \ vTaskDelay(pdMS\_TO\_TICKS(20));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06721}06721\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06722}06722\ \ \ \textcolor{comment}{//\ Hint\ inline\ (requestHint)\ then\ JavaScript}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06723}06723\ \ \ \textcolor{keywordtype}{size\_t}\ chunk\_hint\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_adc3003a9441c86d367006ae4415a82b4}{html\_chunk\_hint\_inline}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06724}06724\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_adc3003a9441c86d367006ae4415a82b4}{html\_chunk\_hint\_inline}},\ chunk\_hint\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06725}06725\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06726}06726\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06727}06727\ \ \ \textcolor{keywordtype}{size\_t}\ chunk5\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_ad68d8dce5b4bb5eb53f9201c4a146c2f}{html\_chunk\_javascript}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06728}06728\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_ad68d8dce5b4bb5eb53f9201c4a146c2f}{html\_chunk\_javascript}},\ chunk5\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06729}06729\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06730}06730\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06731}06731\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06732}06732\ \ \ vTaskDelay(pdMS\_TO\_TICKS(50));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06733}06733\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06734}06734\ \ \ \textcolor{comment}{//\ Closing\ (container)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06735}06735\ \ \ \textcolor{keywordtype}{size\_t}\ chunk8\_len\ =\ strlen(\mbox{\hyperlink{web__server__task_8c_a3d913a16031d5b9a41a6dc6551e6ce61}{html\_chunk\_end}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06736}06736\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ \mbox{\hyperlink{web__server__task_8c_a3d913a16031d5b9a41a6dc6551e6ce61}{html\_chunk\_end}},\ chunk8\_len);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06737}06737\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06738}06738\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06739}06739\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06740}06740\ \ \ ret\ =\ httpd\_resp\_send\_chunk(req,\ NULL,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06741}06741\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06742}06742\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Chunked\ transfer\ end\ failed\ (client\ disconnected?):\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06743}06743\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06744}06744\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06745}06745\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06746}06746\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06747}06747\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06748}06748\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}âœ…\ HTML\ sent\ (layout\ +\ tab-\/hra\ +\ tab-\/nastaveni\ +\ banners\ +\ js\ +\ "{}}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06749}06749\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}end)"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06750}06750\ \ \ \textcolor{keywordflow}{return}\ ESP\_OK;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06751}06751\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06752}06752\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06753}06753\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06754}06754\ \textcolor{comment}{//\ WRAP\ FUNCTIONS\ FOR\ ESP\_DIAGNOSTICS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06755}06755\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06756}06756\ \textcolor{comment}{//\ EMPTY\ implementation\ to\ prevent\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06757}06757\ \textcolor{comment}{//\ esp\_diagnostics\ will\ not\ work,\ but\ web\ server\ will\ function}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06758}06758\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06759}\mbox{\hyperlink{web__server__task_8c_a9aed8f59f75d856e2916530518eff586}{06759}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a9aed8f59f75d856e2916530518eff586}{\_\_wrap\_esp\_log\_writev}}(esp\_log\_level\_t\ level,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *tag,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06760}06760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *format,\ va\_list\ args)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06761}06761\ \ \ \textcolor{comment}{//\ EMPTY\ -\/\ do\ nothing\ to\ prevent\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06762}06762\ \ \ (void)level;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06763}06763\ \ \ (void)tag;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06764}06764\ \ \ (void)format;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06765}06765\ \ \ (void)args;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06766}06766\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06767}06767\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06768}\mbox{\hyperlink{web__server__task_8c_ac16f4afbf3b99fa63b395c4f03e720d8}{06768}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ac16f4afbf3b99fa63b395c4f03e720d8}{\_\_wrap\_esp\_log\_write}}(esp\_log\_level\_t\ level,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *tag,}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06769}06769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *format,\ ...)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06770}06770\ \ \ \textcolor{comment}{//\ EMPTY\ -\/\ do\ nothing\ to\ prevent\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06771}06771\ \ \ (void)level;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06772}06772\ \ \ (void)tag;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06773}06773\ \ \ (void)format;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06774}06774\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06775}06775\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06776}06776\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06777}06777\ \textcolor{comment}{//\ WEB\ SERVER\ TASK\ IMPLEMENTATION}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06778}06778\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06779}06779\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06780}\mbox{\hyperlink{web__server__task_8h_a706a239d45aec91411ba21ec2fe1b6f9}{06780}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a706a239d45aec91411ba21ec2fe1b6f9}{web\_server\_task\_start}}(\textcolor{keywordtype}{void}\ *pvParameters)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06781}06781\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ task\ starting..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06782}06782\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06783}06783\ \ \ \textcolor{comment}{//\ CRITICAL:\ Register\ with\ TWDT}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06784}06784\ \ \ esp\_err\_t\ wdt\_ret\ =\ esp\_task\_wdt\_add(NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06785}06785\ \ \ \textcolor{keywordflow}{if}\ (wdt\_ret\ !=\ ESP\_OK\ \&\&\ wdt\_ret\ !=\ ESP\_ERR\_INVALID\_ARG)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06786}06786\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ register\ web\ server\ task\ with\ TWDT:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06787}06787\ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(wdt\_ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06788}06788\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06789}06789\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âœ…\ Web\ server\ task\ registered\ with\ TWDT"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06790}06790\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06791}06791\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06792}06792\ \ \ \textcolor{comment}{//\ NVS\ is\ already\ initialized\ in\ main.c\ -\/\ skip\ it\ here}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06793}06793\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}NVS\ already\ initialized,\ skipping..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06794}06794\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06795}06795\ \ \ \textcolor{comment}{//\ Load\ web\ lock\ status\ from\ NVS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06796}06796\ \ \ esp\_err\_t\ lock\_ret\ =\ \mbox{\hyperlink{web__server__task_8c_afd6d2236bd4fcbbe7ccbbb0e7b4a71de}{web\_lock\_load\_from\_nvs}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06797}06797\ \ \ \textcolor{keywordflow}{if}\ (lock\_ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06798}06798\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ interface\ lock\ status:\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06799}06799\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aa21e15af227cd88b231854eef4d9a1cc}{web\_locked}}\ ?\ \textcolor{stringliteral}{"{}locked"{}}\ :\ \textcolor{stringliteral}{"{}unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06800}06800\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06801}06801\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ load\ web\ lock\ status,\ using\ default:\ unlocked"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06802}06802\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06803}06803\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06804}06804\ \ \ \textcolor{comment}{//\ Initialize\ WiFi\ APSTA}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06805}06805\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{web__server__task_8c_a67b85e21ee1a283f1f8ba6b818e6bb3e}{wifi\_init\_apsta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06806}06806\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06807}06807\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âŒ\ Failed\ to\ initialize\ WiFi\ AP:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06808}06808\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âŒ\ Web\ server\ task\ exiting"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06809}06809\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06810}06810\ \ \ \ \ esp\_task\_wdt\_delete(NULL);\ \textcolor{comment}{//\ Unregister\ from\ WDT\ before\ deleting}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06811}06811\ \ \ \ \ vTaskDelete(NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06812}06812\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06813}06813\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06814}06814\ \ \ \mbox{\hyperlink{web__server__task_8c_a6fd14c6866c5be5170e78061b5af1cca}{wifi\_ap\_active}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06815}06815\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ APSTA\ initialized"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06816}06816\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06817}06817\ \ \ \textcolor{comment}{//\ Wait\ for\ WiFi\ to\ be\ ready}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06818}06818\ \ \ vTaskDelay(pdMS\_TO\_TICKS(2000));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06819}06819\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06820}06820\ \ \ \textcolor{comment}{//\ Automaticke\ pripojeni\ STA,\ pokud\ je\ konfigurace\ v\ NVS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06821}06821\ \ \ \textcolor{keywordtype}{char}\ ssid[33]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06822}06822\ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}[65]\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06823}06823\ \ \ esp\_err\_t\ nvs\_ret\ =}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06824}06824\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a0915923195ef83ed0a4a8ab10cfe3d24}{wifi\_load\_config\_from\_nvs}}(ssid,\ \textcolor{keyword}{sizeof}(ssid),\ \mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{ha__light__task_8c_ae3a23efe266762659e03567d6afc26dd}{password}}));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06825}06825\ \ \ \textcolor{keywordflow}{if}\ (nvs\_ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06826}06826\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WiFi\ config\ found\ in\ NVS,\ attempting\ auto-\/connect..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06827}06827\ \ \ \ \ esp\_err\_t\ connect\_ret\ =\ \mbox{\hyperlink{web__server__task_8c_ad3bda523e632b9d3152cdd73fe9d8d4c}{wifi\_connect\_sta}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06828}06828\ \ \ \ \ \textcolor{keywordflow}{if}\ (connect\_ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06829}06829\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âœ…\ WiFi\ STA\ auto-\/connected\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06830}06830\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06831}06831\ \ \ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âš ï¸\ WiFi\ STA\ auto-\/connect\ failed:\ \%s\ (AP\ still\ active)"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06832}06832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ esp\_err\_to\_name(connect\_ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06833}06833\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06834}06834\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06835}06835\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}No\ WiFi\ config\ in\ NVS,\ STA\ will\ remain\ disconnected"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06836}06836\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06837}06837\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06838}06838\ \ \ \textcolor{comment}{//\ Start\ HTTP\ server}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06839}06839\ \ \ ret\ =\ \mbox{\hyperlink{web__server__task_8c_a336ec184b985a0af307c5ad81f06ae9e}{start\_http\_server}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06840}06840\ \ \ \textcolor{keywordflow}{if}\ (ret\ !=\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06841}06841\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}âŒ\ Failed\ to\ start\ HTTP\ server:\ \%s"{}},\ esp\_err\_to\_name(ret));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06842}06842\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06843}06843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}âŒ\ Web\ server\ task\ will\ continue\ but\ HTTP\ will\ not\ be\ available"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06844}06844\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06845}06845\ \ \ \ \ \textcolor{comment}{//\ Don't\ delete\ task\ -\/\ instead\ enter\ a\ maintenance\ loop\ that\ feeds\ WDT}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06846}06846\ \ \ \ \ \mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06847}06847\ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06848}06848\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{web\_server\_task\_wdt\_reset\_safe}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06849}06849\ \ \ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(1000));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06850}06850\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06851}06851\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06852}06852\ \ \ \ \ esp\_task\_wdt\_delete(NULL);\ \textcolor{comment}{//\ Unregister\ before\ deleting}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06853}06853\ \ \ \ \ vTaskDelete(NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06854}06854\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06855}06855\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06856}06856\ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06857}06857\ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}}\ =\ xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06858}06858\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}HTTP\ server\ started"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06859}06859\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06860}06860\ \ \ \textcolor{comment}{/*\ Jednorazove\ nacteni\ jasu\ do\ cache\ â€“\ GET\ /api/status\ pak\ nepristupuje\ k\ NVS\ */}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06861}06861\ \ \ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06862}06862\ \ \ \ \ \mbox{\hyperlink{structsystem__config__t}{system\_config\_t}}\ config;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06863}06863\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{config__manager_8c_a75038f5476c578ca0c192468d004160c}{config\_load\_from\_nvs}}(\&config)\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06864}06864\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ab17ad7844a24ac3ce03f648f18a3c976}{cached\_brightness}}\ =\ config.\mbox{\hyperlink{structsystem__config__t_a05bbd482d93891e6ed1ec8d1068309d7}{brightness\_level}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06865}06865\ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a10437ead7390b9e656788a7546bb15b2}{cached\_brightness\_valid}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06866}06866\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06867}06867\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06868}06868\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06869}06869\ \ \ \mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06870}06870\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ task\ started\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06871}06871\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Connect\ to\ WiFi:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_a8e19d13af09f7ed0afad391730f1e3e7}{WIFI\_AP\_SSID}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06872}06872\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Password:\ \%s"{}},\ \mbox{\hyperlink{web__server__task_8c_ac80c92af8bf29cfe0442a28b6a7ec5a3}{WIFI\_AP\_PASSWORD}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06873}06873\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Open\ browser:\ http://\%s"{}},\ \mbox{\hyperlink{web__server__task_8c_a067a8d9ec14859ad6237320d2cec686a}{WIFI\_AP\_IP}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06874}06874\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06875}06875\ \ \ \textcolor{comment}{//\ Main\ task\ loop}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06876}06876\ \ \ uint32\_t\ loop\_count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06877}06877\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06878}06878\ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06879}06879\ \ \ \ \ \textcolor{comment}{//\ Reset\ task\ watchdog\ timer}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06880}06880\ \ \ \ \ esp\_err\_t\ wdt\_ret\ =\ \mbox{\hyperlink{web__server__task_8c_a6c97a0ccfbc6eb7b4c5fc2443d19a974}{web\_server\_task\_wdt\_reset\_safe}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06881}06881\ \ \ \ \ \textcolor{keywordflow}{if}\ (wdt\_ret\ !=\ ESP\_OK\ \&\&\ wdt\_ret\ !=\ ESP\_ERR\_NOT\_FOUND)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06882}06882\ \ \ \ \ \ \ \textcolor{comment}{//\ Task\ not\ registered\ with\ TWDT\ yet}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06883}06883\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06884}06884\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06885}06885\ \ \ \ \ \textcolor{comment}{//\ Process\ web\ server\ commands\ from\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06886}06886\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aee13c30e5ba3aacbdb4adf76ac429f08}{web\_server\_process\_commands}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06887}06887\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06888}06888\ \ \ \ \ \textcolor{comment}{//\ Update\ web\ server\ state}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06889}06889\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a64790e5afc3435f96af702391bf6a24d}{web\_server\_update\_state}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06890}06890\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06891}06891\ \ \ \ \ \textcolor{comment}{//\ Periodic\ status\ logging}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06892}06892\ \ \ \ \ \textcolor{keywordflow}{if}\ (loop\_count\ \%\ 1000\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06893}06893\ \ \ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ Server\ Status:\ Active=\%s,\ Clients=\%lu,\ Uptime=\%lu\ ms"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06894}06894\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ \textcolor{stringliteral}{"{}Yes"{}}\ :\ \textcolor{stringliteral}{"{}No"{}},\ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06895}06895\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ (xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS\ -\/}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06896}06896\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06897}06897\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06898}06898\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06899}06899\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06900}06900\ \ \ \ \ loop\_count++;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06901}06901\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06902}06902\ \ \ \ \ \textcolor{comment}{//\ Wait\ for\ next\ update\ cycle\ (100ms)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06903}06903\ \ \ \ \ vTaskDelay(pdMS\_TO\_TICKS(100));}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06904}06904\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06905}06905\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06906}06906\ \ \ \textcolor{comment}{//\ Cleanup}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06907}06907\ \ \ \mbox{\hyperlink{web__server__task_8c_a12a90512dcfbad1de2475bba47af2c18}{stop\_http\_server}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06908}06908\ \ \ esp\_wifi\_stop();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06909}06909\ \ \ esp\_wifi\_deinit();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06910}06910\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06911}06911\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ task\ stopped"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06912}06912\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06913}06913\ \ \ \textcolor{comment}{//\ Task\ function\ should\ not\ return}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06914}06914\ \ \ vTaskDelete(NULL);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06915}06915\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06916}06916\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06917}06917\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06918}06918\ \textcolor{comment}{//\ WEB\ SERVER\ COMMAND\ PROCESSING}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06919}06919\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06920}06920\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06921}\mbox{\hyperlink{web__server__task_8h_aee13c30e5ba3aacbdb4adf76ac429f08}{06921}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_aee13c30e5ba3aacbdb4adf76ac429f08}{web\_server\_process\_commands}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06922}06922\ \ \ uint8\_t\ command;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06923}06923\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06924}06924\ \ \ \textcolor{comment}{//\ Check\ for\ new\ web\ server\ commands\ from\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06925}06925\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}}\ !=\ NULL\ \&\&}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06926}06926\ \ \ \ \ \ \ xQueueReceive(\mbox{\hyperlink{freertos__chess_8c_aaed4d7c5bc3e8140853498b965ec94e2}{web\_server\_command\_queue}},\ \&command,\ 0)\ ==\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06927}06927\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_ae84a23138d1c5c146c9cadf884edaa85}{web\_server\_execute\_command}}(command);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06928}06928\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06929}06929\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06930}06930\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06931}\mbox{\hyperlink{web__server__task_8h_ae84a23138d1c5c146c9cadf884edaa85}{06931}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ae84a23138d1c5c146c9cadf884edaa85}{web\_server\_execute\_command}}(uint8\_t\ command)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06932}06932\ \ \ \textcolor{keywordflow}{switch}\ (command)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06933}06933\ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{web__server__task_8h_a2c7befe5d1c5ab38fe478aae4ae86684aad9719bd0826f4a39d8295eff4581e7f}{WEB\_CMD\_START\_SERVER}}:}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06934}06934\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a1449ade4d0e7558ec4fdb355d19b2d05}{web\_server\_start}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06935}06935\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06936}06936\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06937}06937\ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{web__server__task_8h_a2c7befe5d1c5ab38fe478aae4ae86684a7538e0d87ed15a4ba791f6b29c76ac0e}{WEB\_CMD\_STOP\_SERVER}}:}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06938}06938\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a0d3daaa268fa6003470a334af7dbd2c1}{web\_server\_stop}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06939}06939\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06940}06940\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06941}06941\ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{web__server__task_8h_a2c7befe5d1c5ab38fe478aae4ae86684aeb03bffc76583b8d76e33a9e964003b0}{WEB\_CMD\_GET\_STATUS}}:}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06942}06942\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a46cb4e2e81f7578c9f230f5a3bcd11e9}{web\_server\_get\_status}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06943}06943\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06944}06944\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06945}06945\ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{web__server__task_8h_a2c7befe5d1c5ab38fe478aae4ae86684a6f0d3db11bea649d9b2921e7aee9dc92}{WEB\_CMD\_SET\_CONFIG}}:}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06946}06946\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a46d1719629fd536b25bd288a334d338c}{web\_server\_set\_config}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06947}06947\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06948}06948\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06949}06949\ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06950}06950\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Unknown\ web\ server\ command:\ \%d"{}},\ command);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06951}06951\ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06952}06952\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06953}06953\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06954}06954\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06955}06955\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06956}06956\ \textcolor{comment}{//\ WEB\ SERVER\ CONTROL\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06957}06957\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06958}06958\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06959}\mbox{\hyperlink{web__server__task_8h_a1449ade4d0e7558ec4fdb355d19b2d05}{06959}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a1449ade4d0e7558ec4fdb355d19b2d05}{web\_server\_start}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06960}06960\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06961}06961\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ already\ active"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06962}06962\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06963}06963\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06964}06964\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06965}06965\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Starting\ web\ server..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06966}06966\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06967}06967\ \ \ esp\_err\_t\ ret\ =\ \mbox{\hyperlink{web__server__task_8c_a336ec184b985a0af307c5ad81f06ae9e}{start\_http\_server}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06968}06968\ \ \ \textcolor{keywordflow}{if}\ (ret\ ==\ ESP\_OK)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06969}06969\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06970}06970\ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}}\ =\ xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06971}06971\ \ \ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ started\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06972}06972\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06973}06973\ \ \ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Failed\ to\ start\ web\ server"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06974}06974\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06975}06975\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06976}06976\ \ \ \textcolor{comment}{//\ Send\ status\ to\ status\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06977}06977\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06978}06978\ \ \ \ \ uint8\_t\ status\ =\ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ 1\ :\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06979}06979\ \ \ \ \ xQueueSend(\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}},\ \&status,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06980}06980\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06981}06981\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06982}06982\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06983}\mbox{\hyperlink{web__server__task_8h_a0d3daaa268fa6003470a334af7dbd2c1}{06983}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a0d3daaa268fa6003470a334af7dbd2c1}{web\_server\_stop}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06984}06984\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06985}06985\ \ \ \ \ ESP\_LOGW(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ not\ active\ -\/\ cannot\ stop"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06986}06986\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06987}06987\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06988}06988\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06989}06989\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Stopping\ web\ server..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06990}06990\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06991}06991\ \ \ \mbox{\hyperlink{web__server__task_8c_a12a90512dcfbad1de2475bba47af2c18}{stop\_http\_server}}();}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06992}06992\ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06993}06993\ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06994}06994\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06995}06995\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ stopped\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06996}06996\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06997}06997\ \ \ \textcolor{comment}{//\ Send\ status\ to\ status\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06998}06998\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l06999}06999\ \ \ \ \ uint8\_t\ status\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07000}07000\ \ \ \ \ xQueueSend(\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}},\ \&status,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07001}07001\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07002}07002\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07003}07003\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07004}\mbox{\hyperlink{web__server__task_8h_a46cb4e2e81f7578c9f230f5a3bcd11e9}{07004}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a46cb4e2e81f7578c9f230f5a3bcd11e9}{web\_server\_get\_status}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07005}07005\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ Server\ Status\ -\/\ Active:\ \%s,\ Clients:\ \%lu,\ Uptime:\ \%lu\ ms"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07006}07006\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ \textcolor{stringliteral}{"{}Yes"{}}\ :\ \textcolor{stringliteral}{"{}No"{}},\ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07007}07007\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ (xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS\ -\/}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07008}07008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}})}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07009}07009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07010}07010\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07011}07011\ \ \ \textcolor{comment}{//\ Send\ status\ to\ status\ queue}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07012}07012\ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07013}07013\ \ \ \ \ uint8\_t\ status\ =\ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ?\ 1\ :\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07014}07014\ \ \ \ \ xQueueSend(\mbox{\hyperlink{freertos__chess_8c_aa17b405ee779d94d3b6954dd83712591}{web\_server\_status\_queue}},\ \&status,\ 0);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07015}07015\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07016}07016\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07017}07017\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07018}\mbox{\hyperlink{web__server__task_8h_a46d1719629fd536b25bd288a334d338c}{07018}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a46d1719629fd536b25bd288a334d338c}{web\_server\_set\_config}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07019}07019\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ configuration\ update\ requested"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07020}07020\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ configuration\ updated"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07021}07021\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07022}07022\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07023}07023\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07024}07024\ \textcolor{comment}{//\ WEB\ SERVER\ STATE\ UPDATE}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07025}07025\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07026}07026\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07027}\mbox{\hyperlink{web__server__task_8h_a64790e5afc3435f96af702391bf6a24d}{07027}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a64790e5afc3435f96af702391bf6a24d}{web\_server\_update\_state}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07028}07028\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07029}07029\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07030}07030\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07031}07031\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07032}07032\ \ \ \textcolor{comment}{//\ Web\ server\ is\ running,\ no\ additional\ updates\ needed}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07033}07033\ \ \ \textcolor{comment}{//\ State\ is\ updated\ via\ HTTP\ handlers}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07034}07034\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07035}07035\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07036}07036\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07037}07037\ \textcolor{comment}{//\ HTTP\ HANDLERS\ (Legacy\ placeholder\ functions)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07038}07038\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07039}07039\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07040}\mbox{\hyperlink{web__server__task_8h_a483e27ca5d114ebfc2d8e6ea723bb804}{07040}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a483e27ca5d114ebfc2d8e6ea723bb804}{web\_server\_handle\_root}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07041}07041\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Handling\ root\ HTTP\ request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07042}07042\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Root\ page\ served\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07043}07043\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07044}07044\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07045}\mbox{\hyperlink{web__server__task_8h_acd8c0cf4c727a56b30cf72b6b48edcb4}{07045}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_acd8c0cf4c727a56b30cf72b6b48edcb4}{web\_server\_handle\_api\_status}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07046}07046\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Handling\ API\ status\ request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07047}07047\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}API\ status\ served\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07048}07048\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07049}07049\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07050}\mbox{\hyperlink{web__server__task_8h_a3bba3e089bedf1e0e30e5e4cd1db5091}{07050}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a3bba3e089bedf1e0e30e5e4cd1db5091}{web\_server\_handle\_api\_board}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07051}07051\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Handling\ API\ board\ request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07052}07052\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}API\ board\ data\ served\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07053}07053\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07054}07054\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07055}\mbox{\hyperlink{web__server__task_8h_a4680b3adbb255bf863bcf5f81925b618}{07055}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a4680b3adbb255bf863bcf5f81925b618}{web\_server\_handle\_api\_move}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07056}07056\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Handling\ API\ move\ request"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07057}07057\ \ \ ESP\_LOGD(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}API\ move\ request\ processed\ successfully"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07058}07058\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07059}07059\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07060}07060\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07061}07061\ \textcolor{comment}{//\ WEBSOCKET\ FUNCTIONS\ (Placeholder\ for\ future\ implementation)}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07062}07062\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07063}07063\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07064}\mbox{\hyperlink{web__server__task_8h_a362473905ca28dd32196ec327d9ccaee}{07064}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a362473905ca28dd32196ec327d9ccaee}{web\_server\_websocket\_init}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07065}07065\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WebSocket\ support\ not\ yet\ implemented"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07066}07066\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07067}07067\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07068}\mbox{\hyperlink{web__server__task_8h_a2cb5b9ee72f8acc55f6cb8f8b45f8bec}{07068}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a2cb5b9ee72f8acc55f6cb8f8b45f8bec}{web\_server\_websocket\_send\_update}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *data)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07069}07069\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ ||\ data\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07070}07070\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07071}07071\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07072}07072\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}WebSocket\ send:\ \%s"{}},\ data);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07073}07073\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07074}07074\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07075}07075\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07076}07076\ \textcolor{comment}{//\ UTILITY\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07077}07077\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07078}07078\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07079}\mbox{\hyperlink{web__server__task_8h_a29aa411112dd288259022706b7ff59ca}{07079}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_a29aa411112dd288259022706b7ff59ca}{web\_server\_is\_active}}(\textcolor{keywordtype}{void})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}};\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07080}07080\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07081}\mbox{\hyperlink{web__server__task_8h_ab47f0c904798d9ffc4f8e75f7ce8b5f3}{07081}}\ uint32\_t\ \mbox{\hyperlink{web__server__task_8c_ab47f0c904798d9ffc4f8e75f7ce8b5f3}{web\_server\_get\_client\_count}}(\textcolor{keywordtype}{void})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}};\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07082}07082\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07083}\mbox{\hyperlink{web__server__task_8h_aed7d37015ce007d6f84d759c94ad5f26}{07083}}\ uint32\_t\ \mbox{\hyperlink{web__server__task_8c_aed7d37015ce007d6f84d759c94ad5f26}{web\_server\_get\_uptime}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07084}07084\ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07085}07085\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07086}07086\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07087}07087\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07088}07088\ \ \ uint32\_t\ current\_time\ =\ xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07089}07089\ \ \ \textcolor{keywordflow}{return}\ current\_time\ -\/\ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07090}07090\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07091}07091\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07092}\mbox{\hyperlink{web__server__task_8h_af8feae54c5bb7a79bc36e947985c7e9f}{07092}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_af8feae54c5bb7a79bc36e947985c7e9f}{web\_server\_log\_request}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *method,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *path)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07093}07093\ \ \ \textcolor{keywordflow}{if}\ (method\ ==\ NULL\ ||\ path\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07094}07094\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07095}07095\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07096}07096\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07097}07097\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}HTTP\ Request:\ \%s\ \%s"{}},\ method,\ path);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07098}07098\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07099}07099\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07100}\mbox{\hyperlink{web__server__task_8h_a81f3502fd237eb59ce2ebfc3999b9d36}{07100}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a81f3502fd237eb59ce2ebfc3999b9d36}{web\_server\_log\_error}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *error\_message)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07101}07101\ \ \ \textcolor{keywordflow}{if}\ (error\_message\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07102}07102\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07103}07103\ \ \ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07104}07104\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07105}07105\ \ \ ESP\_LOGE(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ Server\ Error:\ \%s"{}},\ error\_message);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07106}07106\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07107}07107\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07108}07108\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07109}07109\ \textcolor{comment}{//\ CONFIGURATION\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07110}07110\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07111}07111\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07112}\mbox{\hyperlink{web__server__task_8h_ab18a2857822cb150c96fa252d484246a}{07112}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ab18a2857822cb150c96fa252d484246a}{web\_server\_set\_port}}(uint16\_t\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07113}07113\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Setting\ web\ server\ port\ to\ \%d"{}},\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07114}07114\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ port\ updated\ to\ \%d"{}},\ \mbox{\hyperlink{ha__light__task_8c_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07115}07115\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07116}07116\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07117}\mbox{\hyperlink{web__server__task_8h_ad915360105d028b5ebd3ca1b38e391d4}{07117}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ad915360105d028b5ebd3ca1b38e391d4}{web\_server\_set\_max\_clients}}(uint32\_t\ max\_clients)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07118}07118\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Setting\ web\ server\ max\ clients\ to\ \%lu"{}},\ max\_clients);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07119}07119\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ max\ clients\ updated\ to\ \%lu"{}},\ max\_clients);}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07120}07120\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07121}07121\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07122}\mbox{\hyperlink{web__server__task_8h_a74937acaf240abcaaac7d9260e412beb}{07122}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a74937acaf240abcaaac7d9260e412beb}{web\_server\_enable\_ssl}}(\textcolor{keywordtype}{bool}\ enable)\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07123}07123\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Setting\ web\ server\ SSL\ to\ \%s"{}},}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07124}07124\ \ \ \ \ \ \ \ \ \ \ \ enable\ ?\ \textcolor{stringliteral}{"{}enabled"{}}\ :\ \textcolor{stringliteral}{"{}disabled"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07125}07125\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ SSL\ \%s"{}},\ enable\ ?\ \textcolor{stringliteral}{"{}enabled"{}}\ :\ \textcolor{stringliteral}{"{}disabled"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07126}07126\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07127}07127\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07128}07128\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07129}07129\ \textcolor{comment}{//\ STATUS\ AND\ CONTROL\ FUNCTIONS}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07130}07130\ \textcolor{comment}{//\ ============================================================================}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07131}07131\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07132}\mbox{\hyperlink{web__server__task_8h_aa8fab275f60059ceb3bc58df7650bf0b}{07132}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{web__server__task_8c_aa8fab275f60059ceb3bc58df7650bf0b}{web\_server\_is\_task\_running}}(\textcolor{keywordtype}{void})\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}};\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07133}07133\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07134}\mbox{\hyperlink{web__server__task_8h_a76a1b24d8a4f73007def0e2675cb2b1c}{07134}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_a76a1b24d8a4f73007def0e2675cb2b1c}{web\_server\_stop\_task}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07135}07135\ \ \ \mbox{\hyperlink{animation__task_8c_a35141cb45623cb3b7b4d96da35ed1831}{task\_running}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07136}07136\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ task\ stop\ requested"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07137}07137\ \}}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07138}07138\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07139}\mbox{\hyperlink{web__server__task_8h_ae0743c305f029ddda532f3823d8bd602}{07139}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{web__server__task_8c_ae0743c305f029ddda532f3823d8bd602}{web\_server\_reset}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07140}07140\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Resetting\ web\ server..."{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07141}07141\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07142}07142\ \ \ \mbox{\hyperlink{web__server__task_8c_aafa0fef29f6314e439892920011c0612}{web\_server\_active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07143}07143\ \ \ \mbox{\hyperlink{web__server__task_8c_a78e57b763d02a6d2f0e9e96a9bd4bdc4}{web\_server\_start\_time}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07144}07144\ \ \ \mbox{\hyperlink{web__server__task_8c_a21f294411b76ec3adac8af9c73e83b13}{client\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07145}07145\ }
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07146}07146\ \ \ ESP\_LOGI(\mbox{\hyperlink{main_8c_a5a85b9c772bbeb480b209a3e6ea92b4c}{TAG}},\ \textcolor{stringliteral}{"{}Web\ server\ reset\ completed"{}});}
\DoxyCodeLine{\Hypertarget{web__server__task_8c_source_l07147}07147\ \}}

\end{DoxyCode}
